<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Handling Strings in R</title>
  <meta name="description" content="Handling Strings in R">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Handling Strings in R" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="gastonstat/r4strings" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Handling Strings in R" />
  
  
  

<meta name="author" content="Gaston Sanchez">


<meta name="date" content="2018-03-21">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  


<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Handling Strings in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path=""><a href="#preface"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path=""><a href="#intro"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path=""><a href="#about-this-book"><i class="fa fa-check"></i><b>1.1</b> About this book</a><ul>
<li class="chapter" data-level="1.1.1" data-path=""><a href="#structure-of-the-book"><i class="fa fa-check"></i><b>1.1.1</b> Structure of the book</a></li>
<li class="chapter" data-level="1.1.2" data-path=""><a href="#main-resources"><i class="fa fa-check"></i><b>1.1.2</b> Main Resources</a></li>
<li class="chapter" data-level="1.1.3" data-path=""><a href="#acknowledgements"><i class="fa fa-check"></i><b>1.1.3</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.1.4" data-path=""><a href="#colophon"><i class="fa fa-check"></i><b>1.1.4</b> Colophon</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Characters</b></span></li>
<li class="chapter" data-level="2" data-path=""><a href="#chars"><i class="fa fa-check"></i><b>2</b> Character Strings in R</a><ul>
<li class="chapter" data-level="2.1" data-path=""><a href="#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path=""><a href="#common-use-of-strings-in-r"><i class="fa fa-check"></i><b>2.2</b> Common use of strings in R</a></li>
<li class="chapter" data-level="2.3" data-path=""><a href="#creating-character-strings"><i class="fa fa-check"></i><b>2.3</b> Creating Character Strings</a><ul>
<li class="chapter" data-level="2.3.1" data-path=""><a href="#empty-string"><i class="fa fa-check"></i><b>2.3.1</b> Empty string</a></li>
<li class="chapter" data-level="2.3.2" data-path=""><a href="#empty-character-vector"><i class="fa fa-check"></i><b>2.3.2</b> Empty character vector</a></li>
<li class="chapter" data-level="2.3.3" data-path=""><a href="#function-c"><i class="fa fa-check"></i><b>2.3.3</b> Function <code>c()</code></a></li>
<li class="chapter" data-level="2.3.4" data-path=""><a href="#is.character-and-as.character"><i class="fa fa-check"></i><b>2.3.4</b> <code>is.character()</code> and <code>as.character()</code></a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path=""><a href="#behavior-of-r-objects-with-character-strings"><i class="fa fa-check"></i><b>2.4</b> Behavior of R objects with character strings</a></li>
<li class="chapter" data-level="2.5" data-path=""><a href="#the-workhorse-function-paste"><i class="fa fa-check"></i><b>2.5</b> The workhorse function <code>paste()</code></a></li>
<li class="chapter" data-level="2.6" data-path=""><a href="#exercises"><i class="fa fa-check"></i><b>2.6</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Formatting</b></span></li>
<li class="chapter" data-level="3" data-path=""><a href="#formatting"><i class="fa fa-check"></i><b>3</b> Formatting Text and Numbers</a><ul>
<li class="chapter" data-level="3.1" data-path=""><a href="#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path=""><a href="#printing-and-formatting"><i class="fa fa-check"></i><b>3.2</b> Printing and formatting</a></li>
<li class="chapter" data-level="3.3" data-path=""><a href="#generic-printing"><i class="fa fa-check"></i><b>3.3</b> Generic printing</a><ul>
<li class="chapter" data-level="3.3.1" data-path=""><a href="#when-to-use-print"><i class="fa fa-check"></i><b>3.3.1</b> When to use <code>print()</code>?</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path=""><a href="#concatenate-and-print-with-cat"><i class="fa fa-check"></i><b>3.4</b> Concatenate and print with <code>cat()</code></a></li>
<li class="chapter" data-level="3.5" data-path=""><a href="#encoding-strings-with-format"><i class="fa fa-check"></i><b>3.5</b> Encoding strings with <code>format()</code></a></li>
<li class="chapter" data-level="3.6" data-path=""><a href="#exercises-1"><i class="fa fa-check"></i><b>3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path=""><a href="#c-style-formatting"><i class="fa fa-check"></i><b>4</b> C-style Formatting</a><ul>
<li class="chapter" data-level="4.1" data-path=""><a href="#c-style-formatting-options"><i class="fa fa-check"></i><b>4.1</b> C-style formatting options</a><ul>
<li class="chapter" data-level="4.1.1" data-path=""><a href="#format-slot-syntax"><i class="fa fa-check"></i><b>4.1.1</b> Format Slot Syntax</a></li>
<li class="chapter" data-level="4.1.2" data-path=""><a href="#example-basic-sprintf"><i class="fa fa-check"></i><b>4.1.2</b> Example: basic <code>sprintf()</code></a></li>
<li class="chapter" data-level="4.1.3" data-path=""><a href="#example-file-names"><i class="fa fa-check"></i><b>4.1.3</b> Example: File Names</a></li>
<li class="chapter" data-level="4.1.4" data-path=""><a href="#example-fahrenheit-to-celsius"><i class="fa fa-check"></i><b>4.1.4</b> Example: Fahrenheit to Celsius</a></li>
<li class="chapter" data-level="4.1.5" data-path=""><a href="#example-car-traveled-distance"><i class="fa fa-check"></i><b>4.1.5</b> Example: Car Traveled Distance</a></li>
<li class="chapter" data-level="4.1.6" data-path=""><a href="#example-coffee-prices"><i class="fa fa-check"></i><b>4.1.6</b> Example: Coffee Prices</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path=""><a href="#input-and-output"><i class="fa fa-check"></i><b>5</b> Input and Output</a><ul>
<li class="chapter" data-level="5.1" data-path=""><a href="#output"><i class="fa fa-check"></i><b>5.1</b> Output</a><ul>
<li class="chapter" data-level="5.1.1" data-path=""><a href="#concatenating-output"><i class="fa fa-check"></i><b>5.1.1</b> Concatenating output</a></li>
<li class="chapter" data-level="5.1.2" data-path=""><a href="#sinking-output"><i class="fa fa-check"></i><b>5.1.2</b> Sinking output</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path=""><a href="#exporting-tables"><i class="fa fa-check"></i><b>5.2</b> Exporting tables</a></li>
</ul></li>
<li class="part"><span><b>III Manipulations</b></span></li>
<li class="chapter" data-level="6" data-path=""><a href="#manip"><i class="fa fa-check"></i><b>6</b> Basic String Manipulations</a><ul>
<li class="chapter" data-level="6.1" data-path=""><a href="#introduction-2"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path=""><a href="#basic-manipulations"><i class="fa fa-check"></i><b>6.2</b> Basic Manipulations</a></li>
<li class="chapter" data-level="6.3" data-path=""><a href="#counting-characters"><i class="fa fa-check"></i><b>6.3</b> Counting characters</a></li>
<li class="chapter" data-level="6.4" data-path=""><a href="#casefolding"><i class="fa fa-check"></i><b>6.4</b> Casefolding</a></li>
<li class="chapter" data-level="6.5" data-path=""><a href="#translating-characters"><i class="fa fa-check"></i><b>6.5</b> Translating characters</a></li>
<li class="chapter" data-level="6.6" data-path=""><a href="#abbreviating-strings"><i class="fa fa-check"></i><b>6.6</b> Abbreviating strings</a></li>
<li class="chapter" data-level="6.7" data-path=""><a href="#replacing-strings"><i class="fa fa-check"></i><b>6.7</b> Replacing strings</a></li>
<li class="chapter" data-level="6.8" data-path=""><a href="#set-operations"><i class="fa fa-check"></i><b>6.8</b> Set Operations</a><ul>
<li class="chapter" data-level="6.8.1" data-path=""><a href="#set-union-with-union"><i class="fa fa-check"></i><b>6.8.1</b> Set union with <code>union()</code></a></li>
<li class="chapter" data-level="6.8.2" data-path=""><a href="#set-intersection-with-intersect"><i class="fa fa-check"></i><b>6.8.2</b> Set intersection with <code>intersect()</code></a></li>
<li class="chapter" data-level="6.8.3" data-path=""><a href="#set-difference-with-setdiff"><i class="fa fa-check"></i><b>6.8.3</b> Set difference with <code>setdiff()</code></a></li>
<li class="chapter" data-level="6.8.4" data-path=""><a href="#set-equality-with-setequal"><i class="fa fa-check"></i><b>6.8.4</b> Set equality with <code>setequal()</code></a></li>
<li class="chapter" data-level="6.8.5" data-path=""><a href="#exact-equality-with-identical"><i class="fa fa-check"></i><b>6.8.5</b> Exact equality with <code>identical()</code></a></li>
<li class="chapter" data-level="6.8.6" data-path=""><a href="#element-contained-with-is.element"><i class="fa fa-check"></i><b>6.8.6</b> Element contained with <code>is.element()</code></a></li>
<li class="chapter" data-level="6.8.7" data-path=""><a href="#sorting-with-sort"><i class="fa fa-check"></i><b>6.8.7</b> Sorting with <code>sort()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path=""><a href="#stringr-basics"><i class="fa fa-check"></i><b>7</b> Stringr Basics</a><ul>
<li class="chapter" data-level="7.1" data-path=""><a href="#introduction-3"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path=""><a href="#package-stringr"><i class="fa fa-check"></i><b>7.2</b> Package <code>stringr</code></a></li>
<li class="chapter" data-level="7.3" data-path=""><a href="#basic-string-operations"><i class="fa fa-check"></i><b>7.3</b> Basic String Operations</a><ul>
<li class="chapter" data-level="7.3.1" data-path=""><a href="#concatenating-with-str_c"><i class="fa fa-check"></i><b>7.3.1</b> Concatenating with <code>str_c()</code></a></li>
<li class="chapter" data-level="7.3.2" data-path=""><a href="#number-of-characters-with-str_length"><i class="fa fa-check"></i><b>7.3.2</b> Number of characters with <code>str_length()</code></a></li>
<li class="chapter" data-level="7.3.3" data-path=""><a href="#substring-with-str_sub"><i class="fa fa-check"></i><b>7.3.3</b> Substring with <code>str_sub()</code></a></li>
<li class="chapter" data-level="7.3.4" data-path=""><a href="#duplication-with-str_dup"><i class="fa fa-check"></i><b>7.3.4</b> Duplication with <code>str_dup()</code></a></li>
<li class="chapter" data-level="7.3.5" data-path=""><a href="#padding-with-str_pad"><i class="fa fa-check"></i><b>7.3.5</b> Padding with <code>str_pad()</code></a></li>
<li class="chapter" data-level="7.3.6" data-path=""><a href="#wrapping-with-str_wrap"><i class="fa fa-check"></i><b>7.3.6</b> Wrapping with <code>str_wrap()</code></a></li>
<li class="chapter" data-level="7.3.7" data-path=""><a href="#trimming-with-str_trim"><i class="fa fa-check"></i><b>7.3.7</b> Trimming with <code>str_trim()</code></a></li>
<li class="chapter" data-level="7.3.8" data-path=""><a href="#word-extraction-with-word"><i class="fa fa-check"></i><b>7.3.8</b> Word extraction with <code>word()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path=""><a href="#basic-manipulation-examples"><i class="fa fa-check"></i><b>8</b> Basic Manipulation Examples</a><ul>
<li class="chapter" data-level="8.1" data-path=""><a href="#introduction-4"><i class="fa fa-check"></i><b>8.1</b> Introduction</a><ul>
<li class="chapter" data-level="8.1.1" data-path=""><a href="#example-names-of-files"><i class="fa fa-check"></i><b>8.1.1</b> Example: Names of files</a></li>
<li class="chapter" data-level="8.1.2" data-path=""><a href="#example-valid-color-names"><i class="fa fa-check"></i><b>8.1.2</b> Example: Valid Color Names</a></li>
<li class="chapter" data-level="8.1.3" data-path=""><a href="#example-me-and-you-plot"><i class="fa fa-check"></i><b>8.1.3</b> Example: Me and You plot</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Regex</b></span></li>
<li class="chapter" data-level="9" data-path=""><a href="#regex1"><i class="fa fa-check"></i><b>9</b> Regular Expressions</a><ul>
<li class="chapter" data-level="9.1" data-path=""><a href="#introduction-5"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path=""><a href="#what-are-regular-expressions"><i class="fa fa-check"></i><b>9.2</b> What are Regular Expressions?</a><ul>
<li class="chapter" data-level="9.2.1" data-path=""><a href="#what-are-regular-expressions-used-for"><i class="fa fa-check"></i><b>9.2.1</b> What are Regular Expressions used for?</a></li>
<li class="chapter" data-level="9.2.2" data-path=""><a href="#a-word-of-caution-about-regex"><i class="fa fa-check"></i><b>9.2.2</b> A word of caution about regex</a></li>
<li class="chapter" data-level="9.2.3" data-path=""><a href="#regular-expressions-in-r"><i class="fa fa-check"></i><b>9.2.3</b> Regular Expressions in R</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path=""><a href="#regex-basics"><i class="fa fa-check"></i><b>9.3</b> Regex Basics</a></li>
<li class="chapter" data-level="9.4" data-path=""><a href="#matching-literal-characters"><i class="fa fa-check"></i><b>9.4</b> Matching Literal Characters</a></li>
<li class="chapter" data-level="9.5" data-path=""><a href="#metacharacters"><i class="fa fa-check"></i><b>9.5</b> Metacharacters</a><ul>
<li class="chapter" data-level="9.5.1" data-path=""><a href="#the-wild-metacharacter"><i class="fa fa-check"></i><b>9.5.1</b> The Wild Metacharacter</a></li>
<li class="chapter" data-level="9.5.2" data-path=""><a href="#escaping-metacharacters"><i class="fa fa-check"></i><b>9.5.2</b> Escaping metacharacters</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path=""><a href="#character-sets"><i class="fa fa-check"></i><b>10</b> Character Sets</a><ul>
<li class="chapter" data-level="10.1" data-path=""><a href="#defining-character-sets"><i class="fa fa-check"></i><b>10.1</b> Defining character sets</a></li>
<li class="chapter" data-level="10.2" data-path=""><a href="#character-ranges"><i class="fa fa-check"></i><b>10.2</b> Character ranges</a></li>
<li class="chapter" data-level="10.3" data-path=""><a href="#negative-character-sets"><i class="fa fa-check"></i><b>10.3</b> Negative Character Sets</a></li>
<li class="chapter" data-level="10.4" data-path=""><a href="#metacharacters-inside-character-sets"><i class="fa fa-check"></i><b>10.4</b> Metacharacters inside character sets</a></li>
<li class="chapter" data-level="10.5" data-path=""><a href="#character-classes"><i class="fa fa-check"></i><b>10.5</b> Character Classes</a></li>
<li class="chapter" data-level="10.6" data-path=""><a href="#posix-character-classes"><i class="fa fa-check"></i><b>10.6</b> POSIX Character Classes</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Handling Strings in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Handling Strings in R</h1>
<h4 class="author"><em>Gaston Sanchez</em></h4>
<h4 class="date"><em>2018-03-21</em></h4>
</div>
<section id="preface" class="level1 unnumbered">
<h1>Preface</h1>
<p><img src="images/cover.png" width="300" height="375" alt="Cover image" /></p>
<p>This book aims to provide a panoramic perspective of the wide array of string manipulations that you can perform with R. If you are new to R, or lack experience working with character data, this book will help you get started with the basics of handling strings. Likewise, if you are already familiar with R, you will find material that shows you how to do more advanced string and text processing operations.</p>
<p>Despite the fact that R may not be as rich and diverse as other scripting languages when it comes to string manipulation, it can take you very far if you know how. Sadly, documentation on how to manipulate strings and text data in R is very scarce. This work is my two cents to increase the number of available resources about this indispensable topic for any data scientist.</p>
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>

</section>
<section id="intro" class="level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>At its heart, computing involves working with numbers. That’s the main reason why computers were invented: to facilitate mathematical operations around numbers; from basic arithmetic to more complex operations (e.g. trigonometry, algebra, calculus, etc.) Nowadays, however, we use computers to work with data that are not just numbers. We use them to write a variety of documents, we use them to create and edit images and videos, to manipulate sound, among many other tasks. Learning to manipulate those data types is fundamental to programming.</p>
<p>Today, there is a considerable amount of information and data in the form of text. Look at any website: pretty much the contents are text and images, with some videos here and there, and maybe some tables and/or a list of numbers.</p>
<p>Likewise, most of the times you are going to be working with text files: script files, reports, data files, source code files, etc. All the R script files that you use are essentially plain text files. I bet you have a csv file or any other field delimited format (or even in HTML, XML, JSON, etc), with some fields containing characters. In all of these cases what you are working with is essentially a bunch of characters.</p>
<p>At the end of the day all the data that is passed to the computer is converted to binary format (zeros and ones) so computers can process it. But no one can deny the fact that a lot of what we do with computers is working with text and character strings.</p>
<p>And then inside R you also have text. Things like row names and column names of matrices, data frames, tables, and any other rectangular data structure. Lists and vectors may also contain names. And what about the text in graphics? Things like titles, subtitles, axis labels, legends, colors, displayed text in a plot, etc. Text is omnipresent: whether you are we are surrounded by it.</p>
<section id="about-this-book" class="level2">
<h2><span class="header-section-number">1.1</span> About this book</h2>
<p>This book aims to help you get started with handling strings in R. It provides an overview of several resources that you can use for string manipulation. It covers useful functions, general topics, common operations, and other tricks.</p>
<p>This book is NOT about textual data analysis, linguistic analysis, text mining, or natural language processing (NLP). For those purposes, I highly recommend taking a look at the CRAN Task View on Natural Language Processing (NLP):</p>
<p><a href="http://cran.r-project.org/web/views/NaturalLanguageProcessing.html" class="uri">http://cran.r-project.org/web/views/NaturalLanguageProcessing.html</a></p>
<p>However, even if you don’t plan to do text analysis, text mining, or natural language processing, I bet you have some dataset that contains data as characters: names of rows, names of columns, dates, monetary quantities, longitude and latitude, etc. I’m sure that you have encountered one or more of the following cases:</p>
<ul>
<li>You want to remove a given character in the names of your variables</li>
<li>You want to replace a given character in your data</li>
<li>Maybe you wanted to convert labels to upper case (or lower case)</li>
<li>You’ve been struggling with xml (or html) files</li>
<li>You’ve been modifying text files in excel changing labels, categories, one cell at a time, or doing one thousand copy-paste operations</li>
</ul>
<p>Hopefully after reading this book, you will have the necessary tools in your toolbox for dealing with these (and many) other situations that involve handling and processing strings in R.</p>
<section id="structure-of-the-book" class="level3">
<h3><span class="header-section-number">1.1.1</span> Structure of the book</h3>
<p>The content of the book is divided in five major parts:</p>
<ol type="1">
<li>Getting started with character strings</li>
<li>Formatting and printing text and numbers</li>
<li>Input and output</li>
<li>Basic string manipulations</li>
<li>Working with Regular Expressions</li>
</ol>
<p>If you have minimal or none experience with R, the best place to start is <a href="#chars">Chapter 2: Characters</a>. If you are already familiar with the basics of vectors and character objects, you can quickly skim this chapter, or skip it, and then go to another chapter of your interest.</p>
<p>Chapter 2 describes different ways to format text and numbers. These are useful tools for when you want to produce output that will either be displayed on screen, or that will be exported to a file.</p>
<p>The third major component of the book has to do with reading in information from text files, as well as exporting output to text to files.</p>
<p>The fourth part of the book deals with <em>basic</em> string manipulations. By “basic” I mean any type of manipulation and transformation that does not require the use of regular expressions.</p>
<p>The fifth part comprises working with regular expressions. Here you will learn about the basic concepts around regular expressions (regex), the intricacies when working with regex in R, and becoming familiar with the regex functions in the R package <strong>stringr</strong>.</p>
<p>Last but not least, the last chapters of the book present a couple of case studies and extended practical examples that cover the main topics covered in the book.</p>
</section>
<section id="main-resources" class="level3">
<h3><span class="header-section-number">1.1.2</span> Main Resources</h3>
<p>Documentation on how to manipulate strings and text data in R is very scarce. This is mostly because R is not perceived as a scripting language (like Python or Java, among others). However, I seriously think that we need to have more available resources about this indispensable topic.</p>
<p>There is not much documentation on how to manipulate character strings and text data in R. There are great R books for an enormous variety of statistical methods, graphics and data visualization, as well as applications in a wide range of fields such as ecology, genetics, psychology, finance, economics, etc. But not for manipulating strings and text data.</p>
<p>Perhaps the main reason for this lack of resources is that R is not considered to be qualified as a “scripting” language: R is primarily perceived as a language for computing and programming with (mostly numeric) data. Quoting <a href="http://journal.r-project.org/archive/2010-2/RJournal_2010-2_Wickham.pdf">Hadley Wickham</a></p>
<blockquote>
<p>“R provides a solid set of string operations, but because they have grown organically over time, they can be inconsistent and a little hard to learn. Additionally, they lag behind the string operations in other programming languages, so that some things that are easy to do in languages like Ruby or Python are rather hard to do in R”</p>
</blockquote>
<p>Most introductory books about R have small sections that briefly cover string manipulation without going further down. That is why I don’t have many books for recommendation, if anything the book by Phil Spector <strong>Data Manipulation with R</strong>.</p>
<p>If published material is not abundant, we still have the online world. The good news is that the web is full of hundreds of references about processing character strings. The bad news is that they are very spread and uncategorized.</p>
<p>For specific topics and tasks, a good place to start with is <em>Stack Overflow</em>. This is a questions-and-answers site for programmers that has a lot of questions related with R. Just look for those questions tagged with <code>&quot;r&quot;</code>: <a href="http://stackoverflow.com/questions/tagged/r" class="uri">http://stackoverflow.com/questions/tagged/r</a>. There is a good number of posts related with handling characters and text, and they can give you a hint on how to solve a particular problem. There is also <em>R-bloggers</em>, <a href="http://www.r-bloggers.com" class="uri">http://www.r-bloggers.com</a>, a blog aggregator for R enthusiasts in which is also possible to find contributed material about processing strings as well as text data analysis.</p>
<p>You can also check the following resources that have to do with string manipulations. It is a very short list of resources but I’ve found them very useful:</p>
<ul>
<li><p><strong>R Wikibook: Programming and Text Processing</strong> <a href="http://en.wikibooks.org/wiki/R_Programming/Text_Processing" class="uri">http://en.wikibooks.org/wiki/R_Programming/Text_Processing</a> R wikibook has a section dedicated to text processing that is worth check it out.</p></li>
<li><p><strong>stringr: modern, consisting string processing</strong> by Hadley Wickham <a href="http://journal.r-project.org/archive/2010-2/RJournal_2010-2_Wickham.pdf" class="uri">http://journal.r-project.org/archive/2010-2/RJournal_2010-2_Wickham.pdf</a> Article from the R journal introducing the package <code>&quot;stringr&quot;</code> by Hadley Wickham.</p></li>
<li><p><strong>Introduction to String Matching and Modification in R Using Regular Expressions</strong> by Svetlana Eden <a href="http://biostat.mc.vanderbilt.edu/wiki/pub/Main/SvetlanaEdenRFiles/regExprTalk.pdf" class="uri">http://biostat.mc.vanderbilt.edu/wiki/pub/Main/SvetlanaEdenRFiles/regExprTalk.pdf</a></p></li>
</ul>
</section>
<section id="acknowledgements" class="level3">
<h3><span class="header-section-number">1.1.3</span> Acknowledgements</h3>
<p>This book is a major iteration on a previous ebook that I wrote in 2013: <strong>Handling and Processing Strings in R</strong>. As you can tell, I’ve shorten the title to just <em>Handling Strings in R</em>. I’ve also expanded the content to include many more examples, code snippets, and material about regular expressions.</p>
<p>As always, many thanks to Jessica who patiently accepted my occupying of the dinning table as my workbench (that’s over now).</p>
</section>
<section id="colophon" class="level3">
<h3><span class="header-section-number">1.1.4</span> Colophon</h3>
<p>The source of the book is available in the github repository:</p>
<p><a href="https://github.com/gastonstat/r4strings" class="uri">https://github.com/gastonstat/r4strings</a>.</p>
<p>The book is powered by <a href="https://bookdown.org" class="uri">https://bookdown.org</a>.</p>
<p>This book was built with:</p>
<pre><code>#&gt; R version 3.3.1 (2016-06-21)
#&gt; Platform: x86_64-apple-darwin13.4.0 (64-bit)
#&gt; Running under: OS X 10.10.5 (Yosemite)
#&gt; 
#&gt; locale:
#&gt; [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
#&gt; 
#&gt; attached base packages:
#&gt; [1] stats     graphics  grDevices utils     datasets  base     
#&gt; 
#&gt; loaded via a namespace (and not attached):
#&gt;  [1] Rcpp_0.12.8     bookdown_0.1.16 digest_0.6.10   rprojroot_1.2  
#&gt;  [5] mime_0.5        R6_2.2.0        xtable_1.8-2    backports_1.0.5
#&gt;  [9] magrittr_1.5    evaluate_0.10   stringi_1.1.2   miniUI_0.1.1   
#&gt; [13] rstudioapi_0.6  rmarkdown_1.3   tools_3.3.1     stringr_1.1.0  
#&gt; [17] shiny_0.14.2    yaml_2.1.13     httpuv_1.3.3    htmltools_0.3.5
#&gt; [21] knitr_1.14.11   methods_3.3.1</code></pre>

</section>
</section>
</section>
<section id="part-characters" class="level1 unnumbered">
<h1>(PART) Characters</h1>
</section>
<section id="chars" class="level1">
<h1><span class="header-section-number">2</span> Character Strings in R</h1>
<section id="introduction" class="level2">
<h2><span class="header-section-number">2.1</span> Introduction</h2>
<p>This chapter introduces you to the basic concepts for creating character vectors and character strings in R. You will also learn how R treats objects containing characters.</p>
<p>In R, a piece of text is represented as a sequence of characters (letters, numbers, and symbols). The data type R provides for storing sequences of characters is <em>character</em>. Formally, the <strong>mode</strong> of an object that holds character strings in R is <code>&quot;character&quot;</code>.</p>
<p>You express character strings by surrounding text within double quotes:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="st">&quot;a character string using double quotes&quot;</span></a></code></pre></div>
<p>or you can also surround text within single quotes:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="st">&#39;a character string using single quotes&#39;</span></a></code></pre></div>
<p>The important thing is that you must match the type of quotes that your are using. A starting double quote must have an ending double quote. Likewise, a string with an opening single quote must be closed with a single quote.</p>
<p>Typing characters in R like in above examples is not very useful. Typically, you are going to create objects or variables containing some strings. For example, you can create a variable <code>string</code> that stores some string:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">string &lt;-<span class="st"> &#39;do more with less&#39;</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">string</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; [1] &quot;do more with less&quot;</span></a></code></pre></div>
<p>Notice that when you print a character object, R displays it using double quotes (regardless of whether the string was created using single or double quotes). This allows you to quickly identify when an object contains character values.</p>
<p>When writing strings, you can insert single quotes in a string with double quotes, and vice versa:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># single quotes within double quotes</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">ex1 &lt;-<span class="st"> &quot;The &#39;R&#39; project for statistical computing&quot;</span></a></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># double quotes within single quotes</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">ex2 &lt;-<span class="st"> &#39;The &quot;R&quot; project for statistical computing&#39;</span></a></code></pre></div>
<p>However, you cannot directly insert single quotes in a string with single quotes, neither you can insert double quotes in a string with double quotes (Don’t do this!):</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">ex3 &lt;-<span class="st"> &quot;This &quot;</span>is<span class="st">&quot; totally unacceptable&quot;</span></a></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">ex4 &lt;-<span class="st"> &#39;This &#39;</span>is<span class="st">&#39; absolutely wrong&#39;</span></a></code></pre></div>
<p>In both cases R will give you an error due to the unexpected presence of either a double quote within double quotes, or a single quote within single quotes.</p>
<p>If you really want to include a double quote as part of the string, you need to <em>escape</em> the double quote using a backslash <code>\</code> before it:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="st">&quot;The </span><span class="ch">\&quot;</span><span class="st">R</span><span class="ch">\&quot;</span><span class="st"> project for statistical computing&quot;</span></a></code></pre></div>
<p>We will talk more about escaping characters in the following chapters.</p>
</section>
<section id="common-use-of-strings-in-r" class="level2">
<h2><span class="header-section-number">2.2</span> Common use of strings in R</h2>
<p>Perhaps the most common use of character strings in R has to do with:</p>
<ul>
<li>names of files and directories</li>
<li>names of elements in data objects</li>
<li>text elements displayed in plots and graphs</li>
</ul>
<p>When you read a file, for instance a data table stored in a csv file, you typically use the <code>read.table()</code> function and friends—e.g. <code>read.csv()</code>, <code>read.delim()</code>. Assuming that the file <code>dataset.csv</code> is in your working directory:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&#39;dataset.csv&#39;</span>)</a></code></pre></div>
<p>The main parameter for the function <code>read.csv()</code> is <code>file</code> which requires a character string with the pathname of the file.</p>
<p>Another example of a basic use of characters is when you assign names to the elements of some data structure in R. For instance, if you want to name the elements of a (numeric) vector, you can use the function <code>names()</code> as follows:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">num_vec &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw">names</span>(num_vec) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;uno&#39;</span>, <span class="st">&#39;dos&#39;</span>, <span class="st">&#39;tres&#39;</span>, <span class="st">&#39;cuatro&#39;</span>, <span class="st">&#39;cinco&#39;</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">num_vec</a></code></pre></div>
<p>Likewise, many of the parameters in the plotting functions require some sort of input string. Below is a hypothetical example of a scatterplot that includes several graphical elements like the main title (<code>main</code>), subtitle (<code>sub</code>), labels for both x-axis and y-axis (<code>xlab</code>, <code>ylab</code>), the name of the color (<code>col</code>), and the symbol for the point character (<code>pch</code>).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">plot</span>(x, y, </a>
<a class="sourceLine" id="cb12-2" data-line-number="2">     <span class="dt">main =</span> <span class="st">&#39;Main Title&#39;</span>, </a>
<a class="sourceLine" id="cb12-3" data-line-number="3">     <span class="dt">sub =</span> <span class="st">&#39;Subtitle&#39;</span>,</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">     <span class="dt">xlab =</span> <span class="st">&#39;x-axis label&#39;</span>, </a>
<a class="sourceLine" id="cb12-5" data-line-number="5">     <span class="dt">ylab =</span> <span class="st">&#39;y-axis label&#39;</span>,</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">     <span class="dt">col =</span> <span class="st">&#39;red&#39;</span>, </a>
<a class="sourceLine" id="cb12-7" data-line-number="7">     <span class="dt">pch =</span> <span class="st">&#39;x&#39;</span>)</a></code></pre></div>
</section>
<section id="creating-character-strings" class="level2">
<h2><span class="header-section-number">2.3</span> Creating Character Strings</h2>
<p>Besides the single quotes <code>''</code> or double quotes <code>&quot;&quot;</code>, R provides the function <code>character()</code> to create character vectors. More specifically, <code>character()</code> is the function that creates vector objects of type <code>&quot;character&quot;</code>.</p>
<p>When using <code>character()</code> you just have to specify the length of the vector. The output will be a character vector filled of empty strings:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># character vector with 5 empty strings</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">char_vector &lt;-<span class="st"> </span><span class="kw">character</span>(<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">char_vector</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; [1] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</span></a></code></pre></div>
<p>When would you use <code>character()</code>? A typical usage case is when you want to initialize an <em>empty</em> character vector of a given length. The idea is to create an object that you will modify later with some computation.</p>
<p>As with any other vector, once an empty character vector has been created, you can add new components to it by simply giving it an index value outside its previous range:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># another example</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">example &lt;-<span class="st"> </span><span class="kw">character</span>(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">example</a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt; character(0)</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co"># check its length</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="kw">length</span>(example)</a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt; [1] 0</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co"># add first element</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11">example[<span class="dv">1</span>] &lt;-<span class="st"> &quot;first&quot;</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12">example</a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt; [1] &quot;first&quot;</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co"># check its length again</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="kw">length</span>(example)</a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
<p>You can add more elements without the need to follow a consecutive index range:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">example[<span class="dv">4</span>] &lt;-<span class="st"> &quot;fourth&quot;</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">example</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt; [1] &quot;first&quot;  NA       NA       &quot;fourth&quot;</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="kw">length</span>(example)</a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
<p>Notice that the vector <code>example</code> went from containing one-element to contain four-elements without specifying the second and third elements. R fills this gap with missing values <code>NA</code>.</p>
<section id="empty-string" class="level3">
<h3><span class="header-section-number">2.3.1</span> Empty string</h3>
<p>The most basic type of string is the <strong>empty string</strong> produced by consecutive quotation marks: <code>&quot;&quot;</code>. Technically, <code>&quot;&quot;</code> is a string with no characters in it, hence the name “empty string”:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co"># empty string</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">empty_str &lt;-<span class="st"> &quot;&quot;</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3">empty_str</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co">#&gt; [1] &quot;&quot;</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co"># class</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="kw">class</span>(empty_str)</a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt; [1] &quot;character&quot;</span></a></code></pre></div>
</section>
<section id="empty-character-vector" class="level3">
<h3><span class="header-section-number">2.3.2</span> Empty character vector</h3>
<p>Another basic string structure is the <strong>empty character vector</strong> produced by the function <code>character()</code> and its argument <code>length=0</code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># empty character vector</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">empty_chr &lt;-<span class="st"> </span><span class="kw">character</span>(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3">empty_chr</a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#&gt; character(0)</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co"># class</span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="kw">class</span>(empty_chr)</a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="co">#&gt; [1] &quot;character&quot;</span></a></code></pre></div>
<p>It is important not to confuse the empty character vector <code>character(0)</code> with the empty string <code>&quot;&quot;</code>; one of the main differences between them is that they have different lengths:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="co"># length of empty string</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw">length</span>(empty_str)</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co"># length of empty character vector</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="kw">length</span>(empty_chr)</a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="co">#&gt; [1] 0</span></a></code></pre></div>
<p>Notice that the empty string <code>empty_str</code> has length 1, while the empty character vector <code>empty_chr</code> has length 0.</p>
<p>Also, <code>character(0)</code> occurs when you have a character vector with one or more elements, and you attempt to subset the position 0:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">string &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;sun&#39;</span>, <span class="st">&#39;sky&#39;</span>, <span class="st">&#39;clouds&#39;</span>)</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">string</a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="co">#&gt; [1] &quot;sun&quot;    &quot;sky&quot;    &quot;clouds&quot;</span></a></code></pre></div>
<p>If you try to retrieve the element in position 0 you get:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">string[<span class="dv">0</span>]</a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="co">#&gt; character(0)</span></a></code></pre></div>
</section>
<section id="function-c" class="level3">
<h3><span class="header-section-number">2.3.3</span> Function <code>c()</code></h3>
<p>There is also the generic function <code>c()</code> (concatenate or combine) that you can use to create character vectors. Simply pass any number of character elements separated by commas:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">string &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;sun&#39;</span>, <span class="st">&#39;sky&#39;</span>, <span class="st">&#39;clouds&#39;</span>)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">string</a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="co">#&gt; [1] &quot;sun&quot;    &quot;sky&quot;    &quot;clouds&quot;</span></a></code></pre></div>
<p>Again, notice that you can use single or double quotes to define the character elements inside <code>c()</code></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">planets &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;mercury&quot;</span>, <span class="st">&#39;venus&#39;</span>, <span class="st">&quot;mars&quot;</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">planets</a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="co">#&gt; [1] &quot;mercury&quot; &quot;venus&quot;   &quot;mars&quot;</span></a></code></pre></div>
</section>
<section id="is.character-and-as.character" class="level3">
<h3><span class="header-section-number">2.3.4</span> <code>is.character()</code> and <code>as.character()</code></h3>
<p>Related to <code>character()</code> R provides two related functions: <code>as.character()</code> and <code>is.character()</code>. These two functions are methods for coercing objects to type <code>&quot;character&quot;</code>, and testing whether an R object is of type <code>&quot;character&quot;</code>. For instance, let’s define two objects <code>a</code> and <code>b</code> as follows:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="co"># define two objects &#39;a&#39; and &#39;b&#39;</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2">a &lt;-<span class="st"> &quot;test me&quot;</span></a>
<a class="sourceLine" id="cb23-3" data-line-number="3">b &lt;-<span class="st"> </span><span class="dv">8</span> <span class="op">+</span><span class="st"> </span><span class="dv">9</span></a></code></pre></div>
<p>To test if <code>a</code> and <code>b</code> are of type <code>&quot;character&quot;</code> use the function <code>is.character()</code>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co"># are &#39;a&#39; and &#39;b&#39; characters?</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="kw">is.character</span>(a)</a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb24-4" data-line-number="4"></a>
<a class="sourceLine" id="cb24-5" data-line-number="5"><span class="kw">is.character</span>(b)</a>
<a class="sourceLine" id="cb24-6" data-line-number="6"><span class="co">#&gt; [1] FALSE</span></a></code></pre></div>
<p>Likewise, you can also use the function <code>class()</code> to get the class of an object:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="co"># classes of &#39;a&#39; and &#39;b&#39;</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="kw">class</span>(a)</a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="co">#&gt; [1] &quot;character&quot;</span></a>
<a class="sourceLine" id="cb25-4" data-line-number="4"><span class="kw">class</span>(b)</a>
<a class="sourceLine" id="cb25-5" data-line-number="5"><span class="co">#&gt; [1] &quot;numeric&quot;</span></a></code></pre></div>
<p>The function <code>as.character()</code> is a coercing method. For better or worse, R allows you to convert (i.e. coerce) non-character objects into character strings with the function <code>as.character()</code>:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="co"># converting &#39;b&#39; as character</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2">b &lt;-<span class="st"> </span><span class="kw">as.character</span>(b)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">b</a>
<a class="sourceLine" id="cb26-4" data-line-number="4"><span class="co">#&gt; [1] &quot;17&quot;</span></a></code></pre></div>
</section>
</section>
<section id="behavior-of-r-objects-with-character-strings" class="level2">
<h2><span class="header-section-number">2.4</span> Behavior of R objects with character strings</h2>
<p>The main, and most basic, type of objects in R are vectors. Vectors must have their values <em>all of the same mode</em>. This means that any given vector must be unambiguously either logical, numeric, complex, character or raw. In R we say that vectors are <strong>atomic</strong> structures, with their elements having all the same type or mode.</p>
<p>So what happens when you mix different types of data in a vector?</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># vector with numbers and characters</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, pi, <span class="st">&quot;text&quot;</span>)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"><span class="co">#&gt; [1] &quot;1&quot;                &quot;2&quot;                &quot;3&quot;               </span></a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="co">#&gt; [4] &quot;4&quot;                &quot;5&quot;                &quot;3.14159265358979&quot;</span></a>
<a class="sourceLine" id="cb27-5" data-line-number="5"><span class="co">#&gt; [7] &quot;text&quot;</span></a></code></pre></div>
<p>As you can tell, the resulting vector from combining integers <code>1:5</code>, the number <code>pi</code>, and some <code>&quot;text&quot;</code> is a vector with all its elements treated as character strings. In other words, when you combine mixed data in vectors, strings will dominate. This means that the mode of the vector will be <code>&quot;character&quot;</code>, even if you mix logical values:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="co"># vector with numbers, logicals, and characters</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">TRUE</span>, pi, <span class="st">&quot;text&quot;</span>, <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb28-3" data-line-number="3"><span class="co">#&gt; [1] &quot;1&quot;                &quot;2&quot;                &quot;3&quot;               </span></a>
<a class="sourceLine" id="cb28-4" data-line-number="4"><span class="co">#&gt; [4] &quot;4&quot;                &quot;5&quot;                &quot;TRUE&quot;            </span></a>
<a class="sourceLine" id="cb28-5" data-line-number="5"><span class="co">#&gt; [7] &quot;3.14159265358979&quot; &quot;text&quot;             &quot;FALSE&quot;</span></a></code></pre></div>
<p>In fact, R follows two basic rules of data types coercion. The most strict rule is: if a character string is present in a vector, everything else in the vector will be converted to character strings. The other coercing rule is: if a vector only has logicals and numbers, then logicals will be converted to numbers; <code>TRUE</code> values become 1, and <code>FALSE</code> values become 0.</p>
<p>Keeping these rules in mind will save you from many headaches and frustrating moments. Moreover, you can use them in your favor to manipulate data in very useful ways.</p>
<p><strong>Matrices.</strong> The same behavior of vectors happens when you mix characters and numbers in matrices. Again, everything will be treated as characters:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="co"># matrix with numbers and characters</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="kw">rbind</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, letters[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</a>
<a class="sourceLine" id="cb29-3" data-line-number="3"><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></a>
<a class="sourceLine" id="cb29-4" data-line-number="4"><span class="co">#&gt; [1,] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot; </span></a>
<a class="sourceLine" id="cb29-5" data-line-number="5"><span class="co">#&gt; [2,] &quot;a&quot;  &quot;b&quot;  &quot;c&quot;  &quot;d&quot;  &quot;e&quot;</span></a></code></pre></div>
<p><strong>Data frames.</strong> With data frames, things are a bit different. By default, character strings inside a data frame will be converted to factors:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="co"># data frame with numbers and characters</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2">df1 =<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">numbers=</span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">letters=</span>letters[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</a>
<a class="sourceLine" id="cb30-3" data-line-number="3">df1</a>
<a class="sourceLine" id="cb30-4" data-line-number="4"><span class="co">#&gt;   numbers letters</span></a>
<a class="sourceLine" id="cb30-5" data-line-number="5"><span class="co">#&gt; 1       1       a</span></a>
<a class="sourceLine" id="cb30-6" data-line-number="6"><span class="co">#&gt; 2       2       b</span></a>
<a class="sourceLine" id="cb30-7" data-line-number="7"><span class="co">#&gt; 3       3       c</span></a>
<a class="sourceLine" id="cb30-8" data-line-number="8"><span class="co">#&gt; 4       4       d</span></a>
<a class="sourceLine" id="cb30-9" data-line-number="9"><span class="co">#&gt; 5       5       e</span></a>
<a class="sourceLine" id="cb30-10" data-line-number="10"><span class="co"># examine the data frame structure</span></a>
<a class="sourceLine" id="cb30-11" data-line-number="11"><span class="kw">str</span>(df1)</a>
<a class="sourceLine" id="cb30-12" data-line-number="12"><span class="co">#&gt; &#39;data.frame&#39;:    5 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb30-13" data-line-number="13"><span class="co">#&gt;  $ numbers: int  1 2 3 4 5</span></a>
<a class="sourceLine" id="cb30-14" data-line-number="14"><span class="co">#&gt;  $ letters: Factor w/ 5 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,..: 1 2 3 4 5</span></a></code></pre></div>
<p>To turn-off the <code>data.frame()</code>’s default behavior of converting strings into factors, use the argument <code>stringsAsFactors = FALSE</code>:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="co"># data frame with numbers and characters</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2">df2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb31-3" data-line-number="3">  <span class="dt">numbers =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, </a>
<a class="sourceLine" id="cb31-4" data-line-number="4">  <span class="dt">letters =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>], </a>
<a class="sourceLine" id="cb31-5" data-line-number="5">  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb31-6" data-line-number="6"></a>
<a class="sourceLine" id="cb31-7" data-line-number="7">df2</a>
<a class="sourceLine" id="cb31-8" data-line-number="8"><span class="co">#&gt;   numbers letters</span></a>
<a class="sourceLine" id="cb31-9" data-line-number="9"><span class="co">#&gt; 1       1       a</span></a>
<a class="sourceLine" id="cb31-10" data-line-number="10"><span class="co">#&gt; 2       2       b</span></a>
<a class="sourceLine" id="cb31-11" data-line-number="11"><span class="co">#&gt; 3       3       c</span></a>
<a class="sourceLine" id="cb31-12" data-line-number="12"><span class="co">#&gt; 4       4       d</span></a>
<a class="sourceLine" id="cb31-13" data-line-number="13"><span class="co">#&gt; 5       5       e</span></a>
<a class="sourceLine" id="cb31-14" data-line-number="14"><span class="co"># examine the data frame structure</span></a>
<a class="sourceLine" id="cb31-15" data-line-number="15"><span class="kw">str</span>(df2)</a>
<a class="sourceLine" id="cb31-16" data-line-number="16"><span class="co">#&gt; &#39;data.frame&#39;:    5 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb31-17" data-line-number="17"><span class="co">#&gt;  $ numbers: int  1 2 3 4 5</span></a>
<a class="sourceLine" id="cb31-18" data-line-number="18"><span class="co">#&gt;  $ letters: chr  &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; ...</span></a></code></pre></div>
<p>Even though <code>df1</code> and <code>df2</code> are identically displayed, their structure is different. While <code>df1$letters</code> is stored as a <code>&quot;factor&quot;</code>, <code>df2$letters</code> is stored as a <code>&quot;character&quot;</code>.</p>
<p><strong>Lists.</strong> With lists, you can combine any type of data objects. The type of data in each element of the list will maintain its corresponding mode:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="co"># list with elements of different mode</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, letters[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>], <span class="kw">rnorm</span>(<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb32-3" data-line-number="3"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb32-4" data-line-number="4"><span class="co">#&gt; [1] 1 2 3 4 5</span></a>
<a class="sourceLine" id="cb32-5" data-line-number="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb32-6" data-line-number="6"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb32-7" data-line-number="7"><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</span></a>
<a class="sourceLine" id="cb32-8" data-line-number="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb32-9" data-line-number="9"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb32-10" data-line-number="10"><span class="co">#&gt; [1]  1.7751855  0.8788769 -1.2946255  0.6587283  0.5373204</span></a></code></pre></div>
</section>
<section id="the-workhorse-function-paste" class="level2">
<h2><span class="header-section-number">2.5</span> The workhorse function <code>paste()</code></h2>
<p>The function <code>paste()</code> is perhaps one of the most important functions that you can use to create and build strings. <code>paste()</code> takes one or more R objects, converts them to <code>&quot;character&quot;</code>, and then it concatenates (pastes) them to form one or several character strings. Its usage has the following form:</p>
<pre><code>paste(..., sep = &quot; &quot;, collapse = NULL)</code></pre>
<p>The argument <code>...</code> means that it takes any number of objects. The argument <code>sep</code> is a character string that is used as a separator. The argument <code>collapse</code> is an optional string to indicate if you want all the terms to be collapsed into a single string. Here is a simple example with <code>paste()</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="co"># paste</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2">PI &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;The life of&quot;</span>, pi)</a>
<a class="sourceLine" id="cb34-3" data-line-number="3"></a>
<a class="sourceLine" id="cb34-4" data-line-number="4">PI</a>
<a class="sourceLine" id="cb34-5" data-line-number="5"><span class="co">#&gt; [1] &quot;The life of 3.14159265358979&quot;</span></a></code></pre></div>
<p>As you can see, the default separator is a blank space (<code>sep = &quot; &quot;</code>). But you can select another character, for example <code>sep = &quot;-&quot;</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="co"># paste</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2">IloveR &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;I&quot;</span>, <span class="st">&quot;love&quot;</span>, <span class="st">&quot;R&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;-&quot;</span>)</a>
<a class="sourceLine" id="cb35-3" data-line-number="3"></a>
<a class="sourceLine" id="cb35-4" data-line-number="4">IloveR</a>
<a class="sourceLine" id="cb35-5" data-line-number="5"><span class="co">#&gt; [1] &quot;I-love-R&quot;</span></a></code></pre></div>
<p>If you give <code>paste()</code> objects of different length, then it will apply a recycling rule. For example, if you paste a single character <code>&quot;X&quot;</code> with the sequence <code>1:5</code>, and separator <code>sep = &quot;.&quot;</code>, this is what you get:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1"><span class="co"># paste with objects of different lengths</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2"><span class="kw">paste</span>(<span class="st">&quot;X&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">sep =</span> <span class="st">&quot;.&quot;</span>)</a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="co">#&gt; [1] &quot;X.1&quot; &quot;X.2&quot; &quot;X.3&quot; &quot;X.4&quot; &quot;X.5&quot;</span></a></code></pre></div>
<p>To see the effect of the <code>collapse</code> argument, let’s compare the difference with collapsing and without it:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="co"># paste with collapsing</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="kw">paste</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="kw">c</span>(<span class="st">&quot;!&quot;</span>,<span class="st">&quot;?&quot;</span>,<span class="st">&quot;+&quot;</span>), <span class="dt">sep =</span> <span class="st">&#39;&#39;</span>, <span class="dt">collapse =</span> <span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="co">#&gt; [1] &quot;1!2?3+&quot;</span></a>
<a class="sourceLine" id="cb37-4" data-line-number="4"></a>
<a class="sourceLine" id="cb37-5" data-line-number="5"><span class="co"># paste without collapsing</span></a>
<a class="sourceLine" id="cb37-6" data-line-number="6"><span class="kw">paste</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="kw">c</span>(<span class="st">&quot;!&quot;</span>,<span class="st">&quot;?&quot;</span>,<span class="st">&quot;+&quot;</span>), <span class="dt">sep =</span> <span class="st">&#39;&#39;</span>)</a>
<a class="sourceLine" id="cb37-7" data-line-number="7"><span class="co">#&gt; [1] &quot;1!&quot; &quot;2?&quot; &quot;3+&quot;</span></a></code></pre></div>
<p>One of the potential problems with <code>paste()</code> is that it coerces missing values <code>NA</code> into the character <code>&quot;NA&quot;</code>:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="co"># with missing values NA</span></a>
<a class="sourceLine" id="cb38-2" data-line-number="2">evalue &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;the value of &#39;e&#39; is&quot;</span>, <span class="kw">exp</span>(<span class="dv">1</span>), <span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb38-3" data-line-number="3"></a>
<a class="sourceLine" id="cb38-4" data-line-number="4">evalue</a>
<a class="sourceLine" id="cb38-5" data-line-number="5"><span class="co">#&gt; [1] &quot;the value of &#39;e&#39; is 2.71828182845905 NA&quot;</span></a></code></pre></div>
<p>In addition to <code>paste()</code>, there’s also the function <code>paste0()</code> which is the equivalent of</p>
<pre><code>paste(..., sep = &quot;&quot;, collapse)</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="co"># collapsing with paste0</span></a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="kw">paste0</span>(<span class="st">&quot;let&#39;s&quot;</span>, <span class="st">&quot;collapse&quot;</span>, <span class="st">&quot;all&quot;</span>, <span class="st">&quot;these&quot;</span>, <span class="st">&quot;words&quot;</span>)</a>
<a class="sourceLine" id="cb40-3" data-line-number="3"><span class="co">#&gt; [1] &quot;let&#39;scollapseallthesewords&quot;</span></a></code></pre></div>
</section>
<section id="exercises" class="level2">
<h2><span class="header-section-number">2.6</span> Exercises</h2>
<ol type="1">
<li><p>What is the difference between the empty character <code>&quot;&quot;</code> and the output of invoking <code>character()</code>?</p></li>
<li><p>When you combine logical values, numeric values, and character values in one single vector, what will be the mode of the resulting vector?</p></li>
<li><p>Using <code>rep()</code>, how would you obtain the following character vectors:</p></li>
</ol>
<pre><code>#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;a&quot; &quot;b&quot; &quot;a&quot; &quot;b&quot; &quot;a&quot; &quot;b&quot;
#&gt; [1] &quot;a&quot; &quot;a&quot; &quot;a&quot; &quot;a&quot; &quot;b&quot; &quot;b&quot; &quot;b&quot; &quot;b&quot;
#&gt; [1] &quot;a&quot; &quot;a&quot; &quot;b&quot; &quot;b&quot; &quot;a&quot; &quot;a&quot; &quot;b&quot; &quot;b&quot;</code></pre>
<ol start="4" type="1">
<li>Given the following vectors <code>go</code>, <code>bears</code>, and <code>bang</code>:</li>
</ol>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1">go &lt;-<span class="st"> &#39;Go&#39;</span></a>
<a class="sourceLine" id="cb42-2" data-line-number="2">bears &lt;-<span class="st"> &#39;Bears&#39;</span></a>
<a class="sourceLine" id="cb42-3" data-line-number="3">bang &lt;-<span class="st"> &#39;!&#39;</span></a></code></pre></div>
<p>how would you use <code>paste()</code> and <code>paste0()</code> to get the following strings:</p>
<pre><code>&quot;Go Bears !&quot;
&quot;GoBears!&quot;
&quot;Go Bears!&quot;
&quot;Go-Bears!&quot;
&quot;Go Bears!!!&quot;
&quot;Go Bears! Go Bears! Go Bears!&quot;</code></pre>

</section>
</section>
<section id="part-formatting" class="level1 unnumbered">
<h1>(PART) Formatting</h1>
</section>
<section id="formatting" class="level1">
<h1><span class="header-section-number">3</span> Formatting Text and Numbers</h1>
<section id="introduction-1" class="level2">
<h2><span class="header-section-number">3.1</span> Introduction</h2>
<p>A common task when working with character strings involves printing and displaying them on the screen or on a file. In this chapter you will learn about the different functions and options in R to print strings in a wide variety of common—and not so common—formats.</p>
</section>
<section id="printing-and-formatting" class="level2">
<h2><span class="header-section-number">3.2</span> Printing and formatting</h2>
<p>R provides a series of functions for printing strings. Some of the printing functions are useful when creating <code>print</code> methods for programmed objects’ classes. Other functions are useful for printing output either in the R console or to a given file. In this chapter we will describe the following print-related functions:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Function</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>print()</code></td>
<td style="text-align: left;">generic printing</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>noquote()</code></td>
<td style="text-align: left;">print with no quotes</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>cat()</code></td>
<td style="text-align: left;">concatenation</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>format()</code></td>
<td style="text-align: left;">special formats</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>toString()</code></td>
<td style="text-align: left;">convert to string</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>sprintf()</code></td>
<td style="text-align: left;">C-style printing</td>
</tr>
</tbody>
</table>
</section>
<section id="generic-printing" class="level2">
<h2><span class="header-section-number">3.3</span> Generic printing</h2>
<p>The <em>workhorse</em> printing function in R is <code>print()</code>. As its names indicates, this function prints its argument on the R console:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="co"># text string</span></a>
<a class="sourceLine" id="cb44-2" data-line-number="2">my_string &lt;-<span class="st"> &quot;programming with data is fun&quot;</span></a>
<a class="sourceLine" id="cb44-3" data-line-number="3"></a>
<a class="sourceLine" id="cb44-4" data-line-number="4"><span class="kw">print</span>(my_string)</a>
<a class="sourceLine" id="cb44-5" data-line-number="5"><span class="co">#&gt; [1] &quot;programming with data is fun&quot;</span></a></code></pre></div>
<p>To be more precise, <code>print()</code> is a generic function, which means that you should use this function when creating printing methods for programmed classes.</p>
<p>As you can see from the previous example, <code>print()</code> displays text in quoted form by default. If you want to print character strings with no quotes you can set the argument <code>quote = FALSE</code></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="co"># print without quotes</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="kw">print</span>(my_string, <span class="dt">quote =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb45-3" data-line-number="3"><span class="co">#&gt; [1] programming with data is fun</span></a></code></pre></div>
<section id="when-to-use-print" class="level3">
<h3><span class="header-section-number">3.3.1</span> When to use <code>print()</code>?</h3>
<p>When you type the name of an obbject in the R console, R calls the corresponding <code>print</code> method associated to the class of the object. If the object is a <code>&quot;data.frame&quot;</code>, then R will dispatch the method <code>print.data.frame</code> and display the output on screen accordingly.</p>
<p>Most of the times you don’t really need to invoke <code>print()</code>. Usually, simply typing the name of the object will suffice. So when do you actually call <code>print()</code>? You use <code>print()</code> when your code is inside an <strong>R expression</strong> (i.e. code inside curly braces <code>{ }</code>) and you want to see the results of one or more computational steps. Typical examples that require an explicit call to <code>print()</code> is when you are interested in looking at some value within a loop, or a conditional structure.</p>
<p>Consider the following dummy <code>for</code> loop. It iterates five times, each time adding 1 to the value of the iterator <code>i</code>:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</a>
<a class="sourceLine" id="cb46-2" data-line-number="2">  i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb46-3" data-line-number="3">}</a></code></pre></div>
<p>The above code works and R executes the additions, but nothing is displayed on the console. This is because the command <code>i + 1</code> forms part of an R expression, that is, it is within the braces <code>{ }</code>. To be able to see the actual computations you should call <code>print()</code> like so:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</a>
<a class="sourceLine" id="cb47-2" data-line-number="2">  <span class="kw">print</span>(i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb47-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb47-4" data-line-number="4"><span class="co">#&gt; [1] 2</span></a>
<a class="sourceLine" id="cb47-5" data-line-number="5"><span class="co">#&gt; [1] 3</span></a>
<a class="sourceLine" id="cb47-6" data-line-number="6"><span class="co">#&gt; [1] 4</span></a>
<a class="sourceLine" id="cb47-7" data-line-number="7"><span class="co">#&gt; [1] 5</span></a>
<a class="sourceLine" id="cb47-8" data-line-number="8"><span class="co">#&gt; [1] 6</span></a></code></pre></div>
</section>
</section>
<section id="concatenate-and-print-with-cat" class="level2">
<h2><span class="header-section-number">3.4</span> Concatenate and print with <code>cat()</code></h2>
<p>Another very useful function is <code>cat()</code> which allows you to concatenate objects and print them either on screen or to a file. Its usage has the following structure:</p>
<pre><code>cat(..., file = &quot;&quot;, sep = &quot; &quot;, fill = FALSE, labels = NULL, append = FALSE)</code></pre>
<p>The argument <code>...</code> implies that <code>cat()</code> accepts several types of R objects (typically vectors). However, when we pass numeric and/or complex vectors, they are automatically converted to character strings by <code>cat()</code>. By default, the strings are concatenated with a space character as separator. This can be modified with the <code>sep</code> argument.</p>
<p>If you use <code>cat()</code> with only one single string, you get a similar (although not identical) result as <code>noquote()</code>:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="co"># simply print with &#39;cat()&#39;</span></a>
<a class="sourceLine" id="cb49-2" data-line-number="2"><span class="kw">cat</span>(my_string)</a>
<a class="sourceLine" id="cb49-3" data-line-number="3"><span class="co">#&gt; programming with data is fun</span></a></code></pre></div>
<p>As you can see, <code>cat()</code> prints its arguments without quotes. In essence, <code>cat()</code> simply displays its content (on screen or in a file). Compared to <code>noquote()</code>, <code>cat()</code> does not print the numeric line indicator (<code>[1]</code> in this case).</p>
<p>The usefulness of <code>cat()</code> is when we have two or more strings that we want to concatenate:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="co"># concatenate and print</span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2"><span class="kw">cat</span>(my_string, <span class="st">&quot;with R&quot;</span>)</a>
<a class="sourceLine" id="cb50-3" data-line-number="3"><span class="co">#&gt; programming with data is fun with R</span></a></code></pre></div>
<p>You can use the argument <code>sep</code> to indicate a chacracter vector that will be included to separate the concatenated elements:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="co"># especifying &#39;sep&#39;</span></a>
<a class="sourceLine" id="cb51-2" data-line-number="2"><span class="kw">cat</span>(my_string, <span class="st">&quot;with R&quot;</span>, <span class="dt">sep=</span><span class="st">&quot; =) &quot;</span>)</a>
<a class="sourceLine" id="cb51-3" data-line-number="3"><span class="co">#&gt; programming with data is fun =) with R</span></a>
<a class="sourceLine" id="cb51-4" data-line-number="4"></a>
<a class="sourceLine" id="cb51-5" data-line-number="5"><span class="co"># another example</span></a>
<a class="sourceLine" id="cb51-6" data-line-number="6"><span class="kw">cat</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">sep =</span> <span class="st">&quot;-&quot;</span>)</a>
<a class="sourceLine" id="cb51-7" data-line-number="7"><span class="co">#&gt; 1-2-3-4-5-6-7-8-9-10</span></a></code></pre></div>
<p>When we pass vectors to <code>cat()</code>, each of the elements are treated as though they were separate arguments:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="co"># first four months</span></a>
<a class="sourceLine" id="cb52-2" data-line-number="2"><span class="kw">cat</span>(month.name[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>], <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>)</a>
<a class="sourceLine" id="cb52-3" data-line-number="3"><span class="co">#&gt; January February March April</span></a>
<a class="sourceLine" id="cb52-4" data-line-number="4"></a>
<a class="sourceLine" id="cb52-5" data-line-number="5"><span class="co"># first four months</span></a>
<a class="sourceLine" id="cb52-6" data-line-number="6"><span class="kw">cat</span>(month.name[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>], <span class="dt">sep =</span> <span class="st">&quot;-&quot;</span>)</a>
<a class="sourceLine" id="cb52-7" data-line-number="7"><span class="co">#&gt; January-February-March-April</span></a>
<a class="sourceLine" id="cb52-8" data-line-number="8"></a>
<a class="sourceLine" id="cb52-9" data-line-number="9"><span class="co"># first four months</span></a>
<a class="sourceLine" id="cb52-10" data-line-number="10"><span class="kw">cat</span>(month.name[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>], <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb52-11" data-line-number="11"><span class="co">#&gt; JanuaryFebruaryMarchApril</span></a></code></pre></div>
<p>The argument <code>fill</code> allows us to break long strings; this is achieved when we specify the string width with an integer number:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="co"># fill = 30</span></a>
<a class="sourceLine" id="cb53-2" data-line-number="2"><span class="kw">cat</span>(<span class="st">&quot;Loooooooooong strings&quot;</span>, <span class="st">&quot;can be displayed&quot;</span>, <span class="st">&quot;in a nice format&quot;</span>, </a>
<a class="sourceLine" id="cb53-3" data-line-number="3">    <span class="st">&quot;by using the &#39;fill&#39; argument&quot;</span>, <span class="dt">fill =</span> <span class="dv">30</span>)</a>
<a class="sourceLine" id="cb53-4" data-line-number="4"><span class="co">#&gt; Loooooooooong strings </span></a>
<a class="sourceLine" id="cb53-5" data-line-number="5"><span class="co">#&gt; can be displayed </span></a>
<a class="sourceLine" id="cb53-6" data-line-number="6"><span class="co">#&gt; in a nice format </span></a>
<a class="sourceLine" id="cb53-7" data-line-number="7"><span class="co">#&gt; by using the &#39;fill&#39; argument</span></a></code></pre></div>
<p>Last but not least, we can specify a file output in <code>cat()</code>. For instance, let’s suppose that we want to save the output in the file <code>output.txt</code> located in our working directory. This is done by specifying the <code>file</code> argument:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="co"># cat with output in a given file</span></a>
<a class="sourceLine" id="cb54-2" data-line-number="2"><span class="kw">cat</span>(my_string, <span class="st">&quot;with R&quot;</span>, <span class="dt">file =</span> <span class="st">&quot;output.txt&quot;</span>)</a></code></pre></div>
</section>
<section id="encoding-strings-with-format" class="level2">
<h2><span class="header-section-number">3.5</span> Encoding strings with <code>format()</code></h2>
<p>The function <code>format()</code> allows you to format an R object for <em>pretty</em> printing. Essentially, <code>format()</code> treats the elements of a vector as character strings using a common format. This is especially useful when printing numbers and quantities under different formats.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="co"># default usage</span></a>
<a class="sourceLine" id="cb55-2" data-line-number="2"><span class="kw">format</span>(<span class="fl">13.7</span>)</a>
<a class="sourceLine" id="cb55-3" data-line-number="3"><span class="co">#&gt; [1] &quot;13.7&quot;</span></a>
<a class="sourceLine" id="cb55-4" data-line-number="4"></a>
<a class="sourceLine" id="cb55-5" data-line-number="5"><span class="co"># another example</span></a>
<a class="sourceLine" id="cb55-6" data-line-number="6"><span class="kw">format</span>(<span class="fl">13.12345678</span>)</a>
<a class="sourceLine" id="cb55-7" data-line-number="7"><span class="co">#&gt; [1] &quot;13.12346&quot;</span></a></code></pre></div>
<p>Some useful arguments used in <code>format()</code>:</p>
<ul>
<li><code>width</code> the (minimum) width of strings produced</li>
<li><code>trim</code> if set to <code>TRUE</code> there is no padding with spaces</li>
<li><code>justify</code> controls how padding takes place for strings. Takes the values <code>&quot;left&quot;, &quot;right&quot;, &quot;centre&quot;, &quot;none&quot;</code></li>
</ul>
<p>For controling the printing of numbers, use these arguments:</p>
<ul>
<li><code>digits</code> The number of digits to the right of the decimal place.</li>
<li><code>scientific</code> use <code>TRUE</code> for scientific notation, <code>FALSE</code> for standard notation</li>
</ul>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="co"># use of &#39;nsmall&#39;</span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2"><span class="kw">format</span>(<span class="fl">13.7</span>, <span class="dt">nsmall =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb56-3" data-line-number="3"><span class="co">#&gt; [1] &quot;13.700&quot;</span></a>
<a class="sourceLine" id="cb56-4" data-line-number="4"></a>
<a class="sourceLine" id="cb56-5" data-line-number="5"><span class="co"># use of &#39;digits&#39;</span></a>
<a class="sourceLine" id="cb56-6" data-line-number="6"><span class="kw">format</span>(<span class="kw">c</span>(<span class="fl">6.0</span>, <span class="fl">13.1</span>), <span class="dt">digits =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb56-7" data-line-number="7"><span class="co">#&gt; [1] &quot; 6&quot; &quot;13&quot;</span></a>
<a class="sourceLine" id="cb56-8" data-line-number="8"></a>
<a class="sourceLine" id="cb56-9" data-line-number="9"><span class="co"># use of &#39;digits&#39; and &#39;nsmall&#39;</span></a>
<a class="sourceLine" id="cb56-10" data-line-number="10"><span class="kw">format</span>(<span class="kw">c</span>(<span class="fl">6.0</span>, <span class="fl">13.1</span>), <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">nsmall =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb56-11" data-line-number="11"><span class="co">#&gt; [1] &quot; 6.0&quot; &quot;13.1&quot;</span></a></code></pre></div>
<p>By default, <code>format()</code> pads the strings with spaces so that they all have the same length.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1"><span class="co"># justify options</span></a>
<a class="sourceLine" id="cb57-2" data-line-number="2"><span class="kw">format</span>(<span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;BB&quot;</span>, <span class="st">&quot;CCC&quot;</span>), <span class="dt">width =</span> <span class="dv">5</span>, <span class="dt">justify =</span> <span class="st">&quot;centre&quot;</span>)</a>
<a class="sourceLine" id="cb57-3" data-line-number="3"><span class="co">#&gt; [1] &quot;  A  &quot; &quot; BB  &quot; &quot; CCC &quot;</span></a>
<a class="sourceLine" id="cb57-4" data-line-number="4"></a>
<a class="sourceLine" id="cb57-5" data-line-number="5"><span class="kw">format</span>(<span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;BB&quot;</span>, <span class="st">&quot;CCC&quot;</span>), <span class="dt">width =</span> <span class="dv">5</span>, <span class="dt">justify =</span> <span class="st">&quot;left&quot;</span>)</a>
<a class="sourceLine" id="cb57-6" data-line-number="6"><span class="co">#&gt; [1] &quot;A    &quot; &quot;BB   &quot; &quot;CCC  &quot;</span></a>
<a class="sourceLine" id="cb57-7" data-line-number="7"></a>
<a class="sourceLine" id="cb57-8" data-line-number="8"><span class="kw">format</span>(<span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;BB&quot;</span>, <span class="st">&quot;CCC&quot;</span>), <span class="dt">width =</span> <span class="dv">5</span>, <span class="dt">justify =</span> <span class="st">&quot;right&quot;</span>)</a>
<a class="sourceLine" id="cb57-9" data-line-number="9"><span class="co">#&gt; [1] &quot;    A&quot; &quot;   BB&quot; &quot;  CCC&quot;</span></a>
<a class="sourceLine" id="cb57-10" data-line-number="10"></a>
<a class="sourceLine" id="cb57-11" data-line-number="11"><span class="kw">format</span>(<span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;BB&quot;</span>, <span class="st">&quot;CCC&quot;</span>), <span class="dt">width =</span> <span class="dv">5</span>, <span class="dt">justify =</span> <span class="st">&quot;none&quot;</span>)</a>
<a class="sourceLine" id="cb57-12" data-line-number="12"><span class="co">#&gt; [1] &quot;A&quot;   &quot;BB&quot;  &quot;CCC&quot;</span></a>
<a class="sourceLine" id="cb57-13" data-line-number="13"></a>
<a class="sourceLine" id="cb57-14" data-line-number="14"><span class="co"># digits</span></a>
<a class="sourceLine" id="cb57-15" data-line-number="15"><span class="kw">format</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">digits =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb57-16" data-line-number="16"><span class="co">#&gt; [1] &quot;1.00&quot; &quot;0.50&quot; &quot;0.33&quot; &quot;0.25&quot; &quot;0.20&quot;</span></a>
<a class="sourceLine" id="cb57-17" data-line-number="17"></a>
<a class="sourceLine" id="cb57-18" data-line-number="18"><span class="co"># use of &#39;digits&#39;, widths and justify</span></a>
<a class="sourceLine" id="cb57-19" data-line-number="19"><span class="kw">format</span>(<span class="kw">format</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">digits =</span> <span class="dv">2</span>), <span class="dt">width =</span> <span class="dv">6</span>, <span class="dt">justify =</span> <span class="st">&quot;c&quot;</span>)</a>
<a class="sourceLine" id="cb57-20" data-line-number="20"><span class="co">#&gt; [1] &quot; 1.00 &quot; &quot; 0.50 &quot; &quot; 0.33 &quot; &quot; 0.25 &quot; &quot; 0.20 &quot;</span></a></code></pre></div>
<p>For printing large quantities with a sequenced format we can use the arguments <code>big.mark</code> or <code>big.interval</code>. For instance, here is how we can print a number with sequences separated by a comma <code>&quot;,&quot;</code></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="co"># big.mark</span></a>
<a class="sourceLine" id="cb58-2" data-line-number="2"><span class="kw">format</span>(<span class="dv">123456789</span>, <span class="dt">big.mark =</span> <span class="st">&quot;,&quot;</span>)</a>
<a class="sourceLine" id="cb58-3" data-line-number="3"><span class="co">#&gt; [1] &quot;123,456,789&quot;</span></a></code></pre></div>
</section>
<section id="exercises-1" class="level2">
<h2><span class="header-section-number">3.6</span> Exercises</h2>
<ol type="1">
<li><p>Why do we say that <code>print()</code> is not really one function but a <em>family</em> of functions?</p></li>
<li><p>Mention three differences between <code>print()</code> and <code>cat()</code>.</p></li>
<li><p>What happens when you pass a matrix to <code>cat()</code>? For instance:</p></li>
</ol>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1">m &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb59-2" data-line-number="2"><span class="kw">cat</span>(m)</a></code></pre></div>
<ol start="4" type="1">
<li>What happens when you pass a data frame object to <code>cat()</code>? For instance:</li>
</ol>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">dfr &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">2</span>, <span class="dt">c =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb60-2" data-line-number="2"><span class="kw">cat</span>(dfr)</a></code></pre></div>

</section>
</section>
<section id="c-style-formatting" class="level1">
<h1><span class="header-section-number">4</span> C-style Formatting</h1>
<p>R comes with the <code>sprintf()</code> function that provides string formatting like in the <strong>C</strong> language. To be more precise, this function is a wrapper for the C library function of the same name. In many other programming languages, this type of printing is known as <em>printf</em> which stands for <strong>print formatting</strong>. Simply put, <code>sprintf()</code> allows you to create strings as output using formatted data.</p>
<p>The function <code>sprintf()</code> requires using a special syntax that may look awkward the first time you use it. Here is one example:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="kw">sprintf</span>(<span class="st">&quot;I woke up at %s:%s%s a.m.&quot;</span>, <span class="dv">8</span>, <span class="dv">0</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb61-2" data-line-number="2"><span class="co">#&gt; [1] &quot;I woke up at 8:05 a.m.&quot;</span></a></code></pre></div>
<p>How does <code>sprintf()</code> work? The first argument of this function is a character vector of one element that contains the text to be formatted. Observe that inside the text there are various percent symbols <code>%</code> followed by the letter <code>s</code>. Each <code>%</code> is referred to as a <strong>slot</strong>, which is basically a placeholder for a variable that will be formatted. The rest of the inputs passed to <code>sprintf()</code> are the values that will be used in each of the slots.</p>
<p>The string in the previous example contains three slots of the same type, <code>%s</code>, and the subsequent arguments are numbers <code>8</code>, <code>0</code>, and <code>5</code>. Each number is used as a value for each slot. The letter <code>s</code> indicates that the formatted variable is specified as a <em>string</em>.</p>
<p>Most of the times you won’t use <code>sprintf()</code> like in the example above. Instead, what you will pass are variables containing different values:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1">hour &lt;-<span class="st"> </span><span class="dv">8</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2">mins1 &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb62-3" data-line-number="3">mins2 &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb62-4" data-line-number="4"><span class="kw">sprintf</span>(<span class="st">&quot;I woke up at %s:%s%s a.m.&quot;</span>, hour, mins1, mins2)</a>
<a class="sourceLine" id="cb62-5" data-line-number="5"><span class="co">#&gt; [1] &quot;I woke up at 8:05 a.m.&quot;</span></a></code></pre></div>
<section id="c-style-formatting-options" class="level2">
<h2><span class="header-section-number">4.1</span> C-style formatting options</h2>
<p>The string format <code>%s</code> is just one of a larger list of available formatting options. The following table shows the most common formatting specifications:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Notation</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>%s</code></td>
<td style="text-align: left;">a string</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>%d</code></td>
<td style="text-align: left;">an integer</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>%0xd</code></td>
<td style="text-align: left;">an integer padded with <code>x</code> leading zeros</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>%f</code></td>
<td style="text-align: left;">decimal notation with six decimals</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>%.xf</code></td>
<td style="text-align: left;">floating point number with <code>x</code> digits after decimal point</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>%e</code></td>
<td style="text-align: left;">compact scientific notation, <code>e</code> in the exponent</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>%E</code></td>
<td style="text-align: left;">compact scientific notation, <code>E</code> in the exponent</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>%g</code></td>
<td style="text-align: left;">compact decimal or scientific notation (with <code>e</code>)</td>
</tr>
</tbody>
</table>
<p>Here’s some text</p>
<section id="format-slot-syntax" class="level3">
<h3><span class="header-section-number">4.1.1</span> Format Slot Syntax</h3>
<p>The full syntax for a format slot is defined by:</p>
<pre><code>%[parameter][flags][width][.precision][length]type</code></pre>
<p>The percent symbol, <code>%</code>, as we said, indicates a placeholder or slot.</p>
<p>The <code>parameter</code> field is an optional field that can take the value <code>n$</code> in which <code>n</code> is the number of the variable to display, allowing the variables provided to be used multiple times, using varying format specifiers or in different orders.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="kw">sprintf</span>(<span class="st">&quot;The second number is %2$d, the first number is %1$d&quot;</span>, <span class="dv">2</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb64-2" data-line-number="2"><span class="co">#&gt; [1] &quot;The second number is 1, the first number is 2&quot;</span></a></code></pre></div>
<p>The <code>flags</code> field can be zero or more (in any order) of:</p>
<ul>
<li><code>-</code> (minus) Left-align the output of this placeholder.</li>
<li><code>+</code> (plus) Prepends a plus for positive signed-numeric types.</li>
<li><code>' '</code> (space) Prepends a space for positive signed-numeric types.</li>
<li><code>0</code> (zero) When the ‘width’ option is specified, prepends zeros for numeric types.</li>
<li><code>#</code> (hash) Alternate form:
<ul>
<li>for <code>g</code> and <code>G</code> types, trailing zeros are not removed.</li>
<li>for <code>f, F, e, E, g, G</code> types, the output always contain a decimal point.</li>
<li>for <code>o, x, X</code> types, the text <code>0</code>, <code>0x</code>, <code>0X</code>, respectively, is prepended to non-zero numbers.</li>
</ul></li>
</ul>
<p>The <code>width</code> field is an optional field that you use to specify a minimum number of characters to output, and is typically used to pad fixed-width fields in tabulated output, where the fields would otherwise be smaller, although it does not cause truncation of oversized fields.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1"><span class="kw">sprintf</span>(<span class="st">&quot;%*d&quot;</span>, <span class="dv">5</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="co">#&gt; [1] &quot;   10&quot;</span></a></code></pre></div>
<p>The <code>precision</code> field usually specifies a maximum limit on the output, depending on the particular formatting type.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="kw">sprintf</span>(<span class="st">&quot;%.*s&quot;</span>, <span class="dv">3</span>, <span class="st">&quot;abcdef&quot;</span>)</a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="co">#&gt; [1] &quot;abc&quot;</span></a></code></pre></div>
<p>The <code>length</code> field is also optional, and can be any of:</p>
<p>The most important field is the <code>type</code> field.</p>
<ul>
<li><code>%</code>: Prints a literal <code>%</code> character (this type doesn’t accept any flags, width, precision, length fields).</li>
<li><code>d, i</code>: integer value as signed decimal number.</li>
<li><code>f</code>: double value in normal fixed-point notation.</li>
<li><code>e, E</code>: double value in standard form.</li>
<li><code>g, G</code>: double value in either normal or exponential notation.</li>
<li><code>x, X</code>: unsigned integer as a hexadecimal number. <code>x</code> uses lower case, while <code>X</code> uses upper case.</li>
<li><code>o</code>: unsigned integer in octal notation.</li>
<li><code>s</code>: null terminated string.</li>
<li><code>a, A</code>: double value in hexadecimal notation</li>
</ul>
</section>
<section id="example-basic-sprintf" class="level3">
<h3><span class="header-section-number">4.1.2</span> Example: basic <code>sprintf()</code></h3>
<p>Let’s begin with a minimal example to explore the different formatting options of <code>sprintf()</code>. Consider a real fraction like <code>1/6</code>; in R the default output of this fraction will be:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1"><span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="dv">6</span></a>
<a class="sourceLine" id="cb67-2" data-line-number="2"><span class="co">#&gt; [1] 0.1666667</span></a></code></pre></div>
<p>Notice that <code>1/6</code> is printed with seven decimal digits. The number <code>1/6</code> is actually an irrational number and so the computer needs to round it to some number of decimal digits. You can modify the default printing format in several ways. One option is to display only six decimal digits with the <code>%f</code> option:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="co"># print 6 decimals</span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2"><span class="kw">sprintf</span>(<span class="st">&#39;%f&#39;</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">6</span>)</a>
<a class="sourceLine" id="cb68-3" data-line-number="3"><span class="co">#&gt; [1] &quot;0.166667&quot;</span></a></code></pre></div>
<p>But you can also specify a different number of decimal digits, say 3. This can be achieved specifying an option of <code>%.3f</code>:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1"><span class="co"># print 3 decimals</span></a>
<a class="sourceLine" id="cb69-2" data-line-number="2"><span class="kw">sprintf</span>(<span class="st">&#39;%.3f&#39;</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">6</span>)</a>
<a class="sourceLine" id="cb69-3" data-line-number="3"><span class="co">#&gt; [1] &quot;0.167&quot;</span></a></code></pre></div>
<p>The table below shows six different outputs for <code>1/6</code></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Notation</th>
<th style="text-align: left;">Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>%s</code></td>
<td style="text-align: left;">0.166666666666667</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>%f</code></td>
<td style="text-align: left;">0.166667</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>%.3f</code></td>
<td style="text-align: left;">0.167</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>%e</code></td>
<td style="text-align: left;">1.666667e-01</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>%E</code></td>
<td style="text-align: left;">1.666667E-01</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>%g</code></td>
<td style="text-align: left;">0.166667</td>
</tr>
</tbody>
</table>
<p>When would you use <code>sprintf()</code>? Everytime you produce output text. Some cases include:</p>
<ol type="1">
<li>exporting output to some file.</li>
<li>printing output on console.</li>
<li>forming new strings.</li>
</ol>
</section>
<section id="example-file-names" class="level3">
<h3><span class="header-section-number">4.1.3</span> Example: File Names</h3>
<p>When working on data analysis projects, it is common to generate different files with similar names (e.g. either for creating images, or data files, or documents). Imagine that you need to generate the names of 3 data files (with .csv extension). All the files have the same prefix name but each of them has a different number: <code>data01.csv</code>, <code>data02.csv</code>, and <code>data03.csv</code>. One naive solution to generate a character vector with these names in R would be to write something like this:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1">file_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;data01.csv&#39;</span>, <span class="st">&#39;data02.csv&#39;</span>, <span class="st">&#39;data03.csv&#39;</span>)</a></code></pre></div>
<p>Instead of writing each file name, you can generate the vector <code>file_names</code> in a more efficient way taking advantage of the vectorized nature of <code>paste0()</code>:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1">file_names &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;data0&#39;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="st">&#39;.csv&#39;</span>)</a>
<a class="sourceLine" id="cb71-2" data-line-number="2"></a>
<a class="sourceLine" id="cb71-3" data-line-number="3">file_names</a>
<a class="sourceLine" id="cb71-4" data-line-number="4"><span class="co">#&gt; [1] &quot;data01.csv&quot; &quot;data02.csv&quot; &quot;data03.csv&quot;</span></a></code></pre></div>
<p>Now imagine that you need to generate 100 file names numbered from 01, 02, 03, to 100. You could write a vector with 100 file names but it’s going to take you a while. A preferable solution is to use <code>paste0()</code> like in the approach of the previous example. In this case however, you would need to create two separate vectors—one with numbers 01 to 09, and another one with numbers 10 to 100—and then concatenate them in one single vector:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1">files1 &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;data0&#39;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="st">&#39;.csv&#39;</span>)</a>
<a class="sourceLine" id="cb72-2" data-line-number="2">files2 &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;data&#39;</span>, <span class="dv">10</span><span class="op">:</span><span class="dv">100</span>, <span class="st">&#39;.csv&#39;</span>)</a>
<a class="sourceLine" id="cb72-3" data-line-number="3">file_names &lt;-<span class="st"> </span><span class="kw">c</span>(files1, files2)</a></code></pre></div>
<p>Instead of using <code>paste0()</code> to create two vectors, you can use <code>sprintf()</code> with the <code>%0xd</code> option to indicate that an integer should be padded with <code>x</code> leading zeros. For instance, the first nine file names can be generated as:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1"><span class="kw">sprintf</span>(<span class="st">&#39;data%02d.csv&#39;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">9</span>)</a>
<a class="sourceLine" id="cb73-2" data-line-number="2"><span class="co">#&gt; [1] &quot;data01.csv&quot; &quot;data02.csv&quot; &quot;data03.csv&quot; &quot;data04.csv&quot; &quot;data05.csv&quot;</span></a>
<a class="sourceLine" id="cb73-3" data-line-number="3"><span class="co">#&gt; [6] &quot;data06.csv&quot; &quot;data07.csv&quot; &quot;data08.csv&quot; &quot;data09.csv&quot;</span></a></code></pre></div>
<p>To generate the 100 file names do:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1">file_names &lt;-<span class="st"> </span><span class="kw">sprintf</span>(<span class="st">&#39;data%02d.csv&#39;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>)</a></code></pre></div>
<p>The first nine elements in <code>file_names</code> will include a leading zero before the integer; the following elements will not include the leading zero.</p>
</section>
<section id="example-fahrenheit-to-celsius" class="level3">
<h3><span class="header-section-number">4.1.4</span> Example: Fahrenheit to Celsius</h3>
<p>This example involves working on a function to convert Fahrenheit degrees into Celsius degrees. The conversion formula is:</p>
<p><span class="math display">\[
Celsius = (Fahrenheit - 32) \times \frac{5}{9}
\]</span></p>
<p>You can define a simple function <code>to_celsius()</code> that takes one argument, <code>temp</code>, which is a number representing temperature in Fahrenheit degrees. This function will return the temperature in Celsius degrees:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1">to_celsius &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">temp =</span> <span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb75-2" data-line-number="2">  (temp <span class="op">-</span><span class="st"> </span><span class="dv">32</span>) <span class="op">*</span><span class="st"> </span><span class="dv">5</span><span class="op">/</span><span class="dv">9</span></a>
<a class="sourceLine" id="cb75-3" data-line-number="3">}</a></code></pre></div>
<p>You can use <code>to_celsius()</code> as any other function in R. Say you want to know how many Celsius degrees are 95 Fahrenheit degrees:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1"><span class="kw">to_celsius</span>(<span class="dv">95</span>)</a>
<a class="sourceLine" id="cb76-2" data-line-number="2"><span class="co">#&gt; [1] 35</span></a></code></pre></div>
<p>To make things more interesting, let’s create another function that not only computes the temperature conversion but also prints a more informative message, something like: <code>95 Fahrenheit degrees = 35 Celsius degrees</code>.</p>
<p>We’ll name this function <code>fahrenheit2celsius()</code>:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1">fahrenheit2celsius &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">temp =</span> <span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb77-2" data-line-number="2">  celsius &lt;-<span class="st"> </span><span class="kw">to_celsius</span>(temp)</a>
<a class="sourceLine" id="cb77-3" data-line-number="3">  <span class="kw">sprintf</span>(<span class="st">&#39;%.2f Fahrenheit degrees = %.2f Celsius degrees&#39;</span>, temp, celsius)</a>
<a class="sourceLine" id="cb77-4" data-line-number="4">}</a></code></pre></div>
<p>Notice that <code>fahrenheit2celsius()</code> makes use of <code>to_celsius()</code> to compute the Celsius degrees. And then <code>sprintf()</code> is used with the options <code>%.2f</code> to display the temperatures with two decimal digits. Try it out:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1"><span class="kw">fahrenheit2celsius</span>(<span class="dv">95</span>)</a>
<a class="sourceLine" id="cb78-2" data-line-number="2"><span class="co">#&gt; [1] &quot;95.00 Fahrenheit degrees = 35.00 Celsius degrees&quot;</span></a>
<a class="sourceLine" id="cb78-3" data-line-number="3"><span class="kw">fahrenheit2celsius</span>(<span class="dv">50</span>)</a>
<a class="sourceLine" id="cb78-4" data-line-number="4"><span class="co">#&gt; [1] &quot;50.00 Fahrenheit degrees = 10.00 Celsius degrees&quot;</span></a></code></pre></div>
</section>
<section id="example-car-traveled-distance" class="level3">
<h3><span class="header-section-number">4.1.5</span> Example: Car Traveled Distance</h3>
<p>Our third example is a little bit more sophisticated. The idea is to construct an object of class <code>&quot;car&quot;</code> that contains characteristics like the name of the car, its make, its year, and its fuel consumption in <em>city</em>, <em>highway</em> and <em>combined</em>.</p>
<p>Let’s consider a <em>Mazda 3</em> for this example. One possible way to define a <code>&quot;car&quot;</code> object is to use a list with the following elements:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1">mazda3 &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb79-2" data-line-number="2">  <span class="dt">name =</span> <span class="st">&#39;mazda3&#39;</span>, <span class="co"># car name</span></a>
<a class="sourceLine" id="cb79-3" data-line-number="3">  <span class="dt">make =</span> <span class="st">&#39;mazda&#39;</span>,  <span class="co"># car make</span></a>
<a class="sourceLine" id="cb79-4" data-line-number="4">  <span class="dt">year =</span> <span class="dv">2015</span>,     <span class="co"># year model</span></a>
<a class="sourceLine" id="cb79-5" data-line-number="5">  <span class="dt">city =</span> <span class="dv">30</span>,       <span class="co"># fuel consumption in city</span></a>
<a class="sourceLine" id="cb79-6" data-line-number="6">  <span class="dt">highway =</span> <span class="dv">40</span>,    <span class="co"># fuel consumption in highway</span></a>
<a class="sourceLine" id="cb79-7" data-line-number="7">  <span class="dt">combined =</span> <span class="dv">33</span>)   <span class="co"># fuel consumption combined (city-and-hwy)</span></a></code></pre></div>
<p>So far we have an object <code>mazda3</code> that is essentially a list. Because we want to create a <code>print()</code> method for objects of class <code>&quot;car&quot;</code> we need to assign this class to our <code>mazda3</code>:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1"><span class="kw">class</span>(mazda3) &lt;-<span class="st"> &quot;car&quot;</span></a></code></pre></div>
<p>Now that we have our <code>&quot;car&quot;</code> object, we can create a <code>print.car()</code> function. In this way, everytime we type <code>mazda3</code>, instead of getting the typical list output, we will get a customized display:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1">print.car &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb81-2" data-line-number="2">  <span class="kw">cat</span>(<span class="st">&quot;Car</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb81-3" data-line-number="3">  <span class="kw">cat</span>(<span class="kw">sprintf</span>(<span class="st">&#39;name: %s</span><span class="ch">\n</span><span class="st">&#39;</span>, x<span class="op">$</span>name))</a>
<a class="sourceLine" id="cb81-4" data-line-number="4">  <span class="kw">cat</span>(<span class="kw">sprintf</span>(<span class="st">&#39;make: %s</span><span class="ch">\n</span><span class="st">&#39;</span>, x<span class="op">$</span>make))</a>
<a class="sourceLine" id="cb81-5" data-line-number="5">  <span class="kw">cat</span>(<span class="kw">sprintf</span>(<span class="st">&#39;year: %s</span><span class="ch">\n</span><span class="st">&#39;</span>, x<span class="op">$</span>year))</a>
<a class="sourceLine" id="cb81-6" data-line-number="6">  <span class="kw">invisible</span>(x)</a>
<a class="sourceLine" id="cb81-7" data-line-number="7">}</a></code></pre></div>
<p>Next time you type <code>mazda3</code> in your console, R will display these lines:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1">mazda3</a>
<a class="sourceLine" id="cb82-2" data-line-number="2"><span class="co">#&gt; Car</span></a>
<a class="sourceLine" id="cb82-3" data-line-number="3"><span class="co">#&gt; name: mazda3</span></a>
<a class="sourceLine" id="cb82-4" data-line-number="4"><span class="co">#&gt; make: mazda</span></a>
<a class="sourceLine" id="cb82-5" data-line-number="5"><span class="co">#&gt; year: 2015</span></a></code></pre></div>
<p>It would be nice to have a function <code>miles()</code> that allows you to calculate the traveled distance for a given amount of gas (in gallons), taking into account the type of fuel consumption (e.g. city, highway, combined):</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1">miles &lt;-<span class="st"> </span><span class="cf">function</span>(car, <span class="dt">fuel =</span> <span class="dv">1</span>, <span class="dt">mpg =</span> <span class="st">&#39;city&#39;</span>) {</a>
<a class="sourceLine" id="cb83-2" data-line-number="2">  <span class="kw">stopifnot</span>(<span class="kw">class</span>(car) <span class="op">==</span><span class="st"> &#39;car&#39;</span>)</a>
<a class="sourceLine" id="cb83-3" data-line-number="3">  <span class="cf">switch</span>(mpg,</a>
<a class="sourceLine" id="cb83-4" data-line-number="4">         <span class="st">&#39;city&#39;</span> =<span class="st"> </span>car<span class="op">$</span>city <span class="op">*</span><span class="st"> </span>fuel,</a>
<a class="sourceLine" id="cb83-5" data-line-number="5">         <span class="st">&#39;highway&#39;</span> =<span class="st"> </span>car<span class="op">$</span>highway <span class="op">*</span><span class="st"> </span>fuel,</a>
<a class="sourceLine" id="cb83-6" data-line-number="6">         <span class="st">&#39;combined&#39;</span> =<span class="st"> </span>car<span class="op">$</span>combined <span class="op">*</span><span class="st"> </span>fuel,</a>
<a class="sourceLine" id="cb83-7" data-line-number="7">         car<span class="op">$</span>city <span class="op">*</span><span class="st"> </span>fuel)</a>
<a class="sourceLine" id="cb83-8" data-line-number="8">}</a></code></pre></div>
<p>The <code>miles()</code> function takes three parameters: <code>car</code> is an object of class <code>&quot;car&quot;</code>, <code>fuel</code> is the number of gallons, and <code>mpg</code> is the type of fuel consumption (<code>'city',</code>highway’, <code>combined'</code>). The first command checks whether the first parameter is an object of class <code>&quot;car&quot;</code>. If it is not, then the function will stop the execution raising an error. The second command involves using the function <code>switch()</code> to compute the traveled miles. It switches to the corresponding consumption depending on the provided value of <code>mpg</code>. Note that the very last switch condition is a <em>safety</em> condition in case the user mispecifies <code>mpg</code>.</p>
<p>Let’s say you want to know how many miles the <code>mazda3</code> could travel with 4 gallons of gas depending on the different types of consumption:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="kw">miles</span>(mazda3, <span class="dt">fuel =</span> <span class="dv">4</span>, <span class="st">&#39;city&#39;</span>)</a>
<a class="sourceLine" id="cb84-2" data-line-number="2"><span class="co">#&gt; [1] 120</span></a>
<a class="sourceLine" id="cb84-3" data-line-number="3"><span class="kw">miles</span>(mazda3, <span class="dt">fuel =</span> <span class="dv">4</span>, <span class="st">&#39;highway&#39;</span>)</a>
<a class="sourceLine" id="cb84-4" data-line-number="4"><span class="co">#&gt; [1] 160</span></a>
<a class="sourceLine" id="cb84-5" data-line-number="5"><span class="kw">miles</span>(mazda3, <span class="dt">fuel =</span> <span class="dv">4</span>, <span class="st">&#39;combined&#39;</span>)</a>
<a class="sourceLine" id="cb84-6" data-line-number="6"><span class="co">#&gt; [1] 132</span></a></code></pre></div>
<p>Again, to make things more user friendly, we are going to create a function <code>get_distance()</code> that prints a more informative message about the traveled distance:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" data-line-number="1">get_distance &lt;-<span class="st"> </span><span class="cf">function</span>(car, <span class="dt">fuel =</span> <span class="dv">1</span>, <span class="dt">mpg =</span> <span class="st">&#39;city&#39;</span>) {</a>
<a class="sourceLine" id="cb85-2" data-line-number="2">  distance &lt;-<span class="st"> </span><span class="kw">miles</span>(car, <span class="dt">fuel =</span> fuel, <span class="dt">mpg =</span> mpg) </a>
<a class="sourceLine" id="cb85-3" data-line-number="3">  <span class="kw">cat</span>(<span class="kw">sprintf</span>(<span class="st">&#39;A %s can travel %s miles</span><span class="ch">\n</span><span class="st">&#39;</span>,</a>
<a class="sourceLine" id="cb85-4" data-line-number="4">              car<span class="op">$</span>name, distance))</a>
<a class="sourceLine" id="cb85-5" data-line-number="5">  <span class="kw">cat</span>(<span class="kw">sprintf</span>(<span class="st">&#39;with %s gallons of gas</span><span class="ch">\n</span><span class="st">&#39;</span>, fuel))</a>
<a class="sourceLine" id="cb85-6" data-line-number="6">  <span class="kw">cat</span>(<span class="kw">sprintf</span>(<span class="st">&#39;using %s consumption&#39;</span>, mpg))</a>
<a class="sourceLine" id="cb85-7" data-line-number="7">}</a></code></pre></div>
<p>And this is how the output when calling <code>get_distance</code> looks like:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" data-line-number="1"><span class="kw">get_distance</span>(mazda3, <span class="dv">4</span>, <span class="st">&#39;city&#39;</span>)</a>
<a class="sourceLine" id="cb86-2" data-line-number="2"><span class="co">#&gt; A mazda3 can travel 120 miles</span></a>
<a class="sourceLine" id="cb86-3" data-line-number="3"><span class="co">#&gt; with 4 gallons of gas</span></a>
<a class="sourceLine" id="cb86-4" data-line-number="4"><span class="co">#&gt; using city consumption</span></a></code></pre></div>
</section>
<section id="example-coffee-prices" class="level3">
<h3><span class="header-section-number">4.1.6</span> Example: Coffee Prices</h3>
<p>Consider some coffee drinks and their prices. We’ll put this information in a vector like this:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" data-line-number="1">prices &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb87-2" data-line-number="2">  <span class="st">&#39;americano&#39;</span> =<span class="st"> </span><span class="dv">2</span>, </a>
<a class="sourceLine" id="cb87-3" data-line-number="3">  <span class="st">&#39;latte&#39;</span> =<span class="st"> </span><span class="fl">2.75</span>, </a>
<a class="sourceLine" id="cb87-4" data-line-number="4">  <span class="st">&#39;mocha&#39;</span> =<span class="st"> </span><span class="fl">3.45</span>, </a>
<a class="sourceLine" id="cb87-5" data-line-number="5">  <span class="st">&#39;capuccino&#39;</span> =<span class="st"> </span><span class="fl">3.25</span>)</a></code></pre></div>
<p>What type of vector is <code>prices</code>? Is it a character vector? Is it numeric vector? Or is it some sort of vector with mix-data? We have seen that vectors are <em>atomic</em> structures, meaning that all their elements must be of the same class. So <code>prices</code> is definitely not a vector with mix-data. From the code chunk we can observe that each element of the vector is formed by a string, followed by the <code>=</code> sign, followed by some number. This way of defining a vector is not very common in R but it is perfectly valid. Each string represents the name of an element, while the numbers are the actual elements. Therefore <code>prices</code> is in reality a numeric vector. You can confirm this by looking at the mode (or data type):</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1"><span class="kw">mode</span>(prices)</a>
<a class="sourceLine" id="cb88-2" data-line-number="2"><span class="co">#&gt; [1] &quot;numeric&quot;</span></a></code></pre></div>
<p>Let’s say you want to list the names of the coffees and their prices. If you just simply try to <code>print()</code> the prices, the output will be the entire vector <code>prices</code>:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" data-line-number="1"><span class="kw">print</span>(prices)</a>
<a class="sourceLine" id="cb89-2" data-line-number="2"><span class="co">#&gt; americano     latte     mocha capuccino </span></a>
<a class="sourceLine" id="cb89-3" data-line-number="3"><span class="co">#&gt;      2.00      2.75      3.45      3.25</span></a></code></pre></div>
<p>Alternatively, you can use a for loop to <code>print()</code> each individual element of the vector <code>prices</code>, but again the output is displayed in an awkward fashion:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" data-line-number="1"><span class="cf">for</span> (p <span class="cf">in</span> <span class="kw">seq_along</span>(prices)) {</a>
<a class="sourceLine" id="cb90-2" data-line-number="2">  <span class="kw">print</span>(prices[p])</a>
<a class="sourceLine" id="cb90-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb90-4" data-line-number="4"><span class="co">#&gt; americano </span></a>
<a class="sourceLine" id="cb90-5" data-line-number="5"><span class="co">#&gt;         2 </span></a>
<a class="sourceLine" id="cb90-6" data-line-number="6"><span class="co">#&gt; latte </span></a>
<a class="sourceLine" id="cb90-7" data-line-number="7"><span class="co">#&gt;  2.75 </span></a>
<a class="sourceLine" id="cb90-8" data-line-number="8"><span class="co">#&gt; mocha </span></a>
<a class="sourceLine" id="cb90-9" data-line-number="9"><span class="co">#&gt;  3.45 </span></a>
<a class="sourceLine" id="cb90-10" data-line-number="10"><span class="co">#&gt; capuccino </span></a>
<a class="sourceLine" id="cb90-11" data-line-number="11"><span class="co">#&gt;      3.25</span></a></code></pre></div>
<p>To list the names of the coffees and their prices, it would be nicer to use a combination of <code>paste0()</code> and <code>print()</code>. In addition, you can be more descriptive adding some auxiliary text such that the output prints something like: <em>“americano has a price of $2”</em>.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" data-line-number="1"><span class="cf">for</span> (p <span class="cf">in</span> <span class="kw">seq_along</span>(prices)) {</a>
<a class="sourceLine" id="cb91-2" data-line-number="2">  <span class="kw">print</span>(<span class="kw">paste0</span>(<span class="kw">names</span>(prices)[p], <span class="st">&#39; has price of $&#39;</span>, prices[p]))</a>
<a class="sourceLine" id="cb91-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb91-4" data-line-number="4"><span class="co">#&gt; [1] &quot;americano has price of $2&quot;</span></a>
<a class="sourceLine" id="cb91-5" data-line-number="5"><span class="co">#&gt; [1] &quot;latte has price of $2.75&quot;</span></a>
<a class="sourceLine" id="cb91-6" data-line-number="6"><span class="co">#&gt; [1] &quot;mocha has price of $3.45&quot;</span></a>
<a class="sourceLine" id="cb91-7" data-line-number="7"><span class="co">#&gt; [1] &quot;capuccino has price of $3.25&quot;</span></a></code></pre></div>
<p>Another possible solution consists of combining <code>print()</code> and <code>sprintf()</code>:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1"><span class="cf">for</span> (p <span class="cf">in</span> <span class="kw">seq_along</span>(prices)) {</a>
<a class="sourceLine" id="cb92-2" data-line-number="2">  <span class="kw">print</span>(<span class="kw">sprintf</span>(<span class="st">&#39;%s has price of $%s&#39;</span>, <span class="kw">names</span>(prices)[p], prices[p]))</a>
<a class="sourceLine" id="cb92-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb92-4" data-line-number="4"><span class="co">#&gt; [1] &quot;americano has price of $2&quot;</span></a>
<a class="sourceLine" id="cb92-5" data-line-number="5"><span class="co">#&gt; [1] &quot;latte has price of $2.75&quot;</span></a>
<a class="sourceLine" id="cb92-6" data-line-number="6"><span class="co">#&gt; [1] &quot;mocha has price of $3.45&quot;</span></a>
<a class="sourceLine" id="cb92-7" data-line-number="7"><span class="co">#&gt; [1] &quot;capuccino has price of $3.25&quot;</span></a></code></pre></div>
<p>One limitation of <code>quote()</code> is that it won’t work inside a for loop:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" data-line-number="1"><span class="cf">for</span> (p <span class="cf">in</span> <span class="kw">seq_along</span>(prices)) {</a>
<a class="sourceLine" id="cb93-2" data-line-number="2">  <span class="kw">noquote</span>(<span class="kw">sprintf</span>(<span class="st">&#39;%s has price of $%s&#39;</span>, <span class="kw">names</span>(prices)[p], prices[p]))</a>
<a class="sourceLine" id="cb93-3" data-line-number="3">}</a></code></pre></div>
<p>If what you want is to print the output wihtout quotes, then you need to use <code>cat()</code>; just make sure to add a newline character <code>&quot;\n&quot;</code>:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" data-line-number="1"><span class="cf">for</span> (p <span class="cf">in</span> <span class="kw">seq_along</span>(prices)) {</a>
<a class="sourceLine" id="cb94-2" data-line-number="2">  <span class="kw">cat</span>(<span class="kw">sprintf</span>(<span class="st">&#39;%s has price of $%s</span><span class="ch">\n</span><span class="st">&#39;</span>, <span class="kw">names</span>(prices)[p], prices[p]))</a>
<a class="sourceLine" id="cb94-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb94-4" data-line-number="4"><span class="co">#&gt; americano has price of $2</span></a>
<a class="sourceLine" id="cb94-5" data-line-number="5"><span class="co">#&gt; latte has price of $2.75</span></a>
<a class="sourceLine" id="cb94-6" data-line-number="6"><span class="co">#&gt; mocha has price of $3.45</span></a>
<a class="sourceLine" id="cb94-7" data-line-number="7"><span class="co">#&gt; capuccino has price of $3.25</span></a></code></pre></div>

</section>
</section>
</section>
<section id="input-and-output" class="level1">
<h1><span class="header-section-number">5</span> Input and Output</h1>
<section id="output" class="level2">
<h2><span class="header-section-number">5.1</span> Output</h2>
<p>Some times you need to export results to a file. Typically this happens when you want to export a data table to a text file. R provides the functions <code>write.table()</code> and <code>write.csv()</code> for these purposes. These functions let you send a matrix or a data frame to a text file that will have a tabular format (i.e. rows and columns).</p>
<section id="concatenating-output" class="level3">
<h3><span class="header-section-number">5.1.1</span> Concatenating output</h3>
<p>You can use <code>cat()</code> to concatenate and print information to a file.</p>
<p>To show you how to use <code>cat()</code> let’s illustrate a simple example using the data frame <code>mtcars</code> that comes in R.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" data-line-number="1"><span class="co"># summary statistics of unemp</span></a>
<a class="sourceLine" id="cb95-2" data-line-number="2"><span class="kw">min</span>(mtcars<span class="op">$</span>mpg)</a>
<a class="sourceLine" id="cb95-3" data-line-number="3"><span class="kw">max</span>(mtcars<span class="op">$</span>mpg)</a>
<a class="sourceLine" id="cb95-4" data-line-number="4"><span class="kw">median</span>(mtcars<span class="op">$</span>mpg)</a>
<a class="sourceLine" id="cb95-5" data-line-number="5"><span class="kw">mean</span>(mtcars<span class="op">$</span>mpg)</a>
<a class="sourceLine" id="cb95-6" data-line-number="6"><span class="kw">sd</span>(mtcars<span class="op">$</span>mpg)</a></code></pre></div>
<p>The goal is to generate a file <code>mpg-statistics.txt</code> with the following contents:</p>
<pre><code>Miles per Gallon Statistics

Minimum: 10.40
Maximum: 33.90
Median : 19.20
Mean   : 20.09 
Std Dev: 6.02</code></pre>
<p>Here is one way to do it. First, let’s assign the statistics to different objects:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" data-line-number="1"><span class="co"># summary statistics of mpg</span></a>
<a class="sourceLine" id="cb97-2" data-line-number="2">mpg_min &lt;-<span class="st"> </span><span class="kw">min</span>(mtcars<span class="op">$</span>mpg)</a>
<a class="sourceLine" id="cb97-3" data-line-number="3">mpg_max &lt;-<span class="st"> </span><span class="kw">max</span>(mtcars<span class="op">$</span>mpg)</a>
<a class="sourceLine" id="cb97-4" data-line-number="4">mpg_med &lt;-<span class="st"> </span><span class="kw">median</span>(mtcars<span class="op">$</span>mpg)</a>
<a class="sourceLine" id="cb97-5" data-line-number="5">mpg_avg &lt;-<span class="st"> </span><span class="kw">mean</span>(mtcars<span class="op">$</span>mpg)</a>
<a class="sourceLine" id="cb97-6" data-line-number="6">mpg_sd &lt;-<span class="st"> </span><span class="kw">sd</span>(mtcars<span class="op">$</span>mpg)</a></code></pre></div>
<p>After creating the objects containing the summary statistics, the next step is to export them to the text file <code>mpg-statistics.txt</code> via <code>cat()</code>. Assuming that the output file is in your working directory, here’s how you can send the set of strings to the text file:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" data-line-number="1"><span class="co"># name of output file</span></a>
<a class="sourceLine" id="cb98-2" data-line-number="2">outfile &lt;-<span class="st"> &quot;mpg-statistics.txt&quot;</span></a>
<a class="sourceLine" id="cb98-3" data-line-number="3"></a>
<a class="sourceLine" id="cb98-4" data-line-number="4"><span class="co"># first line of the file</span></a>
<a class="sourceLine" id="cb98-5" data-line-number="5"><span class="kw">cat</span>(<span class="st">&quot;Miles per Gallon Statistics</span><span class="ch">\n\n</span><span class="st">&quot;</span>, <span class="dt">file =</span> outfile)</a>
<a class="sourceLine" id="cb98-6" data-line-number="6"></a>
<a class="sourceLine" id="cb98-7" data-line-number="7"><span class="co"># subsequent lines appended to the output file</span></a>
<a class="sourceLine" id="cb98-8" data-line-number="8"><span class="kw">cat</span>(<span class="st">&quot;Minimum:&quot;</span>, mpg_min, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file =</span> outfile, <span class="dt">append =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb98-9" data-line-number="9"><span class="kw">cat</span>(<span class="st">&quot;Maximum:&quot;</span>, mpg_max, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file =</span> outfile, <span class="dt">append =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb98-10" data-line-number="10"><span class="kw">cat</span>(<span class="st">&quot;Median :&quot;</span>, mpg_med, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file =</span> outfile, <span class="dt">append =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb98-11" data-line-number="11"><span class="kw">cat</span>(<span class="st">&quot;Mean   :&quot;</span>, mpg_avg, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file =</span> outfile, <span class="dt">append =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb98-12" data-line-number="12"><span class="kw">cat</span>(<span class="st">&quot;Std Dev:&quot;</span>, mpg_sd, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file =</span> outfile, <span class="dt">append =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>The first line exported to <code>mpg-statistics.txt</code> is a string with the title <code>&quot;Miles per Gallon Statistics\n\n&quot;</code>. Observe that we are using two new line characters <code>&quot;\n\n&quot;</code> to add some space between the title and the statistics. The rest of calls to <code>cat()</code> use the argument <code>append = TRUE</code> to concatenate the specified strings to the end of the text file without overriding the existing lines.</p>
<p>If you run the code of this example and look at the contents of <code>mpg-statistics.txt</code>, you will see the following output:</p>
<pre><code>Miles per Gallon Statistics

Minimum: 10.4 
Maximum: 33.9 
Median : 19.2 
Mean   : 20.09062 
Std Dev: 6.026948 </code></pre>
<p>As you can tell, the displayed values have a different number of decimal digits. If you just want to keep two decimal digits, you can use <code>sprintf()</code> and choose the format <code>&quot;%0.2f&quot;</code>. Let’s re-export the lines:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" data-line-number="1"><span class="kw">cat</span>(<span class="st">&quot;Miles per Gallon Statistics</span><span class="ch">\n\n</span><span class="st">&quot;</span>, <span class="dt">file =</span> outfile)</a>
<a class="sourceLine" id="cb100-2" data-line-number="2"><span class="kw">cat</span>(<span class="kw">sprintf</span>(<span class="st">&#39;Minimum: %0.2f&#39;</span>, mpg_min), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file =</span> outfile, <span class="dt">append =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb100-3" data-line-number="3"><span class="kw">cat</span>(<span class="kw">sprintf</span>(<span class="st">&#39;Maximum: %0.2f&#39;</span>, mpg_max), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file =</span> outfile, <span class="dt">append =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb100-4" data-line-number="4"><span class="kw">cat</span>(<span class="kw">sprintf</span>(<span class="st">&#39;Median : %0.2f&#39;</span>, mpg_med), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file =</span> outfile, <span class="dt">append =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb100-5" data-line-number="5"><span class="kw">cat</span>(<span class="kw">sprintf</span>(<span class="st">&#39;Mean   : %0.2f&#39;</span>, mpg_avg), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file =</span> outfile, <span class="dt">append =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb100-6" data-line-number="6"><span class="kw">cat</span>(<span class="kw">sprintf</span>(<span class="st">&#39;Std Dev: %0.2f&#39;</span>, mpg_sd), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">file =</span> outfile, <span class="dt">append =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>Now the content of <code>mpg-statistics.txt</code> should look like this:</p>
<pre><code>Miles per Gallon Statistics

Minimum: 10.40 
Maximum: 33.90 
Median : 19.20 
Mean   : 20.09 
Std Dev: 6.03 </code></pre>
<p>Here is an exercise for you: How would you avoid writing that many calls to <code>cat()</code>?</p>
</section>
<section id="sinking-output" class="level3">
<h3><span class="header-section-number">5.1.2</span> Sinking output</h3>
<p>Another interesting function is <code>sink()</code>. This function is very useful when you want to export R output as is displayed in the R console. For example, consider the output from <code>summary()</code></p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" data-line-number="1"><span class="kw">summary</span>(mtcars)</a></code></pre></div>
<p>You could assign the output of <code>summary(mtcars)</code> to an object and then try <code>writeLines()</code> to export the results to a file <code>mtcars-summary.txt</code>, but you won’t keep the same format of R:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" data-line-number="1">mtcars_summary &lt;-<span class="st"> </span><span class="kw">summary</span>(mtcars)</a>
<a class="sourceLine" id="cb103-2" data-line-number="2"><span class="kw">writeLines</span>(mtcars_summary, <span class="dt">con =</span> <span class="st">&quot;mtcars-summary.txt&quot;</span>)</a></code></pre></div>
<p>To be able to keep the same output display of R, you must use <code>sink()</code>. This function will <strong>divert</strong> R output to the specified file:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" data-line-number="1"><span class="kw">sink</span>(<span class="dt">file =</span> <span class="st">&quot;mtcars-statistics.txt&quot;</span>)</a>
<a class="sourceLine" id="cb104-2" data-line-number="2"><span class="kw">summary</span>(australia)</a>
<a class="sourceLine" id="cb104-3" data-line-number="3"><span class="kw">sink</span>()</a></code></pre></div>
<p><strong>Your turn:</strong> Use <code>sink()</code> to send the output from running a linear regression of <code>mpg</code> on <code>disp</code> with the function <code>lm()</code>. Also export the results from using <code>summary()</code> on the regression object. And/or try running a t-test between <code>mpg</code> and <code>disp</code> with <code>t.test()</code>.</p>
</section>
</section>
<section id="exporting-tables" class="level2">
<h2><span class="header-section-number">5.2</span> Exporting tables</h2>
<p>Another interesting tool to export tables in LaTeX or HTML formats is provided by the R package <code>&quot;xtable&quot;</code> and its main function <code>xtable()</code>.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" data-line-number="1"><span class="kw">library</span>(xtable)</a>
<a class="sourceLine" id="cb105-2" data-line-number="2"></a>
<a class="sourceLine" id="cb105-3" data-line-number="3"><span class="co"># linear regression</span></a>
<a class="sourceLine" id="cb105-4" data-line-number="4">reg &lt;-<span class="st"> </span><span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>disp, <span class="dt">data =</span> mtcars)</a>
<a class="sourceLine" id="cb105-5" data-line-number="5"></a>
<a class="sourceLine" id="cb105-6" data-line-number="6"><span class="co"># create xtable and export it</span></a>
<a class="sourceLine" id="cb105-7" data-line-number="7">reg_table &lt;-<span class="st"> </span><span class="kw">xtable</span>(reg)</a></code></pre></div>
<p>The object <code>reg_table</code> is an object of class <code>&quot;xtable&quot;</code>. What you do with this type of objects is <code>print()</code> them to a file.</p>
<p>To print <code>reg_table</code> in latex format to a <code>.tex</code> file:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1"><span class="kw">print</span>(reg_table, <span class="dt">type =</span> <span class="st">&quot;latex&quot;</span>, <span class="dt">file =</span> <span class="st">&quot;reg-table.tex&quot;</span>)</a></code></pre></div>
<p>To print <code>reg_table</code> in html format to an <code>.html</code> file:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1"><span class="kw">print</span>(reg_table, <span class="dt">type =</span> <span class="st">&quot;html&quot;</span>, <span class="dt">file =</span> <span class="st">&quot;reg-table.html&quot;</span>)</a></code></pre></div>

</section>
</section>
<section id="part-manipulations" class="level1 unnumbered">
<h1>(PART) Manipulations</h1>
</section>
<section id="manip" class="level1">
<h1><span class="header-section-number">6</span> Basic String Manipulations</h1>
<section id="introduction-2" class="level2">
<h2><span class="header-section-number">6.1</span> Introduction</h2>
<p>In this chapter you will learn about the different functions to do what I call <em>basic manipulations</em>. By “basic” I mean transforming and processing strings in such way that do not require the use of <a href="#intro">regular expressions</a>. More advanced manipulations involve defining patterns of text and matching such patterns. This is the essential idea behind regular expressions, which is the content of part 5 in this book.</p>
</section>
<section id="basic-manipulations" class="level2">
<h2><span class="header-section-number">6.2</span> Basic Manipulations</h2>
<p>Besides creating and printing strings, there are a number of very handy functions in R for doing some basic manipulation of strings. In this chapter<br />
we will review the following functions:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Function</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>nchar()</code></td>
<td style="text-align: left;">number of characters</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>tolower()</code></td>
<td style="text-align: left;">convert to lower case</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>toupper()</code></td>
<td style="text-align: left;">convert to upper case</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>casefold()</code></td>
<td style="text-align: left;">case folding</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>chartr()</code></td>
<td style="text-align: left;">character translation</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>abbreviate()</code></td>
<td style="text-align: left;">abbreviation</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>substring()</code></td>
<td style="text-align: left;">substrings of a character vector</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>substr()</code></td>
<td style="text-align: left;">substrings of a character vector</td>
</tr>
</tbody>
</table>
</section>
<section id="counting-characters" class="level2">
<h2><span class="header-section-number">6.3</span> Counting characters</h2>
<p>One of the main functions for manipulating character strings is <code>nchar()</code> which counts the number of characters in a string. In other words, <code>nchar()</code> provides the length of a string:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="co"># how many characters?</span></a>
<a class="sourceLine" id="cb108-2" data-line-number="2"><span class="kw">nchar</span>(<span class="kw">c</span>(<span class="st">&quot;How&quot;</span>, <span class="st">&quot;many&quot;</span>, <span class="st">&quot;characters?&quot;</span>))</a>
<a class="sourceLine" id="cb108-3" data-line-number="3"><span class="co">#&gt; [1]  3  4 11</span></a>
<a class="sourceLine" id="cb108-4" data-line-number="4"></a>
<a class="sourceLine" id="cb108-5" data-line-number="5"><span class="co"># how many characters?</span></a>
<a class="sourceLine" id="cb108-6" data-line-number="6"><span class="kw">nchar</span>(<span class="st">&quot;How many characters?&quot;</span>)</a>
<a class="sourceLine" id="cb108-7" data-line-number="7"><span class="co">#&gt; [1] 20</span></a></code></pre></div>
<p>Notice that the white spaces between words in the second example are also counted as characters.</p>
<p>It is important not to confuse <code>nchar()</code> with <code>length()</code>. While the former gives us the <strong>number of characters</strong>, the later only gives the number of elements in a vector.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="co"># how many elements?</span></a>
<a class="sourceLine" id="cb109-2" data-line-number="2"><span class="kw">length</span>(<span class="kw">c</span>(<span class="st">&quot;How&quot;</span>, <span class="st">&quot;many&quot;</span>, <span class="st">&quot;characters?&quot;</span>))</a>
<a class="sourceLine" id="cb109-3" data-line-number="3"><span class="co">#&gt; [1] 3</span></a>
<a class="sourceLine" id="cb109-4" data-line-number="4"></a>
<a class="sourceLine" id="cb109-5" data-line-number="5"><span class="co"># how many elements?</span></a>
<a class="sourceLine" id="cb109-6" data-line-number="6"><span class="kw">length</span>(<span class="st">&quot;How many characters?&quot;</span>)</a>
<a class="sourceLine" id="cb109-7" data-line-number="7"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
</section>
<section id="casefolding" class="level2">
<h2><span class="header-section-number">6.4</span> Casefolding</h2>
<p>R comes with three functions for text casefolding.</p>
<ol type="1">
<li><code>tolower()</code></li>
<li><code>toupper()</code></li>
<li><code>casefold()</code></li>
</ol>
<p>The function <code>tolower()</code> converts any upper case characters into lower case:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="co"># to lower case</span></a>
<a class="sourceLine" id="cb110-2" data-line-number="2"><span class="kw">tolower</span>(<span class="kw">c</span>(<span class="st">&quot;aLL ChaRacterS in LoweR caSe&quot;</span>, <span class="st">&quot;ABCDE&quot;</span>))</a>
<a class="sourceLine" id="cb110-3" data-line-number="3"><span class="co">#&gt; [1] &quot;all characters in lower case&quot; &quot;abcde&quot;</span></a></code></pre></div>
<p>The opposite function of <code>tolower()</code> is <code>toupper</code>. As you may guess, this function converts any lower case characters into upper case:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1"><span class="co"># to upper case</span></a>
<a class="sourceLine" id="cb111-2" data-line-number="2"><span class="kw">toupper</span>(<span class="kw">c</span>(<span class="st">&quot;All ChaRacterS in Upper Case&quot;</span>, <span class="st">&quot;abcde&quot;</span>))</a>
<a class="sourceLine" id="cb111-3" data-line-number="3"><span class="co">#&gt; [1] &quot;ALL CHARACTERS IN UPPER CASE&quot; &quot;ABCDE&quot;</span></a></code></pre></div>
<p>The third function for case-folding is <code>casefold()</code> which is a wrapper for both <code>tolower()</code> and <code>toupper()</code>. Its uasge has the following form:</p>
<pre><code>casefold(x, upper = FALSE)</code></pre>
<p>By default, <code>casefold()</code> converts all characters to lower case, but you can use the argument <code>upper = TRUE</code> to indicate the opposite (characters in upper case):</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1"><span class="co"># lower case folding</span></a>
<a class="sourceLine" id="cb113-2" data-line-number="2"><span class="kw">casefold</span>(<span class="st">&quot;aLL ChaRacterS in LoweR caSe&quot;</span>)</a>
<a class="sourceLine" id="cb113-3" data-line-number="3"><span class="co">#&gt; [1] &quot;all characters in lower case&quot;</span></a>
<a class="sourceLine" id="cb113-4" data-line-number="4"></a>
<a class="sourceLine" id="cb113-5" data-line-number="5"><span class="co"># upper case folding</span></a>
<a class="sourceLine" id="cb113-6" data-line-number="6"><span class="kw">casefold</span>(<span class="st">&quot;All ChaRacterS in Upper Case&quot;</span>, <span class="dt">upper =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb113-7" data-line-number="7"><span class="co">#&gt; [1] &quot;ALL CHARACTERS IN UPPER CASE&quot;</span></a></code></pre></div>
<p>I’ve found the case-folding functions to be very helpful when I write functions that take a character input which may be specified in lower or upper case, or perhaps as a mix of both cases. For instance, consider the function <code>temp_convert()</code> that takes a temperature value in Fahrenheit degress, and a character string indicating the name of the scale to be converted.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1">temp_convert &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">deg =</span> <span class="dv">1</span>, <span class="dt">to =</span> <span class="st">&quot;celsius&quot;</span>) {</a>
<a class="sourceLine" id="cb114-2" data-line-number="2">  <span class="cf">switch</span>(to,</a>
<a class="sourceLine" id="cb114-3" data-line-number="3">         <span class="st">&quot;celsius&quot;</span> =<span class="st"> </span>(deg <span class="op">-</span><span class="st"> </span><span class="dv">32</span>) <span class="op">*</span><span class="st"> </span>(<span class="dv">5</span><span class="op">/</span><span class="dv">9</span>),</a>
<a class="sourceLine" id="cb114-4" data-line-number="4">         <span class="st">&quot;kelvin&quot;</span> =<span class="st"> </span>(deg <span class="op">+</span><span class="st"> </span><span class="fl">459.67</span>) <span class="op">*</span><span class="st"> </span>(<span class="dv">5</span><span class="op">/</span><span class="dv">9</span>),</a>
<a class="sourceLine" id="cb114-5" data-line-number="5">         <span class="st">&quot;reaumur&quot;</span> =<span class="st"> </span>(deg <span class="op">-</span><span class="st"> </span><span class="dv">32</span>) <span class="op">*</span><span class="st"> </span>(<span class="dv">4</span><span class="op">/</span><span class="dv">9</span>),</a>
<a class="sourceLine" id="cb114-6" data-line-number="6">         <span class="st">&quot;rankine&quot;</span> =<span class="st"> </span>deg <span class="op">+</span><span class="st"> </span><span class="fl">459.67</span>)</a>
<a class="sourceLine" id="cb114-7" data-line-number="7">}</a></code></pre></div>
<p>Here is how you call <code>temp_convert()</code> to convert 10 Fahrenheit degrees into celsius degrees:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" data-line-number="1"><span class="kw">temp_convert</span>(<span class="dt">deg =</span> <span class="dv">10</span>, <span class="dt">to =</span> <span class="st">&quot;celsius&quot;</span>)</a>
<a class="sourceLine" id="cb115-2" data-line-number="2"><span class="co">#&gt; [1] -12.22222</span></a></code></pre></div>
<p><code>temp_convert()</code> works fine when the argument <code>to = 'celsius'</code>. But what happens if you try <code>temp_convert(30, 'Celsius')</code> or <code>temp_convert(30, 'CELSIUS')</code>?</p>
<p>To have a more flexible function <code>temp_convert()</code> you can apply <code>tolower()</code> to the argument <code>to</code>, and in this way guarantee that the provided string by the user is always in lower case:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1">temp_convert &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">deg =</span> <span class="dv">1</span>, <span class="dt">to =</span> <span class="st">&quot;celsius&quot;</span>) {</a>
<a class="sourceLine" id="cb116-2" data-line-number="2">  <span class="cf">switch</span>(<span class="kw">tolower</span>(to),</a>
<a class="sourceLine" id="cb116-3" data-line-number="3">         <span class="st">&quot;celsius&quot;</span> =<span class="st"> </span>(deg <span class="op">-</span><span class="st"> </span><span class="dv">32</span>) <span class="op">*</span><span class="st"> </span>(<span class="dv">5</span><span class="op">/</span><span class="dv">9</span>),</a>
<a class="sourceLine" id="cb116-4" data-line-number="4">         <span class="st">&quot;kelvin&quot;</span> =<span class="st"> </span>(deg <span class="op">+</span><span class="st"> </span><span class="fl">459.67</span>) <span class="op">*</span><span class="st"> </span>(<span class="dv">5</span><span class="op">/</span><span class="dv">9</span>),</a>
<a class="sourceLine" id="cb116-5" data-line-number="5">         <span class="st">&quot;reaumur&quot;</span> =<span class="st"> </span>(deg <span class="op">-</span><span class="st"> </span><span class="dv">32</span>) <span class="op">*</span><span class="st"> </span>(<span class="dv">4</span><span class="op">/</span><span class="dv">9</span>),</a>
<a class="sourceLine" id="cb116-6" data-line-number="6">         <span class="st">&quot;rankine&quot;</span> =<span class="st"> </span>deg <span class="op">+</span><span class="st"> </span><span class="fl">459.67</span>)</a>
<a class="sourceLine" id="cb116-7" data-line-number="7">}</a></code></pre></div>
<p>Now all the following three calls are equivalent:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" data-line-number="1"><span class="kw">temp_convert</span>(<span class="dv">30</span>, <span class="st">&#39;celsius&#39;</span>)</a>
<a class="sourceLine" id="cb117-2" data-line-number="2"><span class="kw">temp_convert</span>(<span class="dv">30</span>, <span class="st">&#39;Celsius&#39;</span>)</a>
<a class="sourceLine" id="cb117-3" data-line-number="3"><span class="kw">temp_convert</span>(<span class="dv">30</span>, <span class="st">&#39;CELSIUS&#39;</span>)</a></code></pre></div>
</section>
<section id="translating-characters" class="level2">
<h2><span class="header-section-number">6.5</span> Translating characters</h2>
<p>There’s also the function <code>chartr()</code> which stands for <em>character translation</em>. <code>chartr()</code> takes three arguments: an <code>old</code> string, a <code>new</code> string, and a character vector <code>x</code>:</p>
<pre><code>chartr(old, new, x)</code></pre>
<p>The way <code>chartr()</code> works is by replacing the characters in <code>old</code> that appear in <code>x</code> by those indicated in <code>new</code>. For example, suppose we want to translate the letter <code>&quot;a&quot;</code> (lower case) with <code>&quot;A&quot;</code> (upper case) in the sentence <code>&quot;This is a boring string&quot;</code>:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" data-line-number="1"><span class="co"># replace &#39;a&#39; by &#39;A&#39;</span></a>
<a class="sourceLine" id="cb119-2" data-line-number="2"><span class="kw">chartr</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;This is a boring string&quot;</span>)</a>
<a class="sourceLine" id="cb119-3" data-line-number="3"><span class="co">#&gt; [1] &quot;This is A boring string&quot;</span></a></code></pre></div>
<p>It is important to note that <code>old</code> and <code>new</code> must have the same number of characters, otherwise you will get a nasty error message like this one:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" data-line-number="1"><span class="co"># incorrect use</span></a>
<a class="sourceLine" id="cb120-2" data-line-number="2"><span class="kw">chartr</span>(<span class="st">&quot;ai&quot;</span>, <span class="st">&quot;X&quot;</span>, <span class="st">&quot;This is a bad example&quot;</span>)</a>
<a class="sourceLine" id="cb120-3" data-line-number="3"><span class="co">#&gt; Error in chartr(&quot;ai&quot;, &quot;X&quot;, &quot;This is a bad example&quot;): &#39;old&#39; is longer than &#39;new&#39;</span></a></code></pre></div>
<p>Here’s a more interesting example with <code>old = &quot;aei&quot;</code> and <code>new = &quot;\#!?&quot;</code>. This implies that any <code>'a'</code> in <code>'x'</code> will be replaced by <code>'\#'</code>, any <code>'e'</code> in <code>'x'</code> will be replaced by <code>'?'</code>, and any <code>'i'</code> in <code>'x'</code> will be replaced by <code>'?'</code>:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" data-line-number="1"><span class="co"># multiple replacements</span></a>
<a class="sourceLine" id="cb121-2" data-line-number="2">crazy &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Here&#39;s to the crazy ones&quot;</span>, <span class="st">&quot;The misfits&quot;</span>, <span class="st">&quot;The rebels&quot;</span>)</a>
<a class="sourceLine" id="cb121-3" data-line-number="3"><span class="kw">chartr</span>(<span class="st">&quot;aei&quot;</span>, <span class="st">&quot;#!?&quot;</span>, crazy)</a>
<a class="sourceLine" id="cb121-4" data-line-number="4"><span class="co">#&gt; [1] &quot;H!r!&#39;s to th! cr#zy on!s&quot; &quot;Th! m?sf?ts&quot;             </span></a>
<a class="sourceLine" id="cb121-5" data-line-number="5"><span class="co">#&gt; [3] &quot;Th! r!b!ls&quot;</span></a></code></pre></div>
</section>
<section id="abbreviating-strings" class="level2">
<h2><span class="header-section-number">6.6</span> Abbreviating strings</h2>
<p>Another useful function for basic manipulation of character strings is <code>abbreviate()</code>. Its usage has the following structure:</p>
<pre><code>abbreviate(names.org, minlength = 4, dot = FALSE, strict = FALSE,
            method = c(&quot;left.keep&quot;, &quot;both.sides&quot;))</code></pre>
<p>Although there are several arguments, the main parameter is the character vector (<code>names.org</code>) which will contain the names that we want to abbreviate:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" data-line-number="1"><span class="co"># some color names</span></a>
<a class="sourceLine" id="cb123-2" data-line-number="2">some_colors &lt;-<span class="st"> </span><span class="kw">colors</span>()[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]</a>
<a class="sourceLine" id="cb123-3" data-line-number="3">some_colors</a>
<a class="sourceLine" id="cb123-4" data-line-number="4"><span class="co">#&gt; [1] &quot;white&quot;         &quot;aliceblue&quot;     &quot;antiquewhite&quot;  &quot;antiquewhite1&quot;</span></a>
<a class="sourceLine" id="cb123-5" data-line-number="5"></a>
<a class="sourceLine" id="cb123-6" data-line-number="6"><span class="co"># abbreviate (default usage)</span></a>
<a class="sourceLine" id="cb123-7" data-line-number="7">colors1 &lt;-<span class="st"> </span><span class="kw">abbreviate</span>(some_colors)</a>
<a class="sourceLine" id="cb123-8" data-line-number="8">colors1</a>
<a class="sourceLine" id="cb123-9" data-line-number="9"><span class="co">#&gt;         white     aliceblue  antiquewhite antiquewhite1 </span></a>
<a class="sourceLine" id="cb123-10" data-line-number="10"><span class="co">#&gt;        &quot;whit&quot;        &quot;alcb&quot;        &quot;antq&quot;        &quot;ant1&quot;</span></a>
<a class="sourceLine" id="cb123-11" data-line-number="11"></a>
<a class="sourceLine" id="cb123-12" data-line-number="12"><span class="co"># abbreviate with &#39;minlength&#39;</span></a>
<a class="sourceLine" id="cb123-13" data-line-number="13">colors2 &lt;-<span class="st"> </span><span class="kw">abbreviate</span>(some_colors, <span class="dt">minlength =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb123-14" data-line-number="14">colors2</a>
<a class="sourceLine" id="cb123-15" data-line-number="15"><span class="co">#&gt;         white     aliceblue  antiquewhite antiquewhite1 </span></a>
<a class="sourceLine" id="cb123-16" data-line-number="16"><span class="co">#&gt;       &quot;white&quot;       &quot;alcbl&quot;       &quot;antqw&quot;       &quot;antq1&quot;</span></a>
<a class="sourceLine" id="cb123-17" data-line-number="17"></a>
<a class="sourceLine" id="cb123-18" data-line-number="18"><span class="co"># abbreviate</span></a>
<a class="sourceLine" id="cb123-19" data-line-number="19">colors3 &lt;-<span class="st"> </span><span class="kw">abbreviate</span>(some_colors, <span class="dt">minlength =</span> <span class="dv">3</span>, <span class="dt">method =</span> <span class="st">&quot;both.sides&quot;</span>)</a>
<a class="sourceLine" id="cb123-20" data-line-number="20">colors3</a>
<a class="sourceLine" id="cb123-21" data-line-number="21"><span class="co">#&gt;         white     aliceblue  antiquewhite antiquewhite1 </span></a>
<a class="sourceLine" id="cb123-22" data-line-number="22"><span class="co">#&gt;         &quot;wht&quot;         &quot;alc&quot;         &quot;ant&quot;         &quot;an1&quot;</span></a></code></pre></div>
<p>A common use for <code>abbreviate()</code> is when plotting names of objects or variables in a graphic. I will use the built-in data set <code>mtcars</code> to show you a simple example with a scatterplot between variables <code>mpg</code> and <code>disp</code></p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1"><span class="kw">plot</span>(mtcars<span class="op">$</span>mpg, mtcars<span class="op">$</span>disp, <span class="dt">type =</span> <span class="st">&quot;n&quot;</span>)</a>
<a class="sourceLine" id="cb124-2" data-line-number="2"><span class="kw">text</span>(mtcars<span class="op">$</span>mpg, mtcars<span class="op">$</span>disp, <span class="kw">rownames</span>(mtcars))</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-48-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>The names of the cars are all over the plot. In this situation you may want to consider using <code>abbreviate()</code> to shrink the names of the cars and produce a less “crowded” plot:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" data-line-number="1"><span class="kw">plot</span>(mtcars<span class="op">$</span>mpg, mtcars<span class="op">$</span>disp, <span class="dt">type =</span> <span class="st">&quot;n&quot;</span>)</a>
<a class="sourceLine" id="cb125-2" data-line-number="2"><span class="kw">text</span>(mtcars<span class="op">$</span>mpg, mtcars<span class="op">$</span>disp, <span class="kw">abbreviate</span>(<span class="kw">rownames</span>(mtcars)))</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-49-1.png" width="70%" style="display: block; margin: auto;" /></p>
</section>
<section id="replacing-strings" class="level2">
<h2><span class="header-section-number">6.7</span> Replacing strings</h2>
<p>One common operation when working with strings is the extraction and replacement of some characters. There a various ways in which characters can be replaced. If the replacement is based on the positions that characters occupy in the string, you can use the functions <code>substr()</code> and <code>substring()</code></p>
<p><code>substr()</code> extracts or replaces substrings in a character vector. Its usage has the following form:</p>
<pre><code>substr(x, start, stop)</code></pre>
<p><code>x</code> is a character vector, <code>start</code> indicates the first element to be replaced, and <code>stop</code> indicates the last element to be replaced:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" data-line-number="1"><span class="co"># extract &#39;bcd&#39;</span></a>
<a class="sourceLine" id="cb127-2" data-line-number="2"><span class="kw">substr</span>(<span class="st">&quot;abcdef&quot;</span>, <span class="dv">2</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb127-3" data-line-number="3"><span class="co">#&gt; [1] &quot;bcd&quot;</span></a>
<a class="sourceLine" id="cb127-4" data-line-number="4"></a>
<a class="sourceLine" id="cb127-5" data-line-number="5"><span class="co"># replace 2nd letter with hash symbol</span></a>
<a class="sourceLine" id="cb127-6" data-line-number="6">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;may&quot;</span>, <span class="st">&quot;the&quot;</span>, <span class="st">&quot;force&quot;</span>, <span class="st">&quot;be&quot;</span>, <span class="st">&quot;with&quot;</span>, <span class="st">&quot;you&quot;</span>)</a>
<a class="sourceLine" id="cb127-7" data-line-number="7"><span class="kw">substr</span>(x, <span class="dv">2</span>, <span class="dv">2</span>) &lt;-<span class="st"> &quot;#&quot;</span></a>
<a class="sourceLine" id="cb127-8" data-line-number="8">x</a>
<a class="sourceLine" id="cb127-9" data-line-number="9"><span class="co">#&gt; [1] &quot;m#y&quot;   &quot;t#e&quot;   &quot;f#rce&quot; &quot;b#&quot;    &quot;w#th&quot;  &quot;y#u&quot;</span></a>
<a class="sourceLine" id="cb127-10" data-line-number="10"></a>
<a class="sourceLine" id="cb127-11" data-line-number="11"><span class="co"># replace 2nd and 3rd letters with happy face</span></a>
<a class="sourceLine" id="cb127-12" data-line-number="12">y =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;may&quot;</span>, <span class="st">&quot;the&quot;</span>, <span class="st">&quot;force&quot;</span>, <span class="st">&quot;be&quot;</span>, <span class="st">&quot;with&quot;</span>, <span class="st">&quot;you&quot;</span>)</a>
<a class="sourceLine" id="cb127-13" data-line-number="13"><span class="kw">substr</span>(y, <span class="dv">2</span>, <span class="dv">3</span>) &lt;-<span class="st"> &quot;:)&quot;</span></a>
<a class="sourceLine" id="cb127-14" data-line-number="14">y</a>
<a class="sourceLine" id="cb127-15" data-line-number="15"><span class="co">#&gt; [1] &quot;m:)&quot;   &quot;t:)&quot;   &quot;f:)ce&quot; &quot;b:&quot;    &quot;w:)h&quot;  &quot;y:)&quot;</span></a>
<a class="sourceLine" id="cb127-16" data-line-number="16"></a>
<a class="sourceLine" id="cb127-17" data-line-number="17"><span class="co"># replacement with recycling</span></a>
<a class="sourceLine" id="cb127-18" data-line-number="18">z &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;may&quot;</span>, <span class="st">&quot;the&quot;</span>, <span class="st">&quot;force&quot;</span>, <span class="st">&quot;be&quot;</span>, <span class="st">&quot;with&quot;</span>, <span class="st">&quot;you&quot;</span>)</a>
<a class="sourceLine" id="cb127-19" data-line-number="19"><span class="kw">substr</span>(z, <span class="dv">2</span>, <span class="dv">3</span>) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;#&quot;</span>, <span class="st">&quot;```&quot;</span>)</a>
<a class="sourceLine" id="cb127-20" data-line-number="20">z</a>
<a class="sourceLine" id="cb127-21" data-line-number="21"><span class="co">#&gt; [1] &quot;m#y&quot;   &quot;t``&quot;   &quot;f#rce&quot; &quot;b`&quot;    &quot;w#th&quot;  &quot;y``&quot;</span></a></code></pre></div>
<p>Closely related to <code>substr()</code> is the function <code>substring()</code> which extracts or replaces substrings in a character vector. Its usage has the following form:</p>
<pre><code>substring(text, first, last = 1000000L)</code></pre>
<p><code>text</code> is a character vector, <code>first</code> indicates the first element to be replaced, and <code>last</code> indicates the last element to be replaced:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" data-line-number="1"><span class="co"># same as &#39;substr&#39;</span></a>
<a class="sourceLine" id="cb129-2" data-line-number="2"><span class="kw">substring</span>(<span class="st">&quot;ABCDEF&quot;</span>, <span class="dv">2</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb129-3" data-line-number="3"><span class="co">#&gt; [1] &quot;BCD&quot;</span></a>
<a class="sourceLine" id="cb129-4" data-line-number="4"><span class="kw">substr</span>(<span class="st">&quot;ABCDEF&quot;</span>, <span class="dv">2</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb129-5" data-line-number="5"><span class="co">#&gt; [1] &quot;BCD&quot;</span></a>
<a class="sourceLine" id="cb129-6" data-line-number="6"></a>
<a class="sourceLine" id="cb129-7" data-line-number="7"><span class="co"># extract each letter</span></a>
<a class="sourceLine" id="cb129-8" data-line-number="8"><span class="kw">substring</span>(<span class="st">&quot;ABCDEF&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>)</a>
<a class="sourceLine" id="cb129-9" data-line-number="9"><span class="co">#&gt; [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot;</span></a>
<a class="sourceLine" id="cb129-10" data-line-number="10"></a>
<a class="sourceLine" id="cb129-11" data-line-number="11"><span class="co"># multiple replacement with recycling</span></a>
<a class="sourceLine" id="cb129-12" data-line-number="12">text6 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;more&quot;</span>, <span class="st">&quot;emotions&quot;</span>, <span class="st">&quot;are&quot;</span>, <span class="st">&quot;better&quot;</span>, <span class="st">&quot;than&quot;</span>, <span class="st">&quot;less&quot;</span>)</a>
<a class="sourceLine" id="cb129-13" data-line-number="13"><span class="kw">substring</span>(text6, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;zzz&quot;</span>)</a>
<a class="sourceLine" id="cb129-14" data-line-number="14">text6</a>
<a class="sourceLine" id="cb129-15" data-line-number="15"><span class="co">#&gt; [1] &quot; ore&quot;     &quot;ezzzions&quot; &quot;ar &quot;      &quot;zzzter&quot;   &quot;t an&quot;     &quot;lezz&quot;</span></a></code></pre></div>
</section>
<section id="set-operations" class="level2">
<h2><span class="header-section-number">6.8</span> Set Operations</h2>
<p>R has dedicated functions for performing set operations on two given vectors. This implies that we can apply functions such as set union, intersection, difference, equality and membership, on <code>&quot;character&quot;</code> vectors.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Function</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>union()</code></td>
<td style="text-align: left;">set union</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>intersect()</code></td>
<td style="text-align: left;">intersection</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>setdiff()</code></td>
<td style="text-align: left;">set difference</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>setequal()</code></td>
<td style="text-align: left;">equal sets</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>identical()</code></td>
<td style="text-align: left;">exact equality</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>is.element()</code></td>
<td style="text-align: left;">is element</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>%in%()</code></td>
<td style="text-align: left;">contains</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>sort()</code></td>
<td style="text-align: left;">sorting</td>
</tr>
</tbody>
</table>
<section id="set-union-with-union" class="level3">
<h3><span class="header-section-number">6.8.1</span> Set union with <code>union()</code></h3>
<p>Let’s start our reviewing of set functions with <code>union()</code>. As its name indicates, you can use `union()} when you want to obtain the elements of the union between two character vectors:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" data-line-number="1"><span class="co"># two character vectors</span></a>
<a class="sourceLine" id="cb130-2" data-line-number="2">set1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;some&quot;</span>, <span class="st">&quot;random&quot;</span>, <span class="st">&quot;words&quot;</span>, <span class="st">&quot;some&quot;</span>)</a>
<a class="sourceLine" id="cb130-3" data-line-number="3">set2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;some&quot;</span>, <span class="st">&quot;many&quot;</span>, <span class="st">&quot;none&quot;</span>, <span class="st">&quot;few&quot;</span>)</a>
<a class="sourceLine" id="cb130-4" data-line-number="4"></a>
<a class="sourceLine" id="cb130-5" data-line-number="5"><span class="co"># union of set1 and set2</span></a>
<a class="sourceLine" id="cb130-6" data-line-number="6"><span class="kw">union</span>(set1, set2)</a>
<a class="sourceLine" id="cb130-7" data-line-number="7"><span class="co">#&gt; [1] &quot;some&quot;   &quot;random&quot; &quot;words&quot;  &quot;many&quot;   &quot;none&quot;   &quot;few&quot;</span></a></code></pre></div>
<p>Notice that <code>union()</code> discards any duplicated values in the provided vectors. In the previous example the word <code>&quot;some&quot;</code> appears twice inside <code>set1</code> but it appears only once in the union. In fact all the set operation functions will discard any duplicated values.</p>
</section>
<section id="set-intersection-with-intersect" class="level3">
<h3><span class="header-section-number">6.8.2</span> Set intersection with <code>intersect()</code></h3>
<p>Set intersection is performed with the function <code>intersect()</code>. You can use this function when you wish to get those elements that are common to both vectors:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" data-line-number="1"><span class="co"># two character vectors</span></a>
<a class="sourceLine" id="cb131-2" data-line-number="2">set3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;some&quot;</span>, <span class="st">&quot;random&quot;</span>, <span class="st">&quot;few&quot;</span>, <span class="st">&quot;words&quot;</span>)</a>
<a class="sourceLine" id="cb131-3" data-line-number="3">set4 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;some&quot;</span>, <span class="st">&quot;many&quot;</span>, <span class="st">&quot;none&quot;</span>, <span class="st">&quot;few&quot;</span>)</a>
<a class="sourceLine" id="cb131-4" data-line-number="4"></a>
<a class="sourceLine" id="cb131-5" data-line-number="5"><span class="co"># intersect of set3 and set4</span></a>
<a class="sourceLine" id="cb131-6" data-line-number="6"><span class="kw">intersect</span>(set3, set4)</a>
<a class="sourceLine" id="cb131-7" data-line-number="7"><span class="co">#&gt; [1] &quot;some&quot; &quot;few&quot;</span></a></code></pre></div>
</section>
<section id="set-difference-with-setdiff" class="level3">
<h3><span class="header-section-number">6.8.3</span> Set difference with <code>setdiff()</code></h3>
<p>Related to the intersection, you might be interested in getting the difference of the elements between two character vectors. This can be done with <code>setdiff()</code>:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="co"># two character vectors</span></a>
<a class="sourceLine" id="cb132-2" data-line-number="2">set5 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;some&quot;</span>, <span class="st">&quot;random&quot;</span>, <span class="st">&quot;few&quot;</span>, <span class="st">&quot;words&quot;</span>)</a>
<a class="sourceLine" id="cb132-3" data-line-number="3">set6 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;some&quot;</span>, <span class="st">&quot;many&quot;</span>, <span class="st">&quot;none&quot;</span>, <span class="st">&quot;few&quot;</span>)</a>
<a class="sourceLine" id="cb132-4" data-line-number="4"></a>
<a class="sourceLine" id="cb132-5" data-line-number="5"><span class="co"># difference between set5 and set6</span></a>
<a class="sourceLine" id="cb132-6" data-line-number="6"><span class="kw">setdiff</span>(set5, set6)</a>
<a class="sourceLine" id="cb132-7" data-line-number="7"><span class="co">#&gt; [1] &quot;random&quot; &quot;words&quot;</span></a></code></pre></div>
</section>
<section id="set-equality-with-setequal" class="level3">
<h3><span class="header-section-number">6.8.4</span> Set equality with <code>setequal()</code></h3>
<p>The function <code>setequal()</code> allows you to test the equality of two character vectors. If the vectors contain the same elements, <code>setequal()</code> returns <code>TRUE</code> (<code>FALSE</code> otherwise)</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" data-line-number="1"><span class="co"># three character vectors</span></a>
<a class="sourceLine" id="cb133-2" data-line-number="2">set7 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;some&quot;</span>, <span class="st">&quot;random&quot;</span>, <span class="st">&quot;strings&quot;</span>)</a>
<a class="sourceLine" id="cb133-3" data-line-number="3">set8 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;some&quot;</span>, <span class="st">&quot;many&quot;</span>, <span class="st">&quot;none&quot;</span>, <span class="st">&quot;few&quot;</span>)</a>
<a class="sourceLine" id="cb133-4" data-line-number="4">set9 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;strings&quot;</span>, <span class="st">&quot;random&quot;</span>, <span class="st">&quot;some&quot;</span>)</a>
<a class="sourceLine" id="cb133-5" data-line-number="5"></a>
<a class="sourceLine" id="cb133-6" data-line-number="6"><span class="co"># set7 == set8?</span></a>
<a class="sourceLine" id="cb133-7" data-line-number="7"><span class="kw">setequal</span>(set7, set8)</a>
<a class="sourceLine" id="cb133-8" data-line-number="8"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb133-9" data-line-number="9"></a>
<a class="sourceLine" id="cb133-10" data-line-number="10"><span class="co"># set7 == set9?</span></a>
<a class="sourceLine" id="cb133-11" data-line-number="11"><span class="kw">setequal</span>(set7, set9)</a>
<a class="sourceLine" id="cb133-12" data-line-number="12"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</section>
<section id="exact-equality-with-identical" class="level3">
<h3><span class="header-section-number">6.8.5</span> Exact equality with <code>identical()</code></h3>
<p>Sometimes <code>setequal()</code> is not always what we want to use. It might be the case that you want to test whether two vectors are <em>exactly equal</em> (element by element). For instance, testing if <code>set7</code> is exactly equal to <code>set9</code>. Although both vectors contain the same set of elements, they are not exactly the same vector. Such test can be performed with the function <code>identical()</code></p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" data-line-number="1"><span class="co"># set7 identical to set7?</span></a>
<a class="sourceLine" id="cb134-2" data-line-number="2"><span class="kw">identical</span>(set7, set7)</a>
<a class="sourceLine" id="cb134-3" data-line-number="3"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb134-4" data-line-number="4"></a>
<a class="sourceLine" id="cb134-5" data-line-number="5"><span class="co"># set7 identical to set9?</span></a>
<a class="sourceLine" id="cb134-6" data-line-number="6"><span class="kw">identical</span>(set7, set9)</a>
<a class="sourceLine" id="cb134-7" data-line-number="7"><span class="co">#&gt; [1] FALSE</span></a></code></pre></div>
<p>If you consult the help documentation of <code>identical()</code>, you will see that this function is the “safe and reliable way to test two objects for being exactly equal”.</p>
</section>
<section id="element-contained-with-is.element" class="level3">
<h3><span class="header-section-number">6.8.6</span> Element contained with <code>is.element()</code></h3>
<p>If you wish to test if an element is contained in a given set of character strings you can do so with <code>is.element()</code>:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" data-line-number="1"><span class="co"># three vectors</span></a>
<a class="sourceLine" id="cb135-2" data-line-number="2">set10 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;some&quot;</span>, <span class="st">&quot;stuff&quot;</span>, <span class="st">&quot;to&quot;</span>, <span class="st">&quot;play&quot;</span>, <span class="st">&quot;with&quot;</span>)</a>
<a class="sourceLine" id="cb135-3" data-line-number="3">elem1 &lt;-<span class="st"> &quot;play&quot;</span></a>
<a class="sourceLine" id="cb135-4" data-line-number="4">elem2 &lt;-<span class="st"> &quot;crazy&quot;</span></a>
<a class="sourceLine" id="cb135-5" data-line-number="5"></a>
<a class="sourceLine" id="cb135-6" data-line-number="6"><span class="co"># elem1 in set10?</span></a>
<a class="sourceLine" id="cb135-7" data-line-number="7"><span class="kw">is.element</span>(elem1, set10)</a>
<a class="sourceLine" id="cb135-8" data-line-number="8"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb135-9" data-line-number="9"></a>
<a class="sourceLine" id="cb135-10" data-line-number="10"><span class="co"># elem2 in set10?</span></a>
<a class="sourceLine" id="cb135-11" data-line-number="11"><span class="kw">is.element</span>(elem2, set10)</a>
<a class="sourceLine" id="cb135-12" data-line-number="12"><span class="co">#&gt; [1] FALSE</span></a></code></pre></div>
<p>Alternatively, you can use the binary operator <code>%in%</code> to test if an element is contained in a given set. The function <code>%in%</code> returns <code>TRUE</code> if the first operand is contained in the second, and it returns <code>FALSE</code> otherwise:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" data-line-number="1"><span class="co"># elem1 in set10?</span></a>
<a class="sourceLine" id="cb136-2" data-line-number="2">elem1 <span class="op">%in%</span><span class="st"> </span>set10</a>
<a class="sourceLine" id="cb136-3" data-line-number="3"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb136-4" data-line-number="4"></a>
<a class="sourceLine" id="cb136-5" data-line-number="5"><span class="co"># elem2 in set10?</span></a>
<a class="sourceLine" id="cb136-6" data-line-number="6">elem2 <span class="op">%in%</span><span class="st"> </span>set10</a>
<a class="sourceLine" id="cb136-7" data-line-number="7"><span class="co">#&gt; [1] FALSE</span></a></code></pre></div>
</section>
<section id="sorting-with-sort" class="level3">
<h3><span class="header-section-number">6.8.7</span> Sorting with <code>sort()</code></h3>
<p>The function <code>sort()</code> allows you to sort the elements of a vector, either in increasing order (by default) or in decreasing order using the argument <code>decreasing</code>:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" data-line-number="1">set11 =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;today&quot;</span>, <span class="st">&quot;produced&quot;</span>, <span class="st">&quot;example&quot;</span>, <span class="st">&quot;beautiful&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;nicely&quot;</span>)</a>
<a class="sourceLine" id="cb137-2" data-line-number="2"></a>
<a class="sourceLine" id="cb137-3" data-line-number="3"><span class="co"># sort (decreasing order)</span></a>
<a class="sourceLine" id="cb137-4" data-line-number="4"><span class="kw">sort</span>(set11)</a>
<a class="sourceLine" id="cb137-5" data-line-number="5"><span class="co">#&gt; [1] &quot;a&quot;         &quot;beautiful&quot; &quot;example&quot;   &quot;nicely&quot;    &quot;produced&quot;  &quot;today&quot;</span></a>
<a class="sourceLine" id="cb137-6" data-line-number="6"></a>
<a class="sourceLine" id="cb137-7" data-line-number="7"><span class="co"># sort (increasing order)</span></a>
<a class="sourceLine" id="cb137-8" data-line-number="8"><span class="kw">sort</span>(set11, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb137-9" data-line-number="9"><span class="co">#&gt; [1] &quot;today&quot;     &quot;produced&quot;  &quot;nicely&quot;    &quot;example&quot;   &quot;beautiful&quot; &quot;a&quot;</span></a></code></pre></div>
<p>If you have alpha-numeric strings, <code>sort()</code> will put the numbers first when sorting in increasing order:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1">set12 =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;today&quot;</span>, <span class="st">&quot;produced&quot;</span>, <span class="st">&quot;example&quot;</span>, <span class="st">&quot;beautiful&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;nicely&quot;</span>)</a>
<a class="sourceLine" id="cb138-2" data-line-number="2"></a>
<a class="sourceLine" id="cb138-3" data-line-number="3"><span class="co"># sort (decreasing order)</span></a>
<a class="sourceLine" id="cb138-4" data-line-number="4"><span class="kw">sort</span>(set12)</a>
<a class="sourceLine" id="cb138-5" data-line-number="5"><span class="co">#&gt; [1] &quot;1&quot;         &quot;beautiful&quot; &quot;example&quot;   &quot;nicely&quot;    &quot;produced&quot;  &quot;today&quot;</span></a>
<a class="sourceLine" id="cb138-6" data-line-number="6"></a>
<a class="sourceLine" id="cb138-7" data-line-number="7"><span class="co"># sort (increasing order)</span></a>
<a class="sourceLine" id="cb138-8" data-line-number="8"><span class="kw">sort</span>(set12, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb138-9" data-line-number="9"><span class="co">#&gt; [1] &quot;today&quot;     &quot;produced&quot;  &quot;nicely&quot;    &quot;example&quot;   &quot;beautiful&quot; &quot;1&quot;</span></a></code></pre></div>

</section>
</section>
</section>
<section id="stringr-basics" class="level1">
<h1><span class="header-section-number">7</span> Stringr Basics</h1>
<section id="introduction-3" class="level2">
<h2><span class="header-section-number">7.1</span> Introduction</h2>
<p>So far we’ve seen the various functions R provides to perform basic string processing and manipulations of <code>&quot;character&quot;</code> data. Most of the times these functions are enough and they will allow you to get your job done. However, they have some drawbacks. For instance, consider the following example:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" data-line-number="1"><span class="co"># some text vector</span></a>
<a class="sourceLine" id="cb139-2" data-line-number="2">text &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>, <span class="ot">NA</span>, <span class="st">&quot;five&quot;</span>)</a>
<a class="sourceLine" id="cb139-3" data-line-number="3"></a>
<a class="sourceLine" id="cb139-4" data-line-number="4"><span class="co"># how many characters in each string?</span></a>
<a class="sourceLine" id="cb139-5" data-line-number="5"><span class="kw">nchar</span>(text)</a>
<a class="sourceLine" id="cb139-6" data-line-number="6"><span class="co">#&gt; [1]  3  3  5 NA  4</span></a></code></pre></div>
<p>As you can tell, <code>nchar()</code> gives <code>NA</code> a value of 2, as if it were a string formed by two characters. Perhaps this may be acceptable in some cases, but taking into account all the operations in R, it would be better to leave <code>NA</code> as a missing value, instead of treating it as a string of two characters.</p>
<p>Another awkward example can be found with <code>paste()</code>. The default separator is a blank space, which more often than not is what you want to use. But that’s secondary. The really annoying thing is when you want to paste things that include zero length arguments (e.g. <code>NULL</code>, <code>character(0)</code>). How does <code>paste()</code> behave in those cases? See below:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" data-line-number="1"><span class="co"># this works fine</span></a>
<a class="sourceLine" id="cb140-2" data-line-number="2"><span class="kw">paste</span>(<span class="st">&quot;University&quot;</span>, <span class="st">&quot;of&quot;</span>, <span class="st">&quot;California&quot;</span>, <span class="st">&quot;Berkeley&quot;</span>)</a>
<a class="sourceLine" id="cb140-3" data-line-number="3"><span class="co">#&gt; [1] &quot;University of California Berkeley&quot;</span></a>
<a class="sourceLine" id="cb140-4" data-line-number="4"></a>
<a class="sourceLine" id="cb140-5" data-line-number="5"><span class="co"># this works fine too</span></a>
<a class="sourceLine" id="cb140-6" data-line-number="6"><span class="kw">paste</span>(<span class="st">&quot;University&quot;</span>, <span class="st">&quot;of&quot;</span>, <span class="st">&quot;California&quot;</span>, <span class="st">&quot;Berkeley&quot;</span>)</a>
<a class="sourceLine" id="cb140-7" data-line-number="7"><span class="co">#&gt; [1] &quot;University of California Berkeley&quot;</span></a>
<a class="sourceLine" id="cb140-8" data-line-number="8"></a>
<a class="sourceLine" id="cb140-9" data-line-number="9"><span class="co"># this is weird</span></a>
<a class="sourceLine" id="cb140-10" data-line-number="10"><span class="kw">paste</span>(<span class="st">&quot;University&quot;</span>, <span class="st">&quot;of&quot;</span>, <span class="st">&quot;California&quot;</span>, <span class="st">&quot;Berkeley&quot;</span>, <span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb140-11" data-line-number="11"><span class="co">#&gt; [1] &quot;University of California Berkeley &quot;</span></a>
<a class="sourceLine" id="cb140-12" data-line-number="12"></a>
<a class="sourceLine" id="cb140-13" data-line-number="13"><span class="co"># this is ugly</span></a>
<a class="sourceLine" id="cb140-14" data-line-number="14"><span class="kw">paste</span>(<span class="st">&quot;University&quot;</span>, <span class="st">&quot;of&quot;</span>, <span class="st">&quot;California&quot;</span>, <span class="st">&quot;Berkeley&quot;</span>, <span class="ot">NULL</span>, <span class="kw">character</span>(<span class="dv">0</span>), </a>
<a class="sourceLine" id="cb140-15" data-line-number="15">      <span class="st">&quot;Go Bears!&quot;</span>)</a>
<a class="sourceLine" id="cb140-16" data-line-number="16"><span class="co">#&gt; [1] &quot;University of California Berkeley   Go Bears!&quot;</span></a></code></pre></div>
<p>Notice the output from the last example (the <em>ugly</em> one). The objects <code>NULL</code> and <code>character(0)</code> have zero length, yet when included inside <code>paste()</code> they are treated as an empty string <code>&quot;&quot;</code>. Wouldn’t be good if <code>paste()</code> removed zero length arguments? Sadly, there’s nothing we can do to change <code>nchar()</code> and <code>paste()</code>. But fear not. There is a very nice package that solves these problems and provides several functions for carrying out consistent string processing.</p>
</section>
<section id="package-stringr" class="level2">
<h2><span class="header-section-number">7.2</span> Package <code>stringr</code></h2>
<p>Thanks to Hadley Wickham, we have the package <code>stringr</code> that adds more functionality to the base functions for handling strings in R.</p>
<p><a href="http://cran.r-project.org/web/packages/stringr/index.html" class="uri">http://cran.r-project.org/web/packages/stringr/index.html</a></p>
<p>According to the description of the package:</p>
<blockquote>
<p>“is a set of simple wrappers that make R’s string functions more consistent, simpler and easier to use. It does this by ensuring that: function and argument names (and positions) are consistent, all functions deal with NA’s and zero length character appropriately, and the output data structures from each function matches the input data structures of other functions.”</p>
</blockquote>
<p>To install <code>&quot;stringr&quot;</code> use the function <code>install.packages()</code>. Once installed, load it to your current session with <code>library()</code>:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" data-line-number="1"><span class="co"># installing &#39;stringr&#39;</span></a>
<a class="sourceLine" id="cb141-2" data-line-number="2"><span class="kw">install.packages</span>(<span class="st">&quot;stringr&quot;</span>)</a>
<a class="sourceLine" id="cb141-3" data-line-number="3"></a>
<a class="sourceLine" id="cb141-4" data-line-number="4"><span class="co"># load &#39;stringr&#39;</span></a>
<a class="sourceLine" id="cb141-5" data-line-number="5"><span class="kw">library</span>(stringr)</a></code></pre></div>
</section>
<section id="basic-string-operations" class="level2">
<h2><span class="header-section-number">7.3</span> Basic String Operations</h2>
<p><code>&quot;stringr&quot;</code> provides functions for both 1) basic manipulations and 2) for regular expression operations. In this chapter we cover those functions that have to do with basic manipulations.</p>
<p>The following table contains the <code>stringr</code> functions for basic string operations:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Function</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Similar to</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>str_c()</code></td>
<td style="text-align: left;">string concatenation</td>
<td style="text-align: left;"><code>paste()</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>str_length()</code></td>
<td style="text-align: left;">number of characters</td>
<td style="text-align: left;"><code>nchar()</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>str_sub()</code></td>
<td style="text-align: left;">extracts substrings</td>
<td style="text-align: left;"><code>substring()</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>str_dup()</code></td>
<td style="text-align: left;">duplicates characters</td>
<td style="text-align: left;"><em>none</em></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>str_trim()</code></td>
<td style="text-align: left;">removes leading and trailing whitespace</td>
<td style="text-align: left;"><em>none</em></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>str_pad()</code></td>
<td style="text-align: left;">pads a string</td>
<td style="text-align: left;"><em>none</em></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>str_wrap()</code></td>
<td style="text-align: left;">wraps a string paragraph</td>
<td style="text-align: left;"><code>strwrap()</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>str_trim()</code></td>
<td style="text-align: left;">trims a string</td>
<td style="text-align: left;"><em>none</em></td>
</tr>
</tbody>
</table>
<p>Notice that all functions in <code>stringr</code> start with <code>&quot;str_&quot;</code> followed by a term associated to the task they perform. For example, <code>str_length()</code> gives you the number (i.e. length) of characters in a string. In addition, some functions are designed to provide a better alternative to already existing functions. This is the case of <code>str_length()</code> which is intended to be a substitute of <code>nchar()</code>. Other functions, however, don’t have a corresponding alternative such as <code>str_dup()</code> which allows you to duplicate characters.</p>
<section id="concatenating-with-str_c" class="level3">
<h3><span class="header-section-number">7.3.1</span> Concatenating with <code>str_c()</code></h3>
<p>Let’s begin with <code>str_c()</code>. This function is equivalent to <code>paste()</code> but instead of using the white space as the default separator, <code>str_c()</code> uses the empty string <code>&quot;&quot;</code> which is a more common separator when <em>pasting</em> strings:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1"><span class="co"># default usage</span></a>
<a class="sourceLine" id="cb142-2" data-line-number="2"><span class="kw">str_c</span>(<span class="st">&quot;May&quot;</span>, <span class="st">&quot;The&quot;</span>, <span class="st">&quot;Force&quot;</span>, <span class="st">&quot;Be&quot;</span>, <span class="st">&quot;With&quot;</span>, <span class="st">&quot;You&quot;</span>)</a>
<a class="sourceLine" id="cb142-3" data-line-number="3"><span class="co">#&gt; [1] &quot;MayTheForceBeWithYou&quot;</span></a>
<a class="sourceLine" id="cb142-4" data-line-number="4"></a>
<a class="sourceLine" id="cb142-5" data-line-number="5"><span class="co"># removing zero length objects</span></a>
<a class="sourceLine" id="cb142-6" data-line-number="6"><span class="kw">str_c</span>(<span class="st">&quot;May&quot;</span>, <span class="st">&quot;The&quot;</span>, <span class="st">&quot;Force&quot;</span>, <span class="ot">NULL</span>, <span class="st">&quot;Be&quot;</span>, <span class="st">&quot;With&quot;</span>, <span class="st">&quot;You&quot;</span>, <span class="kw">character</span>(<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb142-7" data-line-number="7"><span class="co">#&gt; [1] &quot;MayTheForceBeWithYou&quot;</span></a></code></pre></div>
<p>Observe another major difference between <code>str_c()</code> and <code>paste()</code>: zero length arguments like <code>NULL</code> and <code>character(0)</code> are silently removed by <code>str_c()</code>.</p>
<p>If you want to change the default separator, you can do that as usual by specifying the argument <code>sep</code>:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" data-line-number="1"><span class="co"># changing separator</span></a>
<a class="sourceLine" id="cb143-2" data-line-number="2"><span class="kw">str_c</span>(<span class="st">&quot;May&quot;</span>, <span class="st">&quot;The&quot;</span>, <span class="st">&quot;Force&quot;</span>, <span class="st">&quot;Be&quot;</span>, <span class="st">&quot;With&quot;</span>, <span class="st">&quot;You&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb143-3" data-line-number="3"><span class="co">#&gt; [1] &quot;May_The_Force_Be_With_You&quot;</span></a></code></pre></div>
</section>
<section id="number-of-characters-with-str_length" class="level3">
<h3><span class="header-section-number">7.3.2</span> Number of characters with <code>str_length()</code></h3>
<p>As we’ve mentioned before, the function <code>str_length()</code> is equivalent to <code>nchar()</code>. Both functions return the number of characters in a string, that is, the <em>length</em> of a string (do not confuse it with the <code>length()</code> of a vector). Compared to <code>nchar()</code>, <code>str_length()</code> has a more consistent behavior when dealing with <code>NA</code> values. Instead of giving <code>NA</code> a length of 2, <code>str_length()</code> preserves missing values just as <code>NA</code>s.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="co"># some text (NA included)</span></a>
<a class="sourceLine" id="cb144-2" data-line-number="2">some_text &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>, <span class="ot">NA</span>, <span class="st">&quot;five&quot;</span>)</a>
<a class="sourceLine" id="cb144-3" data-line-number="3"></a>
<a class="sourceLine" id="cb144-4" data-line-number="4"><span class="co"># compare &#39;str_length&#39; with &#39;nchar&#39;</span></a>
<a class="sourceLine" id="cb144-5" data-line-number="5"><span class="kw">nchar</span>(some_text)</a>
<a class="sourceLine" id="cb144-6" data-line-number="6"><span class="co">#&gt; [1]  3  3  5 NA  4</span></a>
<a class="sourceLine" id="cb144-7" data-line-number="7"><span class="kw">str_length</span>(some_text)</a>
<a class="sourceLine" id="cb144-8" data-line-number="8"><span class="co">#&gt; [1]  3  3  5 NA  4</span></a></code></pre></div>
<p>In addition, <code>str_length()</code> has the nice feature that it converts factors to characters, something that <code>nchar()</code> is not able to handle:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" data-line-number="1">some_factor &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;good&quot;</span>, <span class="st">&quot;bad&quot;</span>))</a>
<a class="sourceLine" id="cb145-2" data-line-number="2">some_factor</a>
<a class="sourceLine" id="cb145-3" data-line-number="3"><span class="co">#&gt; [1] good good good bad  bad  bad </span></a>
<a class="sourceLine" id="cb145-4" data-line-number="4"><span class="co">#&gt; Levels: good bad</span></a>
<a class="sourceLine" id="cb145-5" data-line-number="5"></a>
<a class="sourceLine" id="cb145-6" data-line-number="6"><span class="co"># try &#39;nchar&#39; on a factor</span></a>
<a class="sourceLine" id="cb145-7" data-line-number="7"><span class="kw">nchar</span>(some_factor)</a>
<a class="sourceLine" id="cb145-8" data-line-number="8"><span class="co">#&gt; Error in nchar(some_factor): &#39;nchar()&#39; requires a character vector</span></a>
<a class="sourceLine" id="cb145-9" data-line-number="9"></a>
<a class="sourceLine" id="cb145-10" data-line-number="10"><span class="co"># now compare it with &#39;str_length&#39;</span></a>
<a class="sourceLine" id="cb145-11" data-line-number="11"><span class="kw">str_length</span>(some_factor)</a>
<a class="sourceLine" id="cb145-12" data-line-number="12"><span class="co">#&gt; [1] 4 4 4 3 3 3</span></a></code></pre></div>
</section>
<section id="substring-with-str_sub" class="level3">
<h3><span class="header-section-number">7.3.3</span> Substring with <code>str_sub()</code></h3>
<p>To extract substrings from a character vector <code>stringr</code> provides <code>str_sub()</code> which is equivalent to <code>substring()</code>. The function <code>str_sub()</code> has the following usage form:</p>
<pre><code>str_sub(string, start = 1L, end = -1L)</code></pre>
<p>The three arguments in the function are: a <code>string</code> vector, a <code>start</code> value indicating the position of the first character in substring, and an <code>end</code> value indicating the position of the last character. Here’s a simple example with a single string in which characters from 1 to 5 are extracted:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" data-line-number="1">lorem &lt;-<span class="st"> &quot;Lorem Ipsum&quot;</span></a>
<a class="sourceLine" id="cb147-2" data-line-number="2"></a>
<a class="sourceLine" id="cb147-3" data-line-number="3"><span class="co"># apply &#39;str_sub&#39;</span></a>
<a class="sourceLine" id="cb147-4" data-line-number="4"><span class="kw">str_sub</span>(lorem, <span class="dt">start =</span> <span class="dv">1</span>, <span class="dt">end =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb147-5" data-line-number="5"><span class="co">#&gt; [1] &quot;Lorem&quot;</span></a>
<a class="sourceLine" id="cb147-6" data-line-number="6"></a>
<a class="sourceLine" id="cb147-7" data-line-number="7"><span class="co"># equivalent to &#39;substring&#39;</span></a>
<a class="sourceLine" id="cb147-8" data-line-number="8"><span class="kw">substring</span>(lorem, <span class="dt">first =</span> <span class="dv">1</span>, <span class="dt">last =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb147-9" data-line-number="9"><span class="co">#&gt; [1] &quot;Lorem&quot;</span></a>
<a class="sourceLine" id="cb147-10" data-line-number="10"></a>
<a class="sourceLine" id="cb147-11" data-line-number="11"><span class="co"># another example</span></a>
<a class="sourceLine" id="cb147-12" data-line-number="12"><span class="kw">str_sub</span>(<span class="st">&quot;adios&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb147-13" data-line-number="13"><span class="co">#&gt; [1] &quot;adios&quot; &quot;dios&quot;  &quot;ios&quot;</span></a></code></pre></div>
<p>An interesting feature of <code>str_sub()</code> is its ability to work with negative indices in the <code>start</code> and <code>end</code> positions. When we use a negative position, <code>str_sub()</code> counts backwards from last character:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" data-line-number="1">resto =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;brasserie&quot;</span>, <span class="st">&quot;bistrot&quot;</span>, <span class="st">&quot;creperie&quot;</span>, <span class="st">&quot;bouchon&quot;</span>)</a>
<a class="sourceLine" id="cb148-2" data-line-number="2"></a>
<a class="sourceLine" id="cb148-3" data-line-number="3"><span class="co"># &#39;str_sub&#39; with negative positions</span></a>
<a class="sourceLine" id="cb148-4" data-line-number="4"><span class="kw">str_sub</span>(resto, <span class="dt">start =</span> <span class="dv">-4</span>, <span class="dt">end =</span> <span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb148-5" data-line-number="5"><span class="co">#&gt; [1] &quot;erie&quot; &quot;trot&quot; &quot;erie&quot; &quot;chon&quot;</span></a>
<a class="sourceLine" id="cb148-6" data-line-number="6"></a>
<a class="sourceLine" id="cb148-7" data-line-number="7"><span class="co"># compared to substring (useless)</span></a>
<a class="sourceLine" id="cb148-8" data-line-number="8"><span class="kw">substring</span>(resto, <span class="dt">first =</span> <span class="dv">-4</span>, <span class="dt">last =</span> <span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb148-9" data-line-number="9"><span class="co">#&gt; [1] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</span></a></code></pre></div>
<p>Similar to <code>substring()</code>, we can also give <code>str_sub()</code> a set of positions which will be recycled over the string. But even better, we can give <code>str_sub()</code> a negative sequence, something that <code>substring()</code> ignores:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" data-line-number="1"><span class="co"># extracting sequentially</span></a>
<a class="sourceLine" id="cb149-2" data-line-number="2"><span class="kw">str_sub</span>(lorem, <span class="kw">seq_len</span>(<span class="kw">nchar</span>(lorem)))</a>
<a class="sourceLine" id="cb149-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;Lorem Ipsum&quot; &quot;orem Ipsum&quot;  &quot;rem Ipsum&quot;   &quot;em Ipsum&quot;    &quot;m Ipsum&quot;    </span></a>
<a class="sourceLine" id="cb149-4" data-line-number="4"><span class="co">#&gt;  [6] &quot; Ipsum&quot;      &quot;Ipsum&quot;       &quot;psum&quot;        &quot;sum&quot;         &quot;um&quot;         </span></a>
<a class="sourceLine" id="cb149-5" data-line-number="5"><span class="co">#&gt; [11] &quot;m&quot;</span></a>
<a class="sourceLine" id="cb149-6" data-line-number="6"><span class="kw">substring</span>(lorem, <span class="kw">seq_len</span>(<span class="kw">nchar</span>(lorem)))</a>
<a class="sourceLine" id="cb149-7" data-line-number="7"><span class="co">#&gt;  [1] &quot;Lorem Ipsum&quot; &quot;orem Ipsum&quot;  &quot;rem Ipsum&quot;   &quot;em Ipsum&quot;    &quot;m Ipsum&quot;    </span></a>
<a class="sourceLine" id="cb149-8" data-line-number="8"><span class="co">#&gt;  [6] &quot; Ipsum&quot;      &quot;Ipsum&quot;       &quot;psum&quot;        &quot;sum&quot;         &quot;um&quot;         </span></a>
<a class="sourceLine" id="cb149-9" data-line-number="9"><span class="co">#&gt; [11] &quot;m&quot;</span></a>
<a class="sourceLine" id="cb149-10" data-line-number="10"></a>
<a class="sourceLine" id="cb149-11" data-line-number="11"><span class="co"># reverse substrings with negative positions</span></a>
<a class="sourceLine" id="cb149-12" data-line-number="12"><span class="kw">str_sub</span>(lorem, <span class="op">-</span><span class="kw">seq_len</span>(<span class="kw">nchar</span>(lorem)))</a>
<a class="sourceLine" id="cb149-13" data-line-number="13"><span class="co">#&gt;  [1] &quot;m&quot;           &quot;um&quot;          &quot;sum&quot;         &quot;psum&quot;        &quot;Ipsum&quot;      </span></a>
<a class="sourceLine" id="cb149-14" data-line-number="14"><span class="co">#&gt;  [6] &quot; Ipsum&quot;      &quot;m Ipsum&quot;     &quot;em Ipsum&quot;    &quot;rem Ipsum&quot;   &quot;orem Ipsum&quot; </span></a>
<a class="sourceLine" id="cb149-15" data-line-number="15"><span class="co">#&gt; [11] &quot;Lorem Ipsum&quot;</span></a>
<a class="sourceLine" id="cb149-16" data-line-number="16"><span class="kw">substring</span>(lorem, <span class="op">-</span><span class="kw">seq_len</span>(<span class="kw">nchar</span>(lorem)))</a>
<a class="sourceLine" id="cb149-17" data-line-number="17"><span class="co">#&gt;  [1] &quot;Lorem Ipsum&quot; &quot;Lorem Ipsum&quot; &quot;Lorem Ipsum&quot; &quot;Lorem Ipsum&quot; &quot;Lorem Ipsum&quot;</span></a>
<a class="sourceLine" id="cb149-18" data-line-number="18"><span class="co">#&gt;  [6] &quot;Lorem Ipsum&quot; &quot;Lorem Ipsum&quot; &quot;Lorem Ipsum&quot; &quot;Lorem Ipsum&quot; &quot;Lorem Ipsum&quot;</span></a>
<a class="sourceLine" id="cb149-19" data-line-number="19"><span class="co">#&gt; [11] &quot;Lorem Ipsum&quot;</span></a></code></pre></div>
<p>We can use <code>str_sub()</code> not only for extracting subtrings but also for replacing substrings:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" data-line-number="1"><span class="co"># replacing &#39;Lorem&#39; with &#39;Nullam&#39;</span></a>
<a class="sourceLine" id="cb150-2" data-line-number="2">lorem &lt;-<span class="st"> &quot;Lorem Ipsum&quot;</span></a>
<a class="sourceLine" id="cb150-3" data-line-number="3"><span class="kw">str_sub</span>(lorem, <span class="dv">1</span>, <span class="dv">5</span>) &lt;-<span class="st"> &quot;Nullam&quot;</span></a>
<a class="sourceLine" id="cb150-4" data-line-number="4">lorem</a>
<a class="sourceLine" id="cb150-5" data-line-number="5"><span class="co">#&gt; [1] &quot;Nullam Ipsum&quot;</span></a>
<a class="sourceLine" id="cb150-6" data-line-number="6"></a>
<a class="sourceLine" id="cb150-7" data-line-number="7"><span class="co"># replacing with negative positions</span></a>
<a class="sourceLine" id="cb150-8" data-line-number="8">lorem &lt;-<span class="st"> &quot;Lorem Ipsum&quot;</span></a>
<a class="sourceLine" id="cb150-9" data-line-number="9"><span class="kw">str_sub</span>(lorem, <span class="dv">-1</span>) &lt;-<span class="st"> &quot;Nullam&quot;</span></a>
<a class="sourceLine" id="cb150-10" data-line-number="10">lorem</a>
<a class="sourceLine" id="cb150-11" data-line-number="11"><span class="co">#&gt; [1] &quot;Lorem IpsuNullam&quot;</span></a>
<a class="sourceLine" id="cb150-12" data-line-number="12"></a>
<a class="sourceLine" id="cb150-13" data-line-number="13"><span class="co"># multiple replacements </span></a>
<a class="sourceLine" id="cb150-14" data-line-number="14">lorem &lt;-<span class="st"> &quot;Lorem Ipsum&quot;</span></a>
<a class="sourceLine" id="cb150-15" data-line-number="15"><span class="kw">str_sub</span>(lorem, <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">7</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">8</span>)) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Nullam&quot;</span>, <span class="st">&quot;Enim&quot;</span>)</a>
<a class="sourceLine" id="cb150-16" data-line-number="16">lorem</a>
<a class="sourceLine" id="cb150-17" data-line-number="17"><span class="co">#&gt; [1] &quot;Nullam Ipsum&quot;  &quot;Lorem Enimsum&quot;</span></a></code></pre></div>
</section>
<section id="duplication-with-str_dup" class="level3">
<h3><span class="header-section-number">7.3.4</span> Duplication with <code>str_dup()</code></h3>
<p>A common operation when handling characters is <em>duplication</em>. The problem is that R doesn’t have a specific function for that purpose. But <code>stringr</code> does: <code>str_dup()</code> duplicates and concatenates strings within a character vector. Its usage requires two arguments:</p>
<pre><code>str_dup(string, times)</code></pre>
<p>The first input is the <code>string</code> that you want to dplicate. The second input, <code>times</code>, is the number of times to duplicate each string:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" data-line-number="1"><span class="co"># default usage</span></a>
<a class="sourceLine" id="cb152-2" data-line-number="2"><span class="kw">str_dup</span>(<span class="st">&quot;hola&quot;</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb152-3" data-line-number="3"><span class="co">#&gt; [1] &quot;holaholahola&quot;</span></a>
<a class="sourceLine" id="cb152-4" data-line-number="4"></a>
<a class="sourceLine" id="cb152-5" data-line-number="5"><span class="co"># use with differetn &#39;times&#39;</span></a>
<a class="sourceLine" id="cb152-6" data-line-number="6"><span class="kw">str_dup</span>(<span class="st">&quot;adios&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb152-7" data-line-number="7"><span class="co">#&gt; [1] &quot;adios&quot;           &quot;adiosadios&quot;      &quot;adiosadiosadios&quot;</span></a>
<a class="sourceLine" id="cb152-8" data-line-number="8"></a>
<a class="sourceLine" id="cb152-9" data-line-number="9"><span class="co"># use with a string vector</span></a>
<a class="sourceLine" id="cb152-10" data-line-number="10">words &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;lorem&quot;</span>, <span class="st">&quot;ipsum&quot;</span>, <span class="st">&quot;dolor&quot;</span>, <span class="st">&quot;sit&quot;</span>, <span class="st">&quot;amet&quot;</span>)</a>
<a class="sourceLine" id="cb152-11" data-line-number="11"><span class="kw">str_dup</span>(words, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb152-12" data-line-number="12"><span class="co">#&gt; [1] &quot;loremlorem&quot; &quot;ipsumipsum&quot; &quot;dolordolor&quot; &quot;sitsit&quot;     &quot;ametamet&quot;</span></a>
<a class="sourceLine" id="cb152-13" data-line-number="13"></a>
<a class="sourceLine" id="cb152-14" data-line-number="14"><span class="kw">str_dup</span>(words, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb152-15" data-line-number="15"><span class="co">#&gt; [1] &quot;lorem&quot;                &quot;ipsumipsum&quot;           &quot;dolordolordolor&quot;     </span></a>
<a class="sourceLine" id="cb152-16" data-line-number="16"><span class="co">#&gt; [4] &quot;sitsitsitsit&quot;         &quot;ametametametametamet&quot;</span></a></code></pre></div>
</section>
<section id="padding-with-str_pad" class="level3">
<h3><span class="header-section-number">7.3.5</span> Padding with <code>str_pad()</code></h3>
<p>Another handy function that we can find in <code>stringr</code> is <code>str_pad()</code> for <em>padding</em> a string. Its default usage has the following form:</p>
<pre><code>str_pad(string, width, side = &quot;left&quot;, pad = &quot; &quot;)</code></pre>
<p>The idea of <code>str_pad()</code> is to take a string and pad it with leading or trailing characters to a specified total <code>width</code>. The default padding character is a space (<code>pad = &quot; &quot;</code>), and consequently the returned string will appear to be either left-aligned (<code>side = &quot;left&quot;</code>), right-aligned (<code>side = &quot;right&quot;</code>), or both (<code>side = &quot;both&quot;</code>).</p>
<p>Let’s see some examples:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" data-line-number="1"><span class="co"># default usage</span></a>
<a class="sourceLine" id="cb154-2" data-line-number="2"><span class="kw">str_pad</span>(<span class="st">&quot;hola&quot;</span>, <span class="dt">width =</span> <span class="dv">7</span>)</a>
<a class="sourceLine" id="cb154-3" data-line-number="3"><span class="co">#&gt; [1] &quot;   hola&quot;</span></a>
<a class="sourceLine" id="cb154-4" data-line-number="4"></a>
<a class="sourceLine" id="cb154-5" data-line-number="5"><span class="co"># pad both sides</span></a>
<a class="sourceLine" id="cb154-6" data-line-number="6"><span class="kw">str_pad</span>(<span class="st">&quot;adios&quot;</span>, <span class="dt">width =</span> <span class="dv">7</span>, <span class="dt">side =</span> <span class="st">&quot;both&quot;</span>)</a>
<a class="sourceLine" id="cb154-7" data-line-number="7"><span class="co">#&gt; [1] &quot; adios &quot;</span></a>
<a class="sourceLine" id="cb154-8" data-line-number="8"></a>
<a class="sourceLine" id="cb154-9" data-line-number="9"><span class="co"># left padding with &#39;#&#39;</span></a>
<a class="sourceLine" id="cb154-10" data-line-number="10"><span class="kw">str_pad</span>(<span class="st">&quot;hashtag&quot;</span>, <span class="dt">width =</span> <span class="dv">8</span>, <span class="dt">pad =</span> <span class="st">&quot;#&quot;</span>)</a>
<a class="sourceLine" id="cb154-11" data-line-number="11"><span class="co">#&gt; [1] &quot;#hashtag&quot;</span></a>
<a class="sourceLine" id="cb154-12" data-line-number="12"></a>
<a class="sourceLine" id="cb154-13" data-line-number="13"><span class="co"># pad both sides with &#39;-&#39;</span></a>
<a class="sourceLine" id="cb154-14" data-line-number="14"><span class="kw">str_pad</span>(<span class="st">&quot;hashtag&quot;</span>, <span class="dt">width =</span> <span class="dv">9</span>, <span class="dt">side =</span> <span class="st">&quot;both&quot;</span>, <span class="dt">pad =</span> <span class="st">&quot;-&quot;</span>)</a>
<a class="sourceLine" id="cb154-15" data-line-number="15"><span class="co">#&gt; [1] &quot;-hashtag-&quot;</span></a></code></pre></div>
</section>
<section id="wrapping-with-str_wrap" class="level3">
<h3><span class="header-section-number">7.3.6</span> Wrapping with <code>str_wrap()</code></h3>
<p>The function <code>str_wrap()</code> is equivalent to <code>strwrap()</code> which can be used to <em>wrap</em> a string to format paragraphs. The idea of wrapping a (long) string is to first split it into paragraphs according to the given <code>width</code>, and then add the specified indentation in each line (first line with <code>indent</code>, following lines with <code>exdent</code>). Its default usage has the following form:</p>
<pre><code>str_wrap(string, width = 80, indent = 0, exdent = 0)</code></pre>
<p>For instance, consider the following quote (from Douglas Adams) converted into a paragraph:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" data-line-number="1"><span class="co"># quote (by Douglas Adams)</span></a>
<a class="sourceLine" id="cb156-2" data-line-number="2">some_quote &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb156-3" data-line-number="3">  <span class="st">&quot;I may not have gone&quot;</span>,</a>
<a class="sourceLine" id="cb156-4" data-line-number="4">  <span class="st">&quot;where I intended to go,&quot;</span>, </a>
<a class="sourceLine" id="cb156-5" data-line-number="5">  <span class="st">&quot;but I think I have ended up&quot;</span>,</a>
<a class="sourceLine" id="cb156-6" data-line-number="6">  <span class="st">&quot;where I needed to be&quot;</span>)</a>
<a class="sourceLine" id="cb156-7" data-line-number="7"></a>
<a class="sourceLine" id="cb156-8" data-line-number="8"><span class="co"># some_quote in a single paragraph</span></a>
<a class="sourceLine" id="cb156-9" data-line-number="9">some_quote &lt;-<span class="st"> </span><span class="kw">paste</span>(some_quote, <span class="dt">collapse =</span> <span class="st">&quot; &quot;</span>)</a></code></pre></div>
<p>Now, say you want to display the text of <code>some_quote</code> within some pre-specified column width (e.g. width of 30). You can achieve this by applying <code>str_wrap()</code> and setting the argument <code>width = 30</code></p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb157-1" data-line-number="1"><span class="co"># display paragraph with width=30</span></a>
<a class="sourceLine" id="cb157-2" data-line-number="2"><span class="kw">cat</span>(<span class="kw">str_wrap</span>(some_quote, <span class="dt">width =</span> <span class="dv">30</span>))</a>
<a class="sourceLine" id="cb157-3" data-line-number="3"><span class="co">#&gt; I may not have gone where I</span></a>
<a class="sourceLine" id="cb157-4" data-line-number="4"><span class="co">#&gt; intended to go, but I think I</span></a>
<a class="sourceLine" id="cb157-5" data-line-number="5"><span class="co">#&gt; have ended up where I needed</span></a>
<a class="sourceLine" id="cb157-6" data-line-number="6"><span class="co">#&gt; to be</span></a></code></pre></div>
<p>Besides displaying a (long) paragraph into several lines, you may also wish to add some indentation. Here’s how you can indent the first line, as well as the following lines:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" data-line-number="1"><span class="co"># display paragraph with first line indentation of 2</span></a>
<a class="sourceLine" id="cb158-2" data-line-number="2"><span class="kw">cat</span>(<span class="kw">str_wrap</span>(some_quote, <span class="dt">width =</span> <span class="dv">30</span>, <span class="dt">indent =</span> <span class="dv">2</span>), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb158-3" data-line-number="3"><span class="co">#&gt;   I may not have gone where I</span></a>
<a class="sourceLine" id="cb158-4" data-line-number="4"><span class="co">#&gt; intended to go, but I think I</span></a>
<a class="sourceLine" id="cb158-5" data-line-number="5"><span class="co">#&gt; have ended up where I needed</span></a>
<a class="sourceLine" id="cb158-6" data-line-number="6"><span class="co">#&gt; to be</span></a>
<a class="sourceLine" id="cb158-7" data-line-number="7"></a>
<a class="sourceLine" id="cb158-8" data-line-number="8"><span class="co"># display paragraph with following lines indentation of 3</span></a>
<a class="sourceLine" id="cb158-9" data-line-number="9"><span class="kw">cat</span>(<span class="kw">str_wrap</span>(some_quote, <span class="dt">width =</span> <span class="dv">30</span>, <span class="dt">exdent =</span> <span class="dv">3</span>), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb158-10" data-line-number="10"><span class="co">#&gt; I may not have gone where I</span></a>
<a class="sourceLine" id="cb158-11" data-line-number="11"><span class="co">#&gt;    intended to go, but I think I</span></a>
<a class="sourceLine" id="cb158-12" data-line-number="12"><span class="co">#&gt;    have ended up where I needed</span></a>
<a class="sourceLine" id="cb158-13" data-line-number="13"><span class="co">#&gt;    to be</span></a></code></pre></div>
</section>
<section id="trimming-with-str_trim" class="level3">
<h3><span class="header-section-number">7.3.7</span> Trimming with <code>str_trim()</code></h3>
<p>One of the typical tasks of string processing is that of parsing a text into individual words. Usually, you end up with words that have blank spaces, called <em>whitespaces</em>, on either end of the word. In this situation, you can use the <code>str_trim()</code> function to remove any number of whitespaces at the ends of a string. Its usage requires only two arguments:</p>
<pre><code>str_trim(string, side = &quot;both&quot;)</code></pre>
<p>The first input is the <code>string</code> to be strimmed, and the second input indicates the <code>side</code> on which the whitespace will be removed.</p>
<p>Consider the following vector of strings, some of which have whitespaces either on the left, on the right, or on both sides. Here’s what <code>str_trim()</code> would do to them under different settings of <code>side</code></p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb160-1" data-line-number="1"><span class="co"># text with whitespaces</span></a>
<a class="sourceLine" id="cb160-2" data-line-number="2">bad_text &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;This&quot;</span>, <span class="st">&quot; example &quot;</span>, <span class="st">&quot;has several   &quot;</span>, <span class="st">&quot;   whitespaces &quot;</span>)</a>
<a class="sourceLine" id="cb160-3" data-line-number="3"></a>
<a class="sourceLine" id="cb160-4" data-line-number="4"><span class="co"># remove whitespaces on the left side</span></a>
<a class="sourceLine" id="cb160-5" data-line-number="5"><span class="kw">str_trim</span>(bad_text, <span class="dt">side =</span> <span class="st">&quot;left&quot;</span>)</a>
<a class="sourceLine" id="cb160-6" data-line-number="6"><span class="co">#&gt; [1] &quot;This&quot;           &quot;example &quot;       &quot;has several   &quot; &quot;whitespaces &quot;</span></a>
<a class="sourceLine" id="cb160-7" data-line-number="7"></a>
<a class="sourceLine" id="cb160-8" data-line-number="8"><span class="co"># remove whitespaces on the right side</span></a>
<a class="sourceLine" id="cb160-9" data-line-number="9"><span class="kw">str_trim</span>(bad_text, <span class="dt">side =</span> <span class="st">&quot;right&quot;</span>)</a>
<a class="sourceLine" id="cb160-10" data-line-number="10"><span class="co">#&gt; [1] &quot;This&quot;           &quot; example&quot;       &quot;has several&quot;    &quot;   whitespaces&quot;</span></a>
<a class="sourceLine" id="cb160-11" data-line-number="11"></a>
<a class="sourceLine" id="cb160-12" data-line-number="12"><span class="co"># remove whitespaces on both sides</span></a>
<a class="sourceLine" id="cb160-13" data-line-number="13"><span class="kw">str_trim</span>(bad_text, <span class="dt">side =</span> <span class="st">&quot;both&quot;</span>)</a>
<a class="sourceLine" id="cb160-14" data-line-number="14"><span class="co">#&gt; [1] &quot;This&quot;        &quot;example&quot;     &quot;has several&quot; &quot;whitespaces&quot;</span></a></code></pre></div>
</section>
<section id="word-extraction-with-word" class="level3">
<h3><span class="header-section-number">7.3.8</span> Word extraction with <code>word()</code></h3>
<p>We end this chapter describing the <code>word()</code> function that is designed to extract words from a sentence:</p>
<pre><code>word(string, start = 1L, end = start, sep = fixed(&quot; &quot;))</code></pre>
<p>The way in which you use <code>word()</code> is by passing it a <code>string</code>, together with a <code>start</code> position of the first word to extract, and an <code>end</code> position of the last word to extract. By default, the separator <code>sep</code> used between words is a single space.</p>
<p>Let’s see some examples:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" data-line-number="1"><span class="co"># some sentence</span></a>
<a class="sourceLine" id="cb162-2" data-line-number="2">change &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Be the change&quot;</span>, <span class="st">&quot;you want to be&quot;</span>)</a>
<a class="sourceLine" id="cb162-3" data-line-number="3"></a>
<a class="sourceLine" id="cb162-4" data-line-number="4"><span class="co"># extract first word</span></a>
<a class="sourceLine" id="cb162-5" data-line-number="5"><span class="kw">word</span>(change, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb162-6" data-line-number="6"><span class="co">#&gt; [1] &quot;Be&quot;  &quot;you&quot;</span></a>
<a class="sourceLine" id="cb162-7" data-line-number="7"></a>
<a class="sourceLine" id="cb162-8" data-line-number="8"><span class="co"># extract second word</span></a>
<a class="sourceLine" id="cb162-9" data-line-number="9"><span class="kw">word</span>(change, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb162-10" data-line-number="10"><span class="co">#&gt; [1] &quot;the&quot;  &quot;want&quot;</span></a>
<a class="sourceLine" id="cb162-11" data-line-number="11"></a>
<a class="sourceLine" id="cb162-12" data-line-number="12"><span class="co"># extract last word</span></a>
<a class="sourceLine" id="cb162-13" data-line-number="13"><span class="kw">word</span>(change, <span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb162-14" data-line-number="14"><span class="co">#&gt; [1] &quot;change&quot; &quot;be&quot;</span></a>
<a class="sourceLine" id="cb162-15" data-line-number="15"></a>
<a class="sourceLine" id="cb162-16" data-line-number="16"><span class="co"># extract all but the first words</span></a>
<a class="sourceLine" id="cb162-17" data-line-number="17"><span class="kw">word</span>(change, <span class="dv">2</span>, <span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb162-18" data-line-number="18"><span class="co">#&gt; [1] &quot;the change&quot; &quot;want to be&quot;</span></a></code></pre></div>
<p><code>stringr</code> has more functions but we’ll discuss them in the chapters about <a href="#regex1">regular expressions</a>.</p>

</section>
</section>
</section>
<section id="basic-manipulation-examples" class="level1">
<h1><span class="header-section-number">8</span> Basic Manipulation Examples</h1>
<section id="introduction-4" class="level2">
<h2><span class="header-section-number">8.1</span> Introduction</h2>
<p>This chapter provides more elaborated examples than the simple demos presented so far. The idea is to show you less abstract scenarios and cases where you could apply the functions and concepts covered so far.</p>
<section id="example-names-of-files" class="level3">
<h3><span class="header-section-number">8.1.1</span> Example: Names of files</h3>
<p>Imagine that you need to generate the names of 10 data <code>.csv</code> files. All the files have the same prefix name but each of them has a different number: <code>file1.csv</code>, <code>file2.csv</code>, … , <code>file10.csv</code>.</p>
<p>There are several ways in which you could generate a character vector with these names. One naive option is to manually type those names and form a vector with <code>c()</code></p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" data-line-number="1"><span class="kw">c</span>(<span class="st">&#39;file1.csv&#39;</span>, <span class="st">&#39;file2.csv&#39;</span>, <span class="st">&#39;file3.csv&#39;</span>)</a>
<a class="sourceLine" id="cb163-2" data-line-number="2"><span class="co">#&gt; [1] &quot;file1.csv&quot; &quot;file2.csv&quot; &quot;file3.csv&quot;</span></a></code></pre></div>
<p>But that’s not very efficient. Just think about the time it would take you to create a vector with 100 files. A better alternative is to use the vectorized nature of <code>paste()</code></p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" data-line-number="1"><span class="kw">paste</span>(<span class="st">&#39;file&#39;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="st">&#39;.csv&#39;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb164-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;file1.csv&quot;  &quot;file2.csv&quot;  &quot;file3.csv&quot;  &quot;file4.csv&quot;  &quot;file5.csv&quot; </span></a>
<a class="sourceLine" id="cb164-3" data-line-number="3"><span class="co">#&gt;  [6] &quot;file6.csv&quot;  &quot;file7.csv&quot;  &quot;file8.csv&quot;  &quot;file9.csv&quot;  &quot;file10.csv&quot;</span></a></code></pre></div>
<p>Or similarly with <code>paste0()</code></p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" data-line-number="1"><span class="kw">paste0</span>(<span class="st">&#39;file&#39;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="st">&#39;.csv&#39;</span>)</a>
<a class="sourceLine" id="cb165-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;file1.csv&quot;  &quot;file2.csv&quot;  &quot;file3.csv&quot;  &quot;file4.csv&quot;  &quot;file5.csv&quot; </span></a>
<a class="sourceLine" id="cb165-3" data-line-number="3"><span class="co">#&gt;  [6] &quot;file6.csv&quot;  &quot;file7.csv&quot;  &quot;file8.csv&quot;  &quot;file9.csv&quot;  &quot;file10.csv&quot;</span></a></code></pre></div>
</section>
<section id="example-valid-color-names" class="level3">
<h3><span class="header-section-number">8.1.2</span> Example: Valid Color Names</h3>
<p>R comes with the function <code>colors()</code> that returns a vector with the names (in English) of 657 colors available in R. How would you write a function <code>is_color()</code> to test if a given name—in English—is a valid R color. If the provided name is a valid R color, <code>is_color()</code> should return <code>TRUE</code>. If the provided name is not a valid R color <code>is_color()</code> should return <code>FALSE</code>.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" data-line-number="1">is_color &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb166-2" data-line-number="2">  x <span class="op">%in%</span><span class="st"> </span><span class="kw">colors</span>()</a>
<a class="sourceLine" id="cb166-3" data-line-number="3">}</a></code></pre></div>
<p>Lets test it:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb167-1" data-line-number="1"><span class="kw">is_color</span>(<span class="st">&#39;yellow&#39;</span>)  <span class="co"># TRUE</span></a>
<a class="sourceLine" id="cb167-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb167-3" data-line-number="3"></a>
<a class="sourceLine" id="cb167-4" data-line-number="4"><span class="kw">is_color</span>(<span class="st">&#39;blu&#39;</span>)     <span class="co"># FALSE</span></a>
<a class="sourceLine" id="cb167-5" data-line-number="5"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb167-6" data-line-number="6"></a>
<a class="sourceLine" id="cb167-7" data-line-number="7"><span class="kw">is_color</span>(<span class="st">&#39;turkuiose&#39;</span>) <span class="co"># FALSE</span></a>
<a class="sourceLine" id="cb167-8" data-line-number="8"><span class="co">#&gt; [1] FALSE</span></a></code></pre></div>
<p>Another possible way to write <code>is_color()</code> is comparing if <code>any()</code> element of <code>colors()</code> equals the provided name:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" data-line-number="1">is_color2 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb168-2" data-line-number="2">  <span class="kw">any</span>(<span class="kw">colors</span>() <span class="op">==</span><span class="st"> </span>x)</a>
<a class="sourceLine" id="cb168-3" data-line-number="3">}</a></code></pre></div>
<p>Test it:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb169-1" data-line-number="1"><span class="kw">is_color2</span>(<span class="st">&#39;yellow&#39;</span>)  <span class="co"># TRUE</span></a>
<a class="sourceLine" id="cb169-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb169-3" data-line-number="3"></a>
<a class="sourceLine" id="cb169-4" data-line-number="4"><span class="kw">is_color2</span>(<span class="st">&#39;blu&#39;</span>)     <span class="co"># FALSE</span></a>
<a class="sourceLine" id="cb169-5" data-line-number="5"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb169-6" data-line-number="6"></a>
<a class="sourceLine" id="cb169-7" data-line-number="7"><span class="kw">is_color2</span>(<span class="st">&#39;turkuiose&#39;</span>) <span class="co"># FALSE</span></a>
<a class="sourceLine" id="cb169-8" data-line-number="8"><span class="co">#&gt; [1] FALSE</span></a></code></pre></div>
</section>
<section id="example-me-and-you-plot" class="level3">
<h3><span class="header-section-number">8.1.3</span> Example: Me and You plot</h3>
<p>This example is not really about data analysis or something serious, it is instead a fun project in which you get to apply what we have covered so far. The idea is to produce a plot with some text on it. But not any kind of text. The plot is intended to be a postcard—for Saint Valentine’s day. With this kind of tutorial, you should be able to make youw own plot, print it and give it to your significant other.</p>
<p>The idea is to make a chart with your name and the name of your significant other, adding a touch of randomness in the location of the text, the sizes, and the colors.</p>
<p>First we generate the x-y coordinates. We’ll use 100 points, and set the random seed to 333:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" data-line-number="1"><span class="co"># random seed</span></a>
<a class="sourceLine" id="cb170-2" data-line-number="2"><span class="kw">set.seed</span>(<span class="dv">333</span>)</a>
<a class="sourceLine" id="cb170-3" data-line-number="3"></a>
<a class="sourceLine" id="cb170-4" data-line-number="4"><span class="co"># x-y coordinates</span></a>
<a class="sourceLine" id="cb170-5" data-line-number="5">n &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb170-6" data-line-number="6">x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(n)</a>
<a class="sourceLine" id="cb170-7" data-line-number="7">y &lt;-<span class="st"> </span><span class="kw">rnorm</span>(n, <span class="dv">1</span>, <span class="dv">2</span>)</a></code></pre></div>
<p>The first step is to produce a very basic-raw plot (nothing fancy). We use <code>plot()</code> for this purpose:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" data-line-number="1"><span class="kw">plot</span>(x, y)</a></code></pre></div>
<p>This just produces a scatter diagram with a 100 points on it. The following step consists of replacing the dots by some text: your name and the one of your significant other. To hide the dots, we set the parameter <code>type = &quot;n&quot;</code>, which means that we don’t want anything to be plotted. To show the text, we use the low level plotting function <code>text()</code>. We use the same coordinates, but this time we specify the displayed <code>labels</code>:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" data-line-number="1"><span class="kw">plot</span>(x, y, <span class="dt">type =</span> <span class="st">&quot;n&quot;</span>)</a>
<a class="sourceLine" id="cb172-2" data-line-number="2"><span class="kw">text</span>(x, y, <span class="dt">labels =</span> <span class="st">&quot;me &amp; you&quot;</span>)</a></code></pre></div>
<p>Again, this is a very preliminary plot; something basic that allows us to start getting a feeling of how the chart looks like. The second step is to change the background color. One way to do this is by specifying the <code>bg</code> graphical parameter inside the <code>par()</code> function:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb173-1" data-line-number="1"><span class="co"># graphical parameters</span></a>
<a class="sourceLine" id="cb173-2" data-line-number="2">op &lt;-<span class="st"> </span><span class="kw">par</span>(<span class="dt">bg =</span> <span class="st">&quot;gray10&quot;</span>)</a>
<a class="sourceLine" id="cb173-3" data-line-number="3"><span class="co"># plot text</span></a>
<a class="sourceLine" id="cb173-4" data-line-number="4"><span class="kw">plot</span>(x, y, <span class="dt">type =</span> <span class="st">&quot;n&quot;</span>)</a>
<a class="sourceLine" id="cb173-5" data-line-number="5"><span class="kw">text</span>(x, y, </a>
<a class="sourceLine" id="cb173-6" data-line-number="6">     <span class="dt">labels =</span> <span class="st">&quot;me &amp; you&quot;</span>,</a>
<a class="sourceLine" id="cb173-7" data-line-number="7">     <span class="dt">col =</span> <span class="st">&quot;white&quot;</span>)</a>
<a class="sourceLine" id="cb173-8" data-line-number="8"><span class="co"># reset default parameters</span></a>
<a class="sourceLine" id="cb173-9" data-line-number="9"><span class="kw">par</span>(op)</a></code></pre></div>
<p><img src="_main_files/figure-html/me-and-you2-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p><code>par()</code> has default settings. Everytime you call <code>par()</code> and change one of the associated parameters, the subsequent plots will be displayed with those values. To set parameters in a temporary way, you can assign them to an object: i.e. <code>op</code>. After the plot is produced, we reset the default graphical parameters with the instruction <code>par(op)</code>.</p>
<p>We are getting closer to the desired look of the postcard. The final stage is to add some color to the text, and change their size. The size of the labels will also be random with a uniform distribution.</p>
<p>R provides several ways to specify colors. In this example we will use the <code>hsv()</code> function (i.e. hue-saturation-value). This function requires three parameters: hue (color), saturation, and value. Hues are specified with a range from 0 to 1. We generate some random numbers in the interval 0.85 - 0.95 to get some hues red, pink, fuchsia colors. <code>hsv()</code> also takes the optional parameters <code>alpha</code> to determined the alpha transparency.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" data-line-number="1"><span class="co"># text size</span></a>
<a class="sourceLine" id="cb174-2" data-line-number="2">sizes &lt;-<span class="st"> </span><span class="kw">runif</span>(n, <span class="fl">0.5</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb174-3" data-line-number="3"></a>
<a class="sourceLine" id="cb174-4" data-line-number="4"><span class="co"># text color</span></a>
<a class="sourceLine" id="cb174-5" data-line-number="5">hues &lt;-<span class="st"> </span><span class="kw">runif</span>(n, <span class="fl">0.85</span>, <span class="fl">0.95</span>)</a>
<a class="sourceLine" id="cb174-6" data-line-number="6">alphas &lt;-<span class="st"> </span><span class="kw">runif</span>(n, <span class="fl">0.1</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb174-7" data-line-number="7"></a>
<a class="sourceLine" id="cb174-8" data-line-number="8"></a>
<a class="sourceLine" id="cb174-9" data-line-number="9">op &lt;-<span class="st"> </span><span class="kw">par</span>(<span class="dt">bg =</span> <span class="st">&quot;gray10&quot;</span>, <span class="dt">mar =</span> <span class="kw">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>))</a>
<a class="sourceLine" id="cb174-10" data-line-number="10"><span class="kw">plot</span>(x, y, <span class="dt">type =</span> <span class="st">&quot;n&quot;</span>, <span class="dt">axes =</span> <span class="ot">FALSE</span>, </a>
<a class="sourceLine" id="cb174-11" data-line-number="11">     <span class="dt">xlab =</span> <span class="st">&#39;&#39;</span>, <span class="dt">ylab =</span> <span class="st">&#39;&#39;</span>)</a>
<a class="sourceLine" id="cb174-12" data-line-number="12"><span class="kw">text</span>(x, y, </a>
<a class="sourceLine" id="cb174-13" data-line-number="13">     <span class="dt">labels =</span> <span class="st">&quot;me &amp; you&quot;</span>, </a>
<a class="sourceLine" id="cb174-14" data-line-number="14">     <span class="dt">font =</span> <span class="dv">3</span>, </a>
<a class="sourceLine" id="cb174-15" data-line-number="15">     <span class="dt">col =</span> <span class="kw">hsv</span>(hues, <span class="dv">1</span>, <span class="dv">1</span>, alphas),</a>
<a class="sourceLine" id="cb174-16" data-line-number="16">     <span class="dt">cex =</span> sizes)</a>
<a class="sourceLine" id="cb174-17" data-line-number="17"><span class="kw">par</span>(op)</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-59-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>To save the image, call <code>pdf()</code>. To give the image the dimensions of a standard postcard, you can specify <code>width = 5</code> and <code>height = 3.5</code>, that is, 5 inches wide and 3.5 inches tall (you can choose other dimensions if you want):</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" data-line-number="1"><span class="kw">pdf</span>(<span class="dt">file =</span> <span class="st">&quot;figure/me-and-you3.pdf&quot;</span>, <span class="dt">width =</span> <span class="dv">5</span>, <span class="dt">height =</span> <span class="fl">3.5</span>)</a>
<a class="sourceLine" id="cb175-2" data-line-number="2">op &lt;-<span class="st"> </span><span class="kw">par</span>(<span class="dt">bg =</span> <span class="st">&quot;gray10&quot;</span>, </a>
<a class="sourceLine" id="cb175-3" data-line-number="3">          <span class="dt">mar =</span> <span class="kw">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>))</a>
<a class="sourceLine" id="cb175-4" data-line-number="4"><span class="kw">plot</span>(x, y, <span class="dt">type =</span> <span class="st">&quot;n&quot;</span>, <span class="dt">axes =</span> <span class="ot">FALSE</span>, </a>
<a class="sourceLine" id="cb175-5" data-line-number="5">     <span class="dt">xlab =</span> <span class="st">&#39;&#39;</span>, <span class="dt">ylab =</span> <span class="st">&#39;&#39;</span>)</a>
<a class="sourceLine" id="cb175-6" data-line-number="6"><span class="kw">text</span>(x, y, </a>
<a class="sourceLine" id="cb175-7" data-line-number="7">     <span class="dt">labels =</span> <span class="st">&quot;me &amp; you&quot;</span>, </a>
<a class="sourceLine" id="cb175-8" data-line-number="8">     <span class="dt">font =</span> <span class="dv">3</span>, </a>
<a class="sourceLine" id="cb175-9" data-line-number="9">     <span class="dt">col =</span> <span class="kw">hsv</span>(hues, <span class="dv">1</span>, <span class="dv">1</span>, alphas),</a>
<a class="sourceLine" id="cb175-10" data-line-number="10">     <span class="dt">cex =</span> sizes)</a>
<a class="sourceLine" id="cb175-11" data-line-number="11"><span class="kw">par</span>(op)</a>
<a class="sourceLine" id="cb175-12" data-line-number="12"><span class="kw">dev.off</span>()</a></code></pre></div>
<p>If you save the image in png format, you could also use it as a wallpaper for your computer:</p>
<figure>
<img src="images/me-you-wallpaper.png" alt="A wallpaper chart for your significant other" /><figcaption>A wallpaper chart for your significant other</figcaption>
</figure>

</section>
</section>
</section>
<section id="part-regex" class="level1 unnumbered">
<h1>(PART) Regex</h1>
</section>
<section id="regex1" class="level1">
<h1><span class="header-section-number">9</span> Regular Expressions</h1>
<section id="introduction-5" class="level2">
<h2><span class="header-section-number">9.1</span> Introduction</h2>
<p>So far you have learned some basic and intermediate functions for handling and working with text in R. These are very useful functions and they allow you to do many interesting things. However, if you truly want to unleash the power of strings manipulation, you need to take things to the next level and learn about <em>regular expressions</em>.</p>
</section>
<section id="what-are-regular-expressions" class="level2">
<h2><span class="header-section-number">9.2</span> What are Regular Expressions?</h2>
<p>The name “Regular Expression” does not say much. However, regular expressions are all about text. Think about how much text is all around you in our modern digital world: email, text messages, news articles, blogs, computer code, contacts in your address book—all these things are text. Regular expressions are a tool that allows us to work with these text by describing text patterns.</p>
<p>A <strong>regular expression</strong> is a special text string for describing a certain amount of text. This “certain amount of text” receives the formal name of <em>pattern</em>. In other words, a regular expression is a set of symbols that describes a text pattern. More formally we say that a regular expression is a <em>pattern that describes a set of strings</em>. In addition to this first meaning, the term regular expression can also be used in a slightly different but related way: as the formal language of these symbols that needs to be interpreted by a regular expression processor. Because the term “regular expression” is rather long, most people use the word <strong>regex</strong> as a shortcut term. And you will even find the plural <em>regexes</em>.</p>
<p>It is also worth noting what regular expressions are not. They’re not a programming language. They may look like some sort of programming language because they are a formal language with a defined set of rules that gets a computer to do what we want it to do. However, there are no variables in regex and you can’t do computations like adding 1 + 1.</p>
<section id="what-are-regular-expressions-used-for" class="level3">
<h3><span class="header-section-number">9.2.1</span> What are Regular Expressions used for?</h3>
<p>We use regular expressions to work with text. Some of its common uses involve testing if a phone number has the correct number of digits, if a date follows a specifc format (e.g. mm/dd/yy), if an email address is in a valid format, or if a password has numbers and special characters. You could also use regular expressions to search a document for <em>gray</em> spelt either as “gray” or “grey”. You could search a document and replace all occurrences of “Will”, “Bill”, or “W.” with William. Or you could count the number of times in a document that the word “analysis” is immediately preceded by the words “data”, “computer” or “statistical” only in those cases. You could use it to convert a comma-delimited file into a tab-delimited file or to find duplicate words in a text.</p>
<p>In each of these cases, you are going to use a regular expression to write up a description of what you are looking for using symbols. In the case of a phone number, that pattern might be three digits followed by a dash, followed by three digits and another dash, followed by four digits. Once you have defined a pattern then the regex processor will use our description to return matching results, or in the case of the test, to return true or false for whether or not it matched.</p>
</section>
<section id="a-word-of-caution-about-regex" class="level3">
<h3><span class="header-section-number">9.2.2</span> A word of caution about regex</h3>
<p>If you have never used regular expressions before, their syntax may seem a bit scary and cryptic. You will see strings formed by a bunch of letters, digits, and other punctuation symbols combined in seemingly nonsensical ways. As with any other topic that has to do with programming and data analysis, learning the principles of regex and becoming fluent in defining regex patterns takes time and requires a lot of practice. The more you use them, the better you will become at defining more complex patterns and getting the most out of them.</p>
<p>Regular Expressions is a wide topic and there are books entirely dedicated to this subject. The material offered in this book is not extensive and there are many subtopics that I don’t cover here. Despite the initial barriers that you may encounter when entering the regex world, the pain and frustration of learning this tool will payoff in your data science career.</p>
</section>
<section id="regular-expressions-in-r" class="level3">
<h3><span class="header-section-number">9.2.3</span> Regular Expressions in R</h3>
<p>Tools for working with regular expressions can be found in virtually all scripting languages (e.g. Perl, Python, Java, Ruby, etc). R has some functions for working with regular expressions but it does not provide the wide range of capabilities that other scripting languages do. Nevertheless, they can take you very far with some workarounds (and a bit of patience).</p>
<p>One of the best tools you must have in your toolkit is the R package <code>&quot;stringr&quot;</code> (by Hadley Wickham). It provides functions that have similar behavior to those of the base distribution in R. But it also provides many more facilities for working with regular expressions.</p>
</section>
</section>
<section id="regex-basics" class="level2">
<h2><span class="header-section-number">9.3</span> Regex Basics</h2>
<p>The main purpose of working with regular expressions is to describe patterns that are used to match against text strings. Simply put, working with regular expressions is nothing more than <strong>pattern matching</strong>. The result of a match is either successful or not.</p>
<p>The simplest version of pattern matching is to search for one occurrence (or all occurrences) of some specific characters in a string. For example, we might want to search for the word <code>&quot;programming&quot;</code> in a large text document, or we might want to search for all occurrences of the string <code>&quot;apply&quot;</code> in a series of files containing R scripts.</p>
<p>Typically, regular expression patterns consist of a combination of alphanumeric characters as well as special characters. A regex pattern can be as simple as a single character, or it can be formed by several characters with a more complex structure. In all cases we construct regular expressions much in the same form in which we construct arithmetic expressions, by using various operators to combine smaller expressions.</p>
</section>
<section id="matching-literal-characters" class="level2">
<h2><span class="header-section-number">9.4</span> Matching Literal Characters</h2>
<p>We’re going to start with the simplest match of all: a literal character. A literal character match is one in which a given character such as the letter <code>&quot;R&quot;</code> matches the letter <em>R</em>. This type of match is the most basic type of regular expression operation: just matching plain text.</p>
<p>The following examples are extremely basic but they will help you get a good understanding of regex.</p>
<p>Consider the following text stored in a character vector <code>this_book</code>:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb176-1" data-line-number="1">this_book &lt;-<span class="st"> &#39;This book is mine&#39;</span></a></code></pre></div>
<p>The first regular expression we are going to work with is <code>&quot;book&quot;</code>. This pattern is formed by a letter <em>b</em>, followed by a letter <em>o</em>, followed by another letter <em>o</em>, followed by a letter <em>k</em>. As you may guess, this pattern matches the word <em>book</em> in the character vector <code>this_book</code>. To have a visual representation of the actual pattern that is matched, you should use the function <code>str_view()</code> from the package <code>&quot;stringr&quot;</code> (you may need to upgrade to a recent version of RStudio):</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb177-1" data-line-number="1"><span class="kw">str_view</span>(this_book, <span class="st">&#39;book&#39;</span>)</a></code></pre></div>
<p>As you can tell, the pattern <code>&quot;book&quot;</code> doesn’t match the entire content in the vector <code>this_book</code>; it just matches those four letters.</p>
<p>It may seem really simple but there are a couple of details to be highlighted. The first is that regex searches are case sensitive by default. This means that the pattern <code>&quot;Book&quot;</code> would not match <em>book</em> in <code>this_book</code>.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" data-line-number="1"><span class="kw">str_view</span>(<span class="st">&quot;This Book is mine.&quot;</span>, <span class="st">&#39;book&#39;</span>)</a></code></pre></div>
<p>You can change the matching task so that it is case insensitive but we will talk about it later.</p>
<p>Let’s add more text to <code>this_book</code>:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb179-1" data-line-number="1">this_book &lt;-<span class="st"> &#39;This book is mine. I wrote this book with bookdown.&#39;</span></a></code></pre></div>
<p>Let’s use <code>str_view()</code> to see what pieces of text are matched in <code>this_book</code> with the pattern <code>&quot;book&quot;</code>:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" data-line-number="1"><span class="kw">str_view</span>(this_book, <span class="st">&quot;book&quot;</span>)</a></code></pre></div>
<p>As you can tell, only the first occurrence of <em>book</em> was matched. This is a common behavior of regular expressions in which they return a match as fast possible. You can think of this behavior as the “eager principle”, that is, regular expressions are eager and they will give preference to an early match. This is a minor but important detail and we will come back to this behavior of regular expressions.</p>
<p>All the letters and digits in the English alphabet are considered literal characters. They are called <em>literal</em> because they match themselves.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb181-1" data-line-number="1">str_view &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;I had 3 quesadillas for lunch&quot;</span>, <span class="st">&quot;3&quot;</span>)</a></code></pre></div>
<p>Here is another example:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" data-line-number="1">transport &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;car&quot;</span>, <span class="st">&quot;bike&quot;</span>, <span class="st">&quot;boat&quot;</span>, <span class="st">&quot;airplane&quot;</span>)</a></code></pre></div>
<p>The first pattern to test is the letter <code>&quot;a&quot;</code>:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb183-1" data-line-number="1"><span class="kw">str_view</span>(transport, <span class="st">&quot;a&quot;</span>)</a></code></pre></div>
<p>When you execute the previous command, you should be able to see that the letter <code>&quot;a&quot;</code> is highlighted in the words <em>car</em>, <em>boat</em> and <em>airplane</em>.</p>
</section>
<section id="metacharacters" class="level2">
<h2><span class="header-section-number">9.5</span> Metacharacters</h2>
<p>The next topic that you should learn about regular expressions has to do with <strong>metacharacters</strong>. As you just learned, the most basic type of regular expressions are the literal characters which are characters that match themselves. However, not all characters match themselves. Any character that is not a literal character is a metacharacter. This type of characters have a special meaning and they allow you to transform literal characters in very powerful ways.</p>
<p>Below is the list of metacharacters in <em>Extended Regular Expressions</em> (EREs):</p>
<pre><code>.   \   |   (   )   [   ]   {   }   $   -    ^   *   +   ?</code></pre>
<ul>
<li>the dot <code>.</code></li>
<li>the backslash <code>\</code></li>
<li>the bar <code>|</code></li>
<li>left or opening parenthesis <code>(</code></li>
<li>right or closing parenthesis <code>)</code></li>
<li>left or opening bracket <code>[</code></li>
<li>right or closing bracket <code>]</code></li>
<li>left or opening brace <code>{</code></li>
<li>right or closing brace <code>}</code></li>
<li>the dollar sign <code>$</code></li>
<li>the dash, hyphen or minus sign <code>-</code></li>
<li>the caret or hat <code>^</code></li>
<li>the star or asterisk <code>*</code></li>
<li>the plus sign <code>+</code></li>
<li>the question mark <code>?</code></li>
</ul>
<p>We’re going to be working with these characters throughout the rest of the book. Simply put, everything else that you need to know about regular expressions besides literal characters is how these metacharacters work. The good news is that there are only a few metacharacters to learn. The bad news is that some metacharacters can have more than one meaning. And learning those meanings definitely takes time and requires hours of practice. The meaning of the metacharacters greatly depend on the context in which you use them, how you use them, and where you use them. If it wasn’t enough complication, it is also the metacharacters that have variation between the different regex engines.</p>
<section id="the-wild-metacharacter" class="level3">
<h3><span class="header-section-number">9.5.1</span> The Wild Metacharacter</h3>
<p>The first metacharacter you should learn about is the dot or period <code>&quot;.&quot;</code>, better known as the <strong>wild</strong> metacharacter. This metacharacter is used to match <strong>ANY</strong> character except for a new line.</p>
<p>For example, consider the pattern <code>&quot;p.n&quot;</code>, that is, <em>p wildcard n</em>. This pattern will match <em>pan</em>, <em>pen</em>, and <em>pin</em>, but it will not match <em>prun</em> or <em>plan</em>. The dot only matches one single character.</p>
<p>Let’s see another example using the vector <code>c(&quot;not&quot;, &quot;note&quot;, &quot;knot&quot;, &quot;nut&quot;)</code> and the pattern <code>&quot;n.t&quot;</code></p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb185-1" data-line-number="1">not &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;not&quot;</span>, <span class="st">&quot;note&quot;</span>, <span class="st">&quot;knot&quot;</span>, <span class="st">&quot;nut&quot;</span>)</a>
<a class="sourceLine" id="cb185-2" data-line-number="2"></a>
<a class="sourceLine" id="cb185-3" data-line-number="3"><span class="kw">str_view</span>(not, <span class="st">&quot;n.t&quot;</span>)</a></code></pre></div>
<p>the pattern <code>&quot;n.t&quot;</code> matches <em>not</em> in the first three elements, and <em>nut</em> in the last element.</p>
<p>If you specify a pattern <code>&quot;no.&quot;</code>, then just the first three elements in <code>not</code> will be matched.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb186-1" data-line-number="1"><span class="kw">str_view</span>(not, <span class="st">&quot;no.&quot;</span>)</a></code></pre></div>
<p>And if you define a pattern <code>&quot;kn.&quot;</code>, then only the third element is matched.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb187-1" data-line-number="1"><span class="kw">str_view</span>(not, <span class="st">&quot;kn.&quot;</span>)</a></code></pre></div>
<p>The wild metacharacter is probably the most used metacharacter, and it is also the most abused one, being the source of many mistakes. Here is a basic example with the regular expression formed by <code>&quot;5.00&quot;</code>. If you think that this pattern will match five with two decimal places after it, you will be surprised to find out that it not only matches <em>5.00</em> but also <em>5100</em> and <em>5-00</em>. Why? Because <code>&quot;.&quot;</code> is the metacharacter that matches absolutely anything. You will learn how to fix this mistake in the next section, but it illustrates an important fact about regular expressions: the challenge consists of matching what you want, but also in matching only what you want. You don’t want to specify a pattern that is overly permissive. You want to find the thing you’re looking for, but only that thing.</p>
</section>
<section id="escaping-metacharacters" class="level3">
<h3><span class="header-section-number">9.5.2</span> Escaping metacharacters</h3>
<p>What if you just want to match the character dot? For example, say you have the following vector:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb188-1" data-line-number="1">fives &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;5.00&quot;</span>, <span class="st">&quot;5100&quot;</span>, <span class="st">&quot;5-00&quot;</span>, <span class="st">&quot;5 00&quot;</span>)</a></code></pre></div>
<p>If you try the pattern <code>&quot;5.00&quot;</code>, it will match all of the elements in <code>fives</code>.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb189-1" data-line-number="1"><span class="kw">str_view</span>(fives, <span class="st">&quot;5.00&quot;</span>)</a></code></pre></div>
<p>To actually match the dot character, what you need to do is <strong>escape</strong> the metacharacter. In most languages, the way to escape a metacharacter is by adding a backslash character in front of the metacharacter: <code>&quot;\.&quot;</code>. When you use a backslash in front of a metacharacter you are “escaping” the character, this means that the character no longer has a special meaning, and it will match itself.</p>
<p>However, R is a bit different. Instead of using a backslash you have to use two backslashes: <code>&quot;5\\.00&quot;</code>. This is because the backslash <code>&quot;\&quot;</code>, which is another metacharacter, has a special meaning in R. Therefore, to match just the element <em>5.00</em> in <code>fives</code> in R, you do it like so:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" data-line-number="1"><span class="kw">str_view</span>(fives, <span class="st">&quot;5</span><span class="ch">\\</span><span class="st">.00&quot;</span>)</a></code></pre></div>

</section>
</section>
</section>
<section id="character-sets" class="level1">
<h1><span class="header-section-number">10</span> Character Sets</h1>
<p>In this chapter we will talk about character sets. You will learn about a couple of more metacharacters, the opening and closing brackets <code>[ ]</code>, that will help you define a character set.</p>
<p>These square brackets indicate a character set which will match any one of the various characters that are inside the set. Keep in mind that a character set will match only one character. The order of the characters inside the set does not matter; what matter is just the presence of the characters inside the brackets. So for example if you have a set defined by <code>&quot;[AEIOU]&quot;</code>, that will match any one upper case vowel.</p>
<section id="defining-character-sets" class="level2">
<h2><span class="header-section-number">10.1</span> Defining character sets</h2>
<p>Consider the following pattern that includes a character set: <code>&quot;p[aeiou]n&quot;</code>, and a vector with the words <em>pan</em>, <em>pen</em>, and <em>pin</em>:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb191-1" data-line-number="1">pns &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;pan&#39;</span>, <span class="st">&#39;pen&#39;</span>, <span class="st">&#39;pin&#39;</span>, <span class="st">&#39;pon&#39;</span>, <span class="st">&#39;pun&#39;</span>)</a>
<a class="sourceLine" id="cb191-2" data-line-number="2"></a>
<a class="sourceLine" id="cb191-3" data-line-number="3"><span class="kw">str_view</span>(pns, <span class="st">&quot;p[aeiou]n&quot;</span>)</a></code></pre></div>
<p>The set <code>&quot;p[aeiou]n&quot;</code> matches all elements in <code>pns</code>. Now let’s use the same set with another vector <code>pnx</code>:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" data-line-number="1">pnx &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;pan&#39;</span>, <span class="st">&#39;pen&#39;</span>, <span class="st">&#39;pin&#39;</span>, <span class="st">&#39;p0n&#39;</span>, <span class="st">&#39;p.n&#39;</span>, <span class="st">&#39;p1n&#39;</span>, <span class="st">&#39;paun&#39;</span>)</a>
<a class="sourceLine" id="cb192-2" data-line-number="2"></a>
<a class="sourceLine" id="cb192-3" data-line-number="3"><span class="kw">str_view</span>(pnx, <span class="st">&quot;p[aeiou]n&quot;</span>)</a></code></pre></div>
<p>As you can tell, this time only the first three elements in <code>pnx</code> are matched. Notice also that <em>paun</em> is not matched. This is because the character set matches only one character, either <em>a</em> or <em>u</em> but not <em>au</em>.</p>
<p>If you are interested in matching all capital letters in English, you can define a set formed as:</p>
<pre><code>[ABCDEFGHIJKLMNOPQRSTUVWXYZ]</code></pre>
<p>Likewise, you can define a set with only lower case letters in English:</p>
<pre><code>[abcdefghijklmnopqrstuvwxyz]</code></pre>
<p>If you are interested in matching any digit, you can also specify a character set like this:</p>
<pre><code>[0123456789]</code></pre>
</section>
<section id="character-ranges" class="level2">
<h2><span class="header-section-number">10.2</span> Character ranges</h2>
<p>The previous examples that show character sets containing all the capital letters or all lower case letters are very convenient but require a lot of typing. <strong>Character ranges</strong> are going to help you solve that problem, by giving you a convenient shortcut based on the dash metacharacter <code>&quot;-&quot;</code> to indicate a range of characters. A character range consists of a character set with two characters separated by a dash or minus <code>&quot;-&quot;</code> sign.</p>
<p>Let’s see how you can reexpress the examples in the previous section as character ranges. The set of all digits can be expressed as a character range using the following pattern:</p>
<pre><code>[0-9]</code></pre>
<p>Likewise, the set of all lower case letters <em>abcd…xyz</em> is compactly represented with the character range:</p>
<pre><code>[a-z]</code></pre>
<p>And the character set of all upper case letters <em>ABD…XYZ</em> is formed by</p>
<pre><code>[A-Z]</code></pre>
<p>Note that the dash is only a metacharacter when it is inside a character set; outside the character set it is just a literal dash.</p>
<p>So how do you use character range? To illustrate the concept of character ranges let’s create a <code>basic</code> vector with some simple strings, and see what the different ranges match:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb199-1" data-line-number="1">basic &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>, <span class="st">&#39;a&#39;</span>, <span class="st">&#39;A&#39;</span>, <span class="st">&#39;&amp;&#39;</span>, <span class="st">&#39;-&#39;</span>, <span class="st">&#39;^&#39;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" data-line-number="1"><span class="co"># digits</span></a>
<a class="sourceLine" id="cb200-2" data-line-number="2"><span class="kw">str_view</span>(basic, <span class="st">&#39;[0-9]&#39;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb201-1" data-line-number="1"><span class="co"># lower case letters</span></a>
<a class="sourceLine" id="cb201-2" data-line-number="2"><span class="kw">str_view</span>(basic, <span class="st">&#39;[a-z]&#39;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb202-1" data-line-number="1"><span class="co"># upper case letters</span></a>
<a class="sourceLine" id="cb202-2" data-line-number="2"><span class="kw">str_view</span>(basic, <span class="st">&#39;[A-Z]&#39;</span>)</a></code></pre></div>
<p>Now consider the following vector <code>triplets</code>:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb203-1" data-line-number="1">triplets &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;123&#39;</span>, <span class="st">&#39;abc&#39;</span>, <span class="st">&#39;ABC&#39;</span>, <span class="st">&#39;:-)&#39;</span>)</a></code></pre></div>
<p>You can use a series of character ranges to match various occurrences of a certain type of character. For example, to match three consecutive digits you can define a pattern <code>&quot;[0-9][0-9][0-9]&quot;</code>; to match three consecutive lower case letters you can use the pattern <code>&quot;[a-z][a-z][a-z]&quot;</code>; and the same idea applies to a pattern that matches three consecutive upper case letters <code>&quot;[A-Z][A-Z][A-Z]&quot;</code>.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb204-1" data-line-number="1"><span class="kw">str_view</span>(triplets, <span class="st">&#39;[0-9][0-9][0-9]&#39;</span>)</a>
<a class="sourceLine" id="cb204-2" data-line-number="2"></a>
<a class="sourceLine" id="cb204-3" data-line-number="3"><span class="kw">str_view</span>(triplets, <span class="st">&#39;[A-Z][A-Z][A-Z]&#39;</span>)</a></code></pre></div>
<p>Observe that the element <code>&quot;:-)&quot;</code> is not matched by any of the character ranges that we have seen so far.</p>
<p>Character ranges can be defined in multiple ways. For example, the range <code>&quot;[1-3]&quot;</code> indicates any one digit 1, 2, or 3. Another range may be defined as <code>&quot;[5-9]&quot;</code> comprising any one digit 5, 6, 7, 8 or 9. The same idea applies to letters. You can define shorter ranges other than <code>&quot;[a-z]&quot;</code>. One example is <code>&quot;[a-d]&quot;</code> which consists of any one lettere <em>a</em>, <em>b</em>, <em>c</em>, and <em>d</em>.</p>
</section>
<section id="negative-character-sets" class="level2">
<h2><span class="header-section-number">10.3</span> Negative Character Sets</h2>
<p>A common situation when working with regular expressions consists of matching characters that are NOT part of a certain set. This type of matching can be done using a negative character set: by matching any one character that is not in the set. To define this type of sets you are going to use the metacharacter caret <code>&quot;^&quot;</code>. If you are using a QWERTY keyboard, the caret symbol should be located over the key with the number 6.</p>
<p>The caret <code>&quot;^&quot;</code> is one of those metacharacters that have more than one meaning depending on where it appears in a pattern. If you use a caret in the first position inside a character set, e.g. <code>[^aeiou]</code>, it means <em>negation</em>. In other words, the caret in <code>[^aeiou]</code> means “not any one of lower case vowels.”</p>
<p>Let’s use the <code>basic</code> vector previously defined:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb205-1" data-line-number="1">basic &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>, <span class="st">&#39;a&#39;</span>, <span class="st">&#39;A&#39;</span>, <span class="st">&#39;&amp;&#39;</span>, <span class="st">&#39;-&#39;</span>, <span class="st">&#39;^&#39;</span>)</a></code></pre></div>
<p>To match those elements that are NOT upper case letters, you define a negative character range <code>&quot;[^A-Z]&quot;</code>:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb206-1" data-line-number="1"><span class="kw">str_view</span>(basic, <span class="st">&#39;[^A-Z]&#39;</span>)</a></code></pre></div>
<p>It is important that the caret is the first character inside the character set, otherwise the set is not a negative one:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb207-1" data-line-number="1"><span class="kw">str_view</span>(basic, <span class="st">&#39;[A-Z^]&#39;</span>)</a></code></pre></div>
<p>In the example above, the pattern <code>&quot;[A-Z^]&quot;</code> means “any one upper case letter or the caret character.” Which is completely different from the negative set <code>&quot;[^A-Z]&quot;</code> that negates any one upper case letter.</p>
<p>If you want to match any character except the caret, then you need to use a character set with two carets: <code>&quot;[^^]&quot;</code>. The first caret works as a negative operator, the second caret is the caret character itself:</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb208-1" data-line-number="1"><span class="kw">str_view</span>(basic, <span class="st">&#39;[^^]&#39;</span>)</a></code></pre></div>
</section>
<section id="metacharacters-inside-character-sets" class="level2">
<h2><span class="header-section-number">10.4</span> Metacharacters inside character sets</h2>
<p>Now that you know what character sets are, how to define character ranges, and how to specify negative character sets, we need to talk about what happens when including metacharacters inside character sets.</p>
<p>Except for the caret in the first position of the character set, any other metacharacter inside a character set is already escaped. This implies that you do not need to escape them using backslashes.</p>
<p>To illustrate the use of metacharacters inside character sets, let’s use the <code>pnx</code> vector:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb209-1" data-line-number="1">pnx &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;pan&#39;</span>, <span class="st">&#39;pen&#39;</span>, <span class="st">&#39;pin&#39;</span>, <span class="st">&#39;p0n&#39;</span>, <span class="st">&#39;p.n&#39;</span>, <span class="st">&#39;p1n&#39;</span>, <span class="st">&#39;paun&#39;</span>)</a></code></pre></div>
<p>The character set formed by <code>&quot;p[ae.io]n&quot;</code> includes the dot character. Remember that, in general, the period is the wildcard metacharacter and it matches any type of character. However, the period in this example is inside a character set, and because of that, it loses its wildcard behavior.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb210-1" data-line-number="1"><span class="kw">str_view</span>(pnx, <span class="st">&quot;p[ae.io]n&quot;</span>)</a></code></pre></div>
<p>As you can tell, <code>&quot;p[ae.io]n&quot;</code> matches <em>pan</em>, <em>pen</em>, <em>pin</em> and <em>p.n</em>, but not <em>p0n</em> or <em>p1n</em> because the dot is the literal dot, not a wildcard character anymore.</p>
<p>Not all metacharacters become literal characters when they appear inside a character set. The exceptions are the closing bracket <code>]</code>, the dash <code>-</code>, the caret <code>^</code>, and the backslash <code>\</code>.</p>
<p>The closing bracket <code>]</code> is used to enclose the character set. Thus, if you want to use a literal right bracket inside a character set you must escape it: <code>[aei\\[ou]</code>. Remember that in R you use double backslash for escaping purposes. This is also why the backslash <code>\</code>, or double backslash in R, does not become a literal character.</p>
<p>Another interesting case has to do with the dash or hyphen <code>-</code> character. As you know, the dash inside a character set is used to define a range of characters: e.g. <code>[0-9]</code>, <code>[x-z]</code>, and <code>[K-P]</code>. As a general rule, if you want to include a literal dash as part of a range, you should escape it: <code>&quot;[a-z\\-]&quot;</code>.</p>
<p>Let’s modify the <code>basic</code> vector by adding an opening and ending brackets:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" data-line-number="1">basic &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>, <span class="st">&#39;a&#39;</span>, <span class="st">&#39;A&#39;</span>, <span class="st">&#39;&amp;&#39;</span>, <span class="st">&#39;-&#39;</span>, <span class="st">&#39;^&#39;</span>, <span class="st">&#39;[&#39;</span>, <span class="st">&#39;]&#39;</span>)</a></code></pre></div>
<p>How do you match each of the characters that have a special meaning inside a character set?</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb212-1" data-line-number="1"><span class="co"># matching a literal caret</span></a>
<a class="sourceLine" id="cb212-2" data-line-number="2"><span class="kw">str_view</span>(basic, <span class="st">&quot;[a</span><span class="ch">\\</span><span class="st">^]&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb213-1" data-line-number="1"><span class="co"># matching a literal dash</span></a>
<a class="sourceLine" id="cb213-2" data-line-number="2"><span class="kw">str_view</span>(basic, <span class="st">&quot;[a</span><span class="ch">\\</span><span class="st">-]&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb214-1" data-line-number="1"><span class="co"># matching a literal opening bracket</span></a>
<a class="sourceLine" id="cb214-2" data-line-number="2"><span class="kw">str_view</span>(basic, <span class="st">&quot;[a</span><span class="ch">\\</span><span class="st">[]&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb215-1" data-line-number="1"><span class="co"># matching a literal closing bracket</span></a>
<a class="sourceLine" id="cb215-2" data-line-number="2"><span class="kw">str_view</span>(basic, <span class="st">&quot;[a</span><span class="ch">\\</span><span class="st">]]&quot;</span>)</a></code></pre></div>
</section>
<section id="character-classes" class="level2">
<h2><span class="header-section-number">10.5</span> Character Classes</h2>
<p>Closely related with character sets and character ranges, regular expressions provide another useful construct called <strong>character classes</strong> which, as their name indicates, are used to match a certain class of characters. The most common character classes in most regex engines are:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Character</th>
<th style="text-align: left;">Matches</th>
<th style="text-align: left;">Same as</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>\\d</code></td>
<td style="text-align: left;">any digit</td>
<td style="text-align: left;"><code>[0-9]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>\\D</code></td>
<td style="text-align: left;">any nondigit</td>
<td style="text-align: left;"><code>[^0-9]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>\\w</code></td>
<td style="text-align: left;">any character considered part of a word</td>
<td style="text-align: left;"><code>[a-zA-Z0-9_]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>\\W</code></td>
<td style="text-align: left;">any character not considered part of a word</td>
<td style="text-align: left;"><code>[^a-zA-Z0-9_]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>\\s</code></td>
<td style="text-align: left;">any whitespace character</td>
<td style="text-align: left;"><code>[\f\n\r\t\v]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>\\S</code></td>
<td style="text-align: left;">any nonwhitespace character</td>
<td style="text-align: left;"><code>[^\f\n\r\t\v]</code></td>
</tr>
</tbody>
</table>
<p>You can think of character classes as another type of metacharacters, or as shortcuts for special character sets.</p>
<p>The following table shows the characters that represent whitespaces:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Character</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>\f</code></td>
<td style="text-align: left;">form feed</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>\n</code></td>
<td style="text-align: left;">line feed</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>\r</code></td>
<td style="text-align: left;">carriage return</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>\t</code></td>
<td style="text-align: left;">tab</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>\v</code></td>
<td style="text-align: left;">vertical tab</td>
</tr>
</tbody>
</table>
<p>Sometimes you have to deal with nonprinting whitespace characters. In these situations you probably will end up using the whitespace character class <code>\\s</code>. A common example is when you have to match tab characters, or line breaks.</p>
<p>The operating system Windows uses <code>\r\n</code> as an end-of-line marker. In contrast, Unix-like operating systems (including Mac OS) use <code>\n</code>.</p>
<p>Tab characters <code>\t</code> are commonly used as a field-separator for data files. But most text editors render them as whitespaces.</p>
</section>
<section id="posix-character-classes" class="level2">
<h2><span class="header-section-number">10.6</span> POSIX Character Classes</h2>
<p>We finish this chapter with the introduction of another type of character classes known as <strong>POSIX character classes</strong>. These are yet another class construct that is supported by the regex engine in R.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Class</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Same as</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>[:alnum:]</code></td>
<td style="text-align: left;">any letter or digit</td>
<td style="text-align: left;"><code>[a-zA-Z0-9]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>[:alpha:]</code></td>
<td style="text-align: left;">any letter</td>
<td style="text-align: left;"><code>[a-zA-Z]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>[:digit:]</code></td>
<td style="text-align: left;">any digit</td>
<td style="text-align: left;"><code>[0-9]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>[:lower:]</code></td>
<td style="text-align: left;">any lower case letter</td>
<td style="text-align: left;"><code>[a-z]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>[:upper:]</code></td>
<td style="text-align: left;">any upper case letter</td>
<td style="text-align: left;"><code>[A-Z]</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>[:space:]</code></td>
<td style="text-align: left;">any whitespace inluding space</td>
<td style="text-align: left;"><code>[\f\n\r\t\v ]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>[:punct:]</code></td>
<td style="text-align: left;">any punctuation symbol</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>[:print:]</code></td>
<td style="text-align: left;">any printable character</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>[:graph:]</code></td>
<td style="text-align: left;">any printable character excluding space</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>[:xdigit:]</code></td>
<td style="text-align: left;">any hexadecimal digit</td>
<td style="text-align: left;"><code>[a-fA-F0-9]</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>[:cntrl:]</code></td>
<td style="text-align: left;">ASCII control characters</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<p>Notice that a POSIX character class is formed by an opening bracket <code>[</code>, followed by a colon <code>:</code>, followed by some keyword, followed by another colon <code>:</code>, and finally a closing bracket <code>]</code>.</p>
<p>In order to use them in R, you have to wrap a POSIX class inside a regex character class. That is, you have to surround a POSIX class with brackets.</p>
<p>Once again, refer to the <code>pnx</code> vector to illustrate the use of POSIX classes:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb216-1" data-line-number="1">pnx &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;pan&#39;</span>, <span class="st">&#39;pen&#39;</span>, <span class="st">&#39;pin&#39;</span>, <span class="st">&#39;p0n&#39;</span>, <span class="st">&#39;p.n&#39;</span>, <span class="st">&#39;p1n&#39;</span>, <span class="st">&#39;paun&#39;</span>)</a></code></pre></div>
<p>Let’s start with the <code>[:alpha:]</code> class, and see what does it match in <code>pnx</code>:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb217-1" data-line-number="1"><span class="kw">str_view</span>(pnx, <span class="st">&quot;[[:alpha:]]&quot;</span>)</a></code></pre></div>
<p>Now let’s test it with <code>[:digit:]</code></p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb218-1" data-line-number="1"><span class="kw">str_view</span>(pnx, <span class="st">&quot;[[:digit:]]&quot;</span>)</a></code></pre></div>

</section>
</section>
            </section>

          </div>
        </div>
      </div>


    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/gastonstat/r4strings/edit/master/%s",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "true";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
